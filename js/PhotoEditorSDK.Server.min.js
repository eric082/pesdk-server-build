!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("canvas"),require("gl"),require("chalk"),require("request")):"function"==typeof define&&define.amd?define(["canvas","gl","chalk","request"],t):"object"==typeof exports?exports.PhotoEditorServer=t(require("canvas"),require("gl"),require("chalk"),require("request")):e.PhotoEditorServer=t(e.canvas,e.gl,e.chalk,e.request)}("undefined"!=typeof self?self:this,function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=141)}([function(e,t,i){e.exports={default:i(142),__esModule:!0}},function(e,t,i){e.exports={default:i(152),__esModule:!0}},function(e,t,i){e.exports={default:i(144),__esModule:!0}},function(e,t,i){e.exports={default:i(147),__esModule:!0}},function(e,t,i){e.exports=i(155).default},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(245)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,e,{intensity:{type:f.OptionType.NUMBER,default:1,setter:function(e){return this._stack&&this._stack.setIntensity(e),e}},dirty:{type:f.OptionType.BOOLEAN,default:!0}}));return i._stack=new h.a(i._options.intensity),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Configurable"]),p(t,[{key:"render",value:function(e,t,i){var n=this;return this._stack.render(e,t,i).then(function(e){return n.setDirty(!1),e})}},{key:"setDirtyForRenderer",value:function(e,t){this._stack.setDirtyForRenderer(e,t)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),t}();_.identifier=null,_.isIdentity=!1,_.displayName=null,_.PrimitivesStack=h.a,t.a=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(247);i.d(t,"Brightness",function(){return n.a});var r=i(249);i.d(t,"Contrast",function(){return r.a});var o=i(251);i.d(t,"ColorMatrixPrimitive",function(){return o.a});var a=i(253);i.d(t,"Desaturation",function(){return a.a});var s=i(255);i.d(t,"Gamma",function(){return s.a});var u=i(257);i.d(t,"Glow",function(){return u.a});var l=i(259);i.d(t,"Gobblin",function(){return l.a});var c=i(261);i.d(t,"Grayscale",function(){return c.a});var f=i(129);i.d(t,"LookupTable",function(){return f.a});var h=i(264);i.d(t,"LookupTableImage",function(){return h.a});var p=i(266);i.d(t,"Saturation",function(){return p.a});var _=i(268);i.d(t,"SoftColorOverlay",function(){return _.a});var d=i(270);i.d(t,"ToneCurve",function(){return d.a});var y=i(271);i.d(t,"X400",function(){return y.a});var v=i(273);i.d(t,"ThreeDLookupTableImage",function(){return v.a})},function(e,t,i){e.exports={default:i(199),__esModule:!0}},function(e,t,i){"use strict";i.d(t,"a",function(){return h}),i.d(t,"j",function(){return p});var n=i(17),r=i(42),o=i(109),a=i(110),s=i(34),u=i(43),l=i(19),c=i(111),f=i(28);i.d(t,"b",function(){return r.a}),i.d(t,"g",function(){return o.a}),i.d(t,"k",function(){return s.a}),i.d(t,"h",function(){return a.a}),i.d(t,"d",function(){return u.a}),i.d(t,"f",function(){return n.a}),i.d(t,"i",function(){return l.a}),i.d(t,"c",function(){return f}),i.d(t,"e",function(){return c.a});var h=2e3,p=20},function(e,t){var i=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=i)},function(e,t,i){"use strict";i.d(t,"h",function(){return p}),i.d(t,"n",function(){return g}),i.d(t,"k",function(){return _}),i.d(t,"d",function(){return h}),i.d(t,"b",function(){return f}),i.d(t,"a",function(){return c}),i.d(t,"i",function(){return d}),i.d(t,"j",function(){return v}),i.d(t,"e",function(){return y});var n=i(154),r=i(333),o=i(17),a=i(132),s=i(48),u=i(39),l=i.n(u);i.d(t,"m",function(){return n.a}),i.d(t,"c",function(){return r.a}),i.d(t,"g",function(){return o.a}),i.d(t,"l",function(){return a.a}),i.d(t,"f",function(){return s.a});var c=l.a.Base64,f=l.a.Color,h=(l.a.Math.ColorMatrix,l.a.EventEmitter),p=(l.a.EXIF,l.a.OptionType,l.a.Promise),_=l.a.Utils,d=l.a.RenderType,y=l.a.ImageFormat,v=l.a,g=(l.a.UniformType,l.a.Math.Vector2);l.a.Math.Rectangle,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(81)},function(e,t,i){e.exports={default:i(171),__esModule:!0}},function(e,t,i){var n=i(69)("wks"),r=i(51),o=i(14).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=n},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Configurable"]),h(t,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),t}();t.a=p},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var n=i(14),r=i(9),o=i(30),a=i(25),s=function(e,t,i){var u,l,c,f=e&s.F,h=e&s.G,p=e&s.S,_=e&s.P,d=e&s.B,y=e&s.W,v=h?r:r[t]||(r[t]={}),g=v.prototype,m=h?n:p?n[t]:(n[t]||{}).prototype;for(u in h&&(i=t),i)(l=!f&&m&&void 0!==m[u])&&u in v||(c=l?m[u]:i[u],v[u]=h&&"function"!=typeof m[u]?i[u]:d&&l?o(c,n):y&&m[u]==c?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):_&&"function"==typeof c?o(Function.call,c):c,_&&((v.virtual||(v.virtual={}))[u]=c,e&s.R&&g&&!g[u]&&a(g,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,i){var n=i(21);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){"use strict";var n=i(79),r=i.n(n),o=i(0),a=i.n(o),s=i(185),u=i.n(s),l=(i(19),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());function c(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return r()(e)}var f=i(192),h=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],p=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},_=new(function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._levels=[].concat(c(n)),this._maxLevel=this.getLevelIndexByName(i),this._consoleFuncs={trace:function(){var e,t;p()?((e=console).groupCollapsed.apply(e,arguments),console.trace(),console.groupEnd()):(t=console).trace.apply(t,arguments)}},this._levels.forEach(function(e){var i=e.name;t[i]=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t._log.apply(t,[i,e].concat(r))}})}return l(e,[{key:"getLevelIndexByName",value:function(e){return this._levels.findIndex(function(t){return t.name===e})}},{key:"getLevelObjectByName",value:function(e){return this._levels.find(function(t){return t.name===e})}},{key:"canLog",value:function(e){var t=this.getLevelIndexByName(e);return!(t<0)&&t>=this._maxLevel}},{key:"setLevel",value:function(e){var t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}},{key:"_log",value:function(e,t){var i=this.getLevelObjectByName(e);if(i&&this.canLog(e)){i.name;for(var n=i.type,r=i.background,o=i.color,a=arguments.length,s=Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];var h=s.filter(function(e){return void 0!==e}).map(function(e){return e.toObject?JSON.parse(u()(e.toObject())):e}),_=this._consoleFuncs[n]||console[n]||console.log,d=h.length,y=function(e,t){return[f.bgHex("#2D7BFF"),f.bgHex("#2B2B2B").white,f.bgHex("#2D7BFF"),f.bgHex(e).hex(t).bold,f.bgHex("#2B2B2B").white,f.bgHex("#2D7BFF")]}(r,o),v=y[0](" ")+" "+y[1]("PhotoEditorSDK")+" "+y[2](" ")+" "+y[3](t),g=y[5](" ")+" ";d<=0?_(v+" "+g):1!==d||"string"!=typeof h[0]?p()?(console.groupCollapsed(v+" "+g),_.apply(void 0,c(h)),console.groupEnd()):_.apply(void 0,[v+" "+g].concat(c(h))):_(v+" "+y[4](h[0])+" "+g)}}},{key:"image",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]}},{key:"texture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]}},{key:"logGlTexture",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]}}]),e}())("warn");t.a=_},function(e,t,i){var n=i(16),r=i(92),o=i(62),a=Object.defineProperty;t.f=i(22)?Object.defineProperty:function(e,t,i){if(n(e),t=o(t,!0),n(i),r)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(80),u=i.n(s),l=i(79),c=i.n(l),f=i(11),h=i.n(f),p=i(56),_=i.n(p),d=i(1),y=i.n(d),v=i(0),g=i.n(v),m=i(41),b=u.a||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},k="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},w=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),g()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function x(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return c()(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var C=function(){function e(){T(this,e)}return w(e,null,[{key:"head",value:function(e){return e[0]}},{key:"tail",value:function(e){return e.slice(1)}},{key:"last",value:function(e){return e[e.length-1]}},{key:"init",value:function(e){return e.slice(0,e.length-1)}},{key:"remove",value:function(e,t){return e.filter(function(e,i,n){return!t(e,i,n)})}}]),e}(),E=function(){function e(){T(this,e)}return w(e,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isPlainObject",value:function(e){if("object"!==(void 0===e?"undefined":k(e))||!e)return!1;if("function"==typeof y.a){var t=y()(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&"undefined"!=typeof global}},{key:"values",value:function(e){var t=[];for(var i in e)t.push(e[i]);return t}},{key:"isDOMElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":k(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":k(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"isTouchEvent",value:function(e){return-1!==e.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(e,t){var i=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(i)}},{key:"resizeVectorToFill",value:function(e,t){var i=e.x/e.y;return i>t.x/t.y?t.clone().set(t.y*i,t.y):t.clone().set(t.x,t.x/i)}},{key:"isExtendable",value:function(e){return void 0!==e&&null!==e&&("object"===(void 0===e?"undefined":k(e))||"function"==typeof e)}},{key:"defaults",value:function(e){var t={};for(var i in e)t[i]=e[i];for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)void 0===t[u]&&(t[u]=s[u])}return t}},{key:"deepMerge",value:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.reduce(function t(i,n){if(void 0===n)return t(null,i);if(Array.isArray(n))return[].concat(x(n));if(!e.isPlainObject(n))return n;if(!e.isPlainObject(i))return b({},n);var r=b({},i);return _()(n).forEach(function(e){var o=n[e];void 0!==o&&(r[e]=t(i[e],o))}),r},t)}},{key:"deepDefaults",value:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=[].concat(n).reverse();return e.deepMerge.apply(e,x(o).concat([t]))}},{key:"deepClone",value:function(t){var i={};for(var n in t)e.isExtendable(t[n])?i[n]=e.deepClone(t[n]):i[n]=t[n];return i}},{key:"getDeepProperty",value:function(e,t){if("string"==typeof t)return e[t];if(Array.isArray(t)){return t.reduce(function(e,t){return e?"function"==typeof t?function(e,t){var i=void 0;try{i=t(e)}catch(e){if(!(e instanceof TypeError))throw e}return i}(e,t):e[t]:null},e)}}},{key:"extend",value:function(e){var t={};for(var i in e)t[i]=e[i];for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)t[u]=s[u]}return t}},{key:"clone",value:function(e){return this.extend({},e)}},{key:"createBlobURIFromDataURI",value:function(e){var t="undefined"==typeof window?global:window;if(!(t.Blob&&t.URL&&ArrayBuffer&&Uint8Array))return e;for(var i=m.a.decode(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(i.length),o=new Uint8Array(r),a=0;a<i.length;a++)o[a]=i[a];var s=new t.Blob([r],{type:n});return t.URL.createObjectURL(s)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"flatten",value:function(t){return t.reduce(function(t,i){return t.concat(Array.isArray(i)?e.flatten(i):i)},[])}},{key:"createCanvas",value:function(){return"undefined"==typeof WEBPACK?new(0,i(20).Canvas)(300,150):document.createElement("canvas")}},{key:"isPowerOfTwo",value:function(e){return 0==(e.x&e.x-1)&&0==(e.y&e.y-1)}},{key:"nextLowestPOT",value:function(e){for(var t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}},{key:"nextHighestPOT",value:function(e){e--;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"moveArrayItem",value:function(e,t,i){if(i>=e.length)for(var n=i-e.length;1+n--;)e.push(void 0);e.splice(i,0,e.splice(t,1)[0])}},{key:"ensureCanvasDimensions",value:function(e,t){e.width===t.x&&e.height===t.y||(e.width=t.x,e.height=t.y)}},{key:"byteArrayToString",value:function(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}},{key:"clamp",value:function(e,t,i){return Math.max(t,Math.min(e,i))}},{key:"wildCardMatch",value:function(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}},{key:"flipObject",value:function(e){var t={};for(var i in e)t[e[i]]=i;return t}},{key:"cloneOptions",value:function(e){var t={};for(var i in e){var n=e[i];Array.isArray(n)?n=n.slice():n.clone&&(n=n.clone()),t[i]=n}return t}},{key:"ISODateString",value:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":k(e))||null===e||"object"!==(void 0===t?"undefined":k(t))||null===t)return!1;var i=_()(e),n=_()(t);if(i.length!==n.length)return!1;for(var r=hasOwnProperty.bind(t),o=0;o<i.length;o++)if(!r(i[o])||e[i[o]]!==t[i[o]])return!1;return!0}},{key:"enableIf",value:function(e,t){return e?t:void 0}},{key:"invariant",value:function(e,t){if(!e)throw new Error(t)}},{key:"executePromises",value:function(e){var t=e.length,i=0,n=[],r=[];return new h.a(function(o,a){var s=function(){++i>=t&&(r.length<=0?o(n):a(r))},u=function(e){n.push(e),s()},l=function(e){r.push(e),s()};e.forEach(function(e){e.then(u).catch(l)})})}}]),e}();E.Array=C,t.a=E},function(t,i){t.exports=e},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,i){e.exports={default:i(157),__esModule:!0}},function(e,t,i){e.exports={default:i(163),__esModule:!0}},function(e,t,i){var n=i(18),r=i(35);e.exports=i(22)?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(93),r=i(64);e.exports=function(e){return n(r(e))}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"RenderType",function(){return n}),i.d(t,"ImageFormat",function(){return r}),i.d(t,"Events",function(){return o}),i.d(t,"OptionType",function(){return a}),i.d(t,"UniformType",function(){return s}),i.d(t,"RendererType",function(){return u});var n={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},r={PNG:"image/png",JPEG:"image/jpeg"},o={OPERATION_UPDATED:"operation:update"},a={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},s={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},u={WEBGL:"webgl",CANVAS:"canvas"}},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(11),u=i.n(s),l=i(0),c=i.n(l),f=i(210),h=i.n(f),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},_="undefined"==typeof global?window:global,d=void 0!==u.a?u.a:function(){var e,t,i,n=Object.prototype.toString,r=void 0!==h.a?function(e){return h()(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,i,n){return c()(e,t,{value:i,writable:!0,configurable:!1!==n})}}catch(t){e=function(e,t,i){return e[t]=i,e}}function o(e,n){i.add(e,n),t||(t=r(i.drain))}function a(e){var t,i=void 0===e?"undefined":p(e);return null==e||"object"!=i&&"function"!=i||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,i){var n,r;try{!1===t?i.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(r=a(n))?r.call(n,i.resolve,i.reject):i.resolve(n)}catch(e){i.reject(e)}}function l(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function f(e,t,i,n){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then(function(e){i(r,e)},n)}(r)}function _(e){this.def=e,this.triggered=!1}function d(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new function(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(e,i){var n={success:"function"!=typeof e||e,failure:"function"==typeof i&&i};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),t.chain.push(n),0!==t.state&&o(s,t),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(t){var i,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(i=a(t))?o(function(){var r=new _(n);try{i.call(t,function(){e.apply(r,arguments)},function(){l.apply(r,arguments)})}catch(e){l.call(r,e)}}):(n.msg=t,n.state=1,n.chain.length>0&&o(s,n))}catch(e){l.call(new _(n),e)}}}).call(t,e)},function(e){l.call(t,e)})}catch(e){l.call(t,e)}}i={add:function(e,t){g=new function(e,t){this.fn=e,this.self=t,this.next=void 0}(e,t),v?v.next=g:y=g,v=g,g=void 0},drain:function(){var e=y;for(y=v=t=void 0;e;)e.fn.call(e.self),e=e.next}};var y,v,g;var m=e({},"constructor",d,!1);return d.prototype=m,e(m,"__NPO__",0,!1),e(d,"resolve",function(e){return e&&"object"==(void 0===e?"undefined":p(e))&&1===e.__NPO__?e:new this(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");t(e)})}),e(d,"reject",function(e){return new this(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");i(e)})}),e(d,"all",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");var r=e.length,o=Array(r),a=0;f(t,e,function(e,t){o[e]=t,++a===r&&i(o)},n)})}),e(d,"race",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):new t(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");f(t,e,function(e,t){i(t)},n)})}),d}();_.Promise=_.Promise||d,t.a=d},function(e,t,i){var n=i(49);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports={}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(55),r=i(28),o=i(41),a=i(43),s=i(19),u=i(46),l=i(42),c=i(17),f=i(29),h=i(111),p=i(222),_=i(226);i.d(t,"requestAnimationFrame",function(){return _.b}),i.d(t,"cancelAnimationFrame",function(){return _.a}),i.d(t,"Engine",function(){return n.a}),i.d(t,"EventEmitter",function(){return a.a}),i.d(t,"Utils",function(){return s.a}),i.d(t,"Configurable",function(){return u.a}),i.d(t,"Color",function(){return l.a}),i.d(t,"Constants",function(){return r}),i.d(t,"Log",function(){return c.a}),i.d(t,"Promise",function(){return f.a}),i.d(t,"GLUtils",function(){return h.a}),i.d(t,"Base64",function(){return o.a}),i.d(t,"LicenseChecker",function(){return p.a});var d=i(120);i.d(t,"Vector2",function(){return d.Vector2}),i.d(t,"Vector3",function(){return d.Vector3}),i.d(t,"Rectangle",function(){return d.Rectangle}),i.d(t,"Matrix",function(){return d.Matrix}),i.d(t,"ColorMatrix",function(){return d.ColorMatrix})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return o(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clamp",value:function(t,i){var n=null!==t&&void 0!==t,r=null!==i&&void 0!==i;return t instanceof e||!n||(t=new e(t,t)),i instanceof e||!r||(i=new e(i,i)),n&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y)),r&&(this.x=Math.min(i.x,this.x),this.y=Math.min(i.y,this.y)),this}},{key:"divide",value:function(t,i){return t instanceof e?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=void 0===i?t:i),this}},{key:"subtract",value:function(t,i){return t instanceof e?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=void 0===i?t:i),this}},{key:"multiply",value:function(t,i){return t instanceof e?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=void 0===i?t:i),this}},{key:"add",value:function(t,i){return t instanceof e?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=void 0===i?t:i),this}},{key:"equals",value:function(t,i){return t instanceof e?t.x===this.x&&t.y===this.y:t===this.x&&i===this.y}},{key:"flip",value:function(){var e=this.x;return this.x=this.y,this.y=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y)}},{key:"NULL",get:function(){return new e(0,0)}}]),e}();t.a=a},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(94),r=i(70);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(64);e.exports=function(e){return Object(n(e))}},function(e,t,i){
/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
e.exports=i(4),i(237)},function(e,t,i){"use strict";var n=i(158)(!0);i(97)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){"use strict";
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={encode:function(e){var t="",i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0;do{a=(i=e[c++])>>2,s=(3&i)<<4|(r=e[c++])>>4,u=(15&r)<<2|(o=e[c++])>>6,l=63&o,isNaN(r)?u=l=64:isNaN(o)&&(l=64),t=t+n.charAt(a)+n.charAt(s)+n.charAt(u)+n.charAt(l),i=r=o="",a=s=u=l=""}while(c<e.length);return t},decode:function(e){var t=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=0,l=[];if(/[^A-Za-z0-9+/=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");e=e.replace(/[^A-Za-z0-9+/=]/g,"");do{t=n.indexOf(e.charAt(u++))<<2|(o=n.indexOf(e.charAt(u++)))>>4,i=(15&o)<<4|(a=n.indexOf(e.charAt(u++)))>>2,r=(3&a)<<6|(s=n.indexOf(e.charAt(u++))),l.push(t),64!==a&&l.push(i),64!==s&&l.push(r),t=i=r="",o=a=s=""}while(u<e.length);return l}};t.a=r},function(e,t,i){"use strict";var n=i(107),r=i.n(n),o=i(108),a=i.n(o),s=i(0),u=i.n(s),l=function(){return function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,u=a()(e);!(n=(s=u.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var f=function(){function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=t,this.g=i,this.b=n,this.a=r}return c(e,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=e,this.g=t,this.b=i,this.a=n,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var e,t=Math.max(this.r,this.g,this.b),i=Math.min(this.r,this.g,this.b),n=void 0,r=t,o=t-i;if(e=0===t?0:o/t,t===i)n=0;else{switch(t){case this.r:n=(this.g-this.b)/o,this.g<this.b&&(n+=6);break;case this.g:n=(this.b-this.r)/o+2;break;case this.b:n=(this.r-this.g)/o+4}n/=6}return[n,e,r]}},{key:"fromHSV",value:function(t,i,n){return this.copy(e.fromHSV(t,i,n)),this}},{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}},{key:"minus",value:function(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}},{key:"divideScalar",value:function(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}},{key:"clamp",value:function(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"equals",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"_componentToHex",value:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*t),c=6*t-l,f=n*(1-i),h=n*(1-c*i),p=n*(1-(1-c)*i);switch(l%6){case 0:a=n,s=p,u=f;break;case 1:a=h,s=n,u=f;break;case 2:a=f,s=n,u=p;break;case 3:a=f,s=h,u=n;break;case 4:a=p,s=f,u=n;break;case 5:a=n,s=f,u=h}return new e(a,s,u,r)}},{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2],t[3])}},{key:"fromHex",value:function(t){var i=t.match(/.{1,2}/g),n=l(i,3),r=n[0],o=n[1],a=n[2];return new e(parseInt(r,16)/255,parseInt(o,16)/255,parseInt(a,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new e(0,0,0,0)}},{key:"WHITE",get:function(){return new e(1,1,1,1)}},{key:"BLACK",get:function(){return new e(0,0,0,1)}}]),e}();t.a=f},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(17),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=12,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._maxListeners=s,this._events={},this._pipeDestinations=[]}return a(e,[{key:"pipeEvents",value:function(e){this._pipeDestinations.push(e)}},{key:"unpipeEvents",value:function(e){var t=this._pipeDestinations.indexOf(e);-1!==t&&this._pipeDestinations.splice(t,1)}},{key:"on",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if("function"!=typeof t)throw new TypeError;var i=this._events[e]||(this._events[e]=[]);return-1!==i.indexOf(t)?this:(i.push(t),this._maxListeners&&i.length>this._maxListeners&&(o.a.warn("EventEmitter","Possible memory leak detected, added "+i.length+" `"+e+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)}},{key:"once",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");var i=this;return this.on(e,function n(){i.off(e,n),t.apply(null,arguments)})}},{key:"off",value:function(e){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[e]=null,this;var t=arguments.length<=1?void 0:arguments[1];if("function"!=typeof t)throw new TypeError;var i=this._events[e];if(!i||!i.length)return this;var n=i.indexOf(t);return-1===n?this:(i.splice(n,1),this)}},{key:"emit",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(void 0===e)throw new Error("Invalid event type: `"+e+"`");this._pipeDestinations.forEach(function(t){t.emit.apply(t,[e].concat(i))});var r=this._events[e];return!(!r||!r.length)&&(r.slice(0).forEach(function(e){return e.apply(null,i)}),!0)}},{key:"setMaxListeners",value:function(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(79),r=i.n(n),o=i(0),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(8),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this));return i.id=t.id++,i._onSourceLoaded=i._onSourceLoaded.bind(i),i._renderers=[],i._glTextures={},i._source=e,i._dirty=!0,i._glUnit=0,i._mipMapping=!1,i._magFilter=t.DefaultMagFilter,i._minFilter=t.DefaultMinFilter,i._repeatX=t.ClampToEdge,i._repeatY=t.ClampToEdge,i._pixelRatio=1,i._loaded=!1,i._frame=new p.h(0,0,100,100),e&&i._loadSource(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["d"]),_(t,[{key:"resizeTo",value:function(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var e=this._source,t=e.complete,i="Canvas"===e.constructor.name||e.tagName&&"CANVAS"===e.tagName.toUpperCase();if(t||i)return this._onSourceLoaded();e.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var e=new p.k(this._source.width,this._source.height);p.i.isPowerOfTwo(e)?(p.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=t.TrilinearFilter,this._mipMapping=!0):(this._minFilter=t.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new p.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return r()(e)}(this._renderers))}},{key:"getGLFilter",value:function(e,t){switch(t){case"min":return this.constructor.getGLFilter(e,this._minFilter);case"mag":return this.constructor.getGLFilter(e,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(e){this._loaded=e}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(e){this._source=e}},{key:"getGLTextureForRenderer",value:function(e){return this._glTextures[e.id]}},{key:"setGLTextureForRenderer",value:function(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getDimensions",value:function(){return new p.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(e){this._glUnit=e}},{key:"setMinFilter",value:function(e){this._minFilter=e}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(e){this._magFilter=e}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(e){this._repeatX=e}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(e){this._repeatY=e}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(e,i){switch("x"===i?this.getRepeatX():this.getRepeatY()){case t.ClampToEdge:return e.CLAMP_TO_EDGE;case t.Repeat:return e.REPEAT;case t.MirroredRepeat:return e.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(e){this._dirty=e}},{key:"disposeGLTextures",value:function(){for(var e in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[e])}},{key:"disposeGLTexturesForRenderer",value:function(e){this._glTextures[e.id]&&(e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(e){this._mipMapping=e}},{key:"dispose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposeGLTextures()}}],[{key:"getGLFilter",value:function(e,i){switch(i){case t.LinearFilter:return e.LINEAR;case t.NearestFilter:return e.NEAREST;case t.BilinearFilter:return e.LINEAR_MIPMAP_NEAREST;case t.TrilinearFilter:return e.LINEAR_MIPMAP_LINEAR}}}]),t}();d.NearestFilter=0,d.LinearFilter=1,d.BilinearFilter=2,d.TrilinearFilter=3,d.DefaultMagFilter=d.NearestFilter,d.DefaultMinFilter=d.LinearFilter,d.ClampToEdge=0,d.Repeat=1,d.MirroredRepeat=2,d.id=0,t.a=d},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(8),_=i(46),d=i(84),y=i(83),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),g=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var m=p.c.OptionType,b=p.c.UniformType,k=p.c.RendererType,w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),v(t,[{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=y.a.defaultUniforms,this._attributes=y.a.defaultAttributes,this._vertexSource=y.a.defaultVertexSource,this._fragmentSource=y.a.defaultFragmentSource,this._initUniforms(),g(t.prototype.__proto__||h()(t.prototype),"_initOptions",this).call(this,e)}},{key:"_initUniforms",value:function(){for(var e in this._uniforms={},this._availableUniforms){var t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(var i in this.availableOptions){var n=this.availableOptions[i];n.uniformType?this._uniforms["u_"+i]={type:n.uniformType,value:n.default||null}:p.f.trace(this.constructor.name,"Option `"+i+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,i,n);var r=i,o=this.availableOptions[e];if(o.uniformType){var a="u_"+e;switch(o.type){case m.COLOR:o.uniformType===b.FLOAT4?r=i.toGLColor():o.uniformType===b.FLOAT3&&(r=i.toRGBGLColor());break;case m.VECTOR2:r=[i.x,i.y];break;case m.COLOR_MATRIX:r=[i.a,i.b,i.c,i.d,i.f,i.g,i.h,i.i,i.k,i.l,i.m,i.n,i.p,i.q,i.r,i.s];var s=[i.e,i.j,i.o,i.t];this._uniforms[a+"_vec"]={value:s,type:b.FLOAT4}}this.setUniform(a,r)}}},{key:"setUniform",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in e)this._uniforms[i].value=e[i],t&&this.syncUniform(i)}},{key:"syncUniform",value:function(e){this._shaders.forEach(function(t){t.syncUniform(e)})}},{key:"syncUniforms",value:function(){this._shaders.forEach(function(e){e.syncUniforms()})}},{key:"getShaderForRenderer",value:function(e){var t=e.getContext(),i=this._shaders[t.id];return i||(i=new d.a(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t.id]=i),i}},{key:"apply",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.isOfType(k.WEBGL)?this._applyWebGL(e,t,i,n):e.isOfType(k.CANVAS)&&this._applyCanvas(e,t,i,n)}},{key:"_applyWebGL",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=this.getShaderForRenderer(e);e.setRenderTarget(i),n&&i.clear(),e.setShader(o);var a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getCanvas(),r=i.getContext();p.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),r.clearRect(0,0,n.width,n.height),r.drawImage(n,0,0)}},{key:"dispose",value:function(){this._shaders.forEach(function(e){return e.dispose()}),this._shaders=[]}}]),t}();t.a=w},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(2),c=i.n(l),f=i(3),h=i.n(f),p=i(56),_=i.n(p),d=i(1),y=i.n(d),v=i(29),g=i(17),m=i(43),b=i(34),k=i(42),w=i(19),x=i(119),T=i(28),C="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var O=void 0;O=i(20).Image;var R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||y()(t)).call(this));return n.availableOptions=n.availableOptions||{},n.availableOptions=w.a.extend(n.availableOptions,i),n._onConfigurableUpdate=n._onConfigurableUpdate.bind(n),n._initOptions(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,m["a"]),E(t,[{key:"_buildConfigError",value:function(e){var t="";return this.constructor.name&&(t=this.constructor.name+": "),t+=e,new Error(t)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var e=this;return new v.a(function(t,i){for(var n in e.availableOptions){if(e.availableOptions[n].required&&void 0===e._options[n])return i(e._buildConfigError("Option `"+n+"` is required."))}t()})}},{key:"_initOptions",value:function(){var e,i,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var o=this;for(e in this.availableOptions){if(n=e.charAt(0).toUpperCase()+e.slice(1),i=this.availableOptions[e],-1===[T.OptionType.STRING,T.OptionType.NUMBER,T.OptionType.BOOLEAN,T.OptionType.OBJECT,T.OptionType.VECTOR2,T.OptionType.COLOR,T.OptionType.CONFIGURABLE,T.OptionType.COLOR_MATRIX,T.OptionType.ARRAY,T.OptionType.IMAGE,T.OptionType.FUNCTION,T.OptionType.ALL].indexOf(i.type))throw this._buildConfigError("Unknown option type: `"+i.type+"`");if(function(e,t){o["set"+n]=function(t,i,n){o.setOption(e,t,i,n)},o["get"+n]=function(){return o.getOption(e)}}(e),i.type===T.OptionType.CONFIGURABLE&&(this._options[e]=new t(void 0,i.structure||{}),this._options[e].on("update",this._onConfigurableUpdate)),!(e in r)||void 0===r[e])if(void 0!==i.default){var a=i.default;"function"==typeof i.default&&(a=i.default()),this["set"+n](a,!1,!0)}else i.type!==T.OptionType.CONFIGURABLE&&(this._options[e]=void 0)}for(e in r){if(void 0===this.availableOptions[e])throw new Error("Invalid option: "+e);void 0!==r[e]&&this["set"+(n=e.charAt(0).toUpperCase()+e.slice(1))](r[e],!1,!0)}}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in e)this.setOption(i,e[i],!1);this._onOptionsChange(),t&&this.emit("update",this,e)}},{key:"getOption",value:function(e){return this._options[e]}},{key:"hasOption",value:function(e){return!!this.availableOptions[e]}},{key:"getOptionDefault",value:function(e){var t=this.availableOptions[e];if(!t)throw new Error("Invalid option: "+e);return t.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var e={};for(var t in this.availableOptions){var i=this.availableOptions[t].default;void 0!==i&&(e[t]=i)}return e}},{key:"optionsEqual",value:function(e){for(var t in e){var i=e[t];if(!this._optionEquals(t,i))return!1}return!0}},{key:"_optionEquals",value:function(e,t){if(void 0===this.availableOptions[e])throw new Error("Invalid option: "+e);var i=this.availableOptions[e].type,n=this._options[e];if(n===t)return!0;if(void 0===t||void 0===n)return!1;switch(i){case T.OptionType.OBJECT:return"function"==typeof n.optionsEqual?n.optionsEqual(t._options):n===t;case T.OptionType.STRING:case T.OptionType.NUMBER:case T.OptionType.BOOLEAN:case T.OptionType.FUNCTION:case"*":return n===t;case T.OptionType.VECTOR2:return n.equals(t);case T.OptionType.COLOR:case T.OptionType.COLOR_MATRIX:return t.equals(n);case T.OptionType.CONFIGURABLE:return n.optionsEqual(t);case T.OptionType.ARRAY:return this._arrayOptionEquals(e,t);case T.OptionType.IMAGE:return n.src===t.src}}},{key:"_arrayOptionEquals",value:function(e,i){var n=this._options[e];if(i.length!==n.length)return!1;for(var r=!0,o=0;o<n.length;o++){var a=n[o],s=i[o];if(a instanceof t){if(void 0===s||!a.optionsEqual(s)){r=!1;break}}else if(s!==a){r=!1;break}}return r}},{key:"serializeOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()(this._options),i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return t.forEach(function(t){if(void 0===e.availableOptions[t])return g.a.warn("Trying to serialize a key that does not exist: "+t);!1!==e.availableOptions[t].serializable&&(n[t]=e.serializeOption(t,i))}),n}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.availableOptions[e],n=i.type,r=this._options[e];if(!r)return r;if(!1===i.serializable)throw new Error("Option `"+e+"` is not serializable.");switch(n){case T.OptionType.STRING:case T.OptionType.NUMBER:case T.OptionType.BOOLEAN:case T.OptionType.OBJECT:case T.OptionType.FUNCTION:case T.OptionType.ALL:return r;case T.OptionType.VECTOR2:return t?r.toObject():r.clone();case T.OptionType.COLOR:case T.OptionType.COLOR_MATRIX:return t?r.toArray():r.clone();case T.OptionType.CONFIGURABLE:return r.serializeOptions(void 0,t);case T.OptionType.ARRAY:return r.slice(0);case T.OptionType.IMAGE:return t?r.src:r}}},{key:"setOption",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.availableOptions[e];if(!r)throw new Error("Invalid option: "+e);if(void 0!==r.setter&&(t=r.setter.call(this,t,n)),void 0!==r.validation&&r.validation(t),null===t||void 0===t){if(r.required)throw this._buildConfigError("Option `"+e+"` is required.");this._options[e]=t}else switch(r.type){case T.OptionType.STRING:if((void 0===t?"undefined":C(t))!==T.OptionType.STRING)throw this._buildConfigError("Option `"+e+"` has to be a string.");var o=r.available;if(void 0!==o&&-1===o.indexOf(t))throw this._buildConfigError("Invalid value for `"+e+"` (valid values are: "+r.available.join(", ")+")");this._options[e]=t;break;case T.OptionType.NUMBER:if((void 0===t?"undefined":C(t))!==T.OptionType.NUMBER)throw this._buildConfigError("Option `"+e+"` has to be a number.");this._options[e]=t;break;case T.OptionType.BOOLEAN:if((void 0===t?"undefined":C(t))!==T.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+e+"` has to be a boolean.");this._options[e]=t;break;case T.OptionType.VECTOR2:if(!(t instanceof b.a||"object"===(void 0===t?"undefined":C(t))&&"x"in t&&"y"in t))throw this._buildConfigError("Option `"+e+"` has to be an instance of Vector2 or an Object holding x and y values.");t instanceof b.a?this._options[e]=t.clone():this._options[e]=b.a.fromObject(t);break;case T.OptionType.COLOR:if(!(t instanceof k.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of Color.");this._options[e]=t;break;case T.OptionType.COLOR_MATRIX:if(!(t instanceof x.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of ColorMatrix.");this._options[e]=t.clone();break;case T.OptionType.FUNCTION:if("function"!=typeof t)throw this._buildConfigError("Option `"+e+"` has to be a function.");this._options[e]=t;break;case T.OptionType.OBJECT:case"*":this._options[e]=t;break;case T.OptionType.IMAGE:if("string"==typeof t){var a=new O;a.src=t,this._options[e]=a}else{if(!(t instanceof O||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement))throw this._buildConfigError("Option `"+e+"` has to be an Image or String.");this._options[e]=t}break;case T.OptionType.CONFIGURABLE:this._options[e].set(t);break;case T.OptionType.ARRAY:if(!(t instanceof Array))throw this._buildConfigError("Option `"+e+"` has to be an Array.");this._options[e]=t.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+r.type+"`")}i&&(this._onOptionsChange(),this.emit("update",this,function(e,t,i){return t in e?u()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,t)))}},{key:"_onConfigurableUpdate",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.emit.apply(this,["update"].concat(t))}},{key:"hasChanges",value:function(){var e=this.getDefaultOptions();return!this.optionsEqual(e)}}]),t}();t.a=R},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(29),a=i(224),s=i.n(a),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l="undefined"!=typeof window?window:global,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._parsedUrl=s.a.parse(this._url,!0)}return u(e,[{key:"_isJSONPRequest",value:function(){var e=this._parsedUrl.query;for(var t in e){if("?"===e[t])return!0}return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var e=this;return new o.a(function(t,i){var n=void 0;l.XDomainRequest?((n=new l.XDomainRequest).onload=function(){var e=JSON.parse(n.responseText);t(e)},n.onerror=function(e){i(e)},n.open("GET",e._url,!0),n.send()):l.XMLHttpRequest&&((n=new XMLHttpRequest).onreadystatechange=function(e){if(4===n.readyState)if(200===n.status){var r=JSON.parse(n.responseText);t(r)}else i(new Error("HTTP Status "+n.status))},n.open("GET",e._url,!0),n.send())})}},{key:"_loadJSONP",value:function(){var e=this,t=!1,i=!1,n="pesdk"+Math.round(99999999999999*Math.random());return new o.a(function(r,o){var a=e._createJSONPNode(n);l[n]=function(n){e._removeJSONPNode(a),t||(i=!0,r(n))},l.setTimeout(function(){i||(e._removeJSONPNode(a),t=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(e){var t=this._buildJSONPUrl(e),i=document.querySelector("head"),n=document.createElement("script");return n.src=t,i.appendChild(n),n}},{key:"_removeJSONPNode",value:function(e){e.parentNode.removeChild(e)}},{key:"_buildJSONPUrl",value:function(e){var t=this._parsedUrl.query,i=null;for(var n in t)if("?"===t[n]){i=n;break}return delete this._parsedUrl.search,t[i]=e,s.a.format(this._parsedUrl)}}]),e}();t.a=c},function(e,t,i){"use strict";var n=i(107),r=i.n(n),o=i(108),a=i.n(o),s=i(11),u=i.n(s),l=i(20),c=i.n(l),f=i(235),h=i.n(f),p=i(236),_=i.n(p),d=function(){return function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,u=a()(e);!(n=(s=u.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.a={load:function(e){var t,i=this;return("data:"===e.substr(0,5)||"undefined"!=typeof WEBPACK?u.a.resolve([e,e]):e.match(/^(https?|ftp|file):\/\//)?function(e){return new u.a(function(t,i){_.a.get(e,{encoding:null},function(n,r,o){return n?i(n):200!==r.statusCode?i(new Error("Server responded with status code "+r.statusCode)):void t([e,r.body])})})}(e):(t=e,new u.a(function(e,i){try{h.a.readFile(t,function(n,r){n?i(n):e([t,r])})}catch(e){i(e)}}))).then(function(e){var t=d(e,2),n=t[0],r=t[1];return i._createAndLoadImage(n,r)})},_createAndLoadImage:function(e,t){if("undefined"!=typeof WEBPACK)return new u.a(function(e,i){var n=new window.Image;n.addEventListener("load",function(){e(n)}),n.addEventListener("error",function(){i(new Error("Failed to load image at "+t))}),n.crossOrigin="Anonymous",n.src=t});var i=new c.a.Image;return i.src=t,i.filePath=e,u.a.resolve(i)},loadXHR:function(e,t){return new u.a(function(i,n){var r=void 0;window.XDomainRequest?(r=new window.XDomainRequest,t&&r.overrideMimeType(t),r.onload=function(){i(r)},r.onerror=function(e){n(e)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,t&&r.overrideMimeType(t),r.onreadystatechange=function(e){4===r.readyState&&(200===r.status?i(r):n(new Error("HTTP Status "+r.status)))}),r.open("GET",e,!0),r.send()})}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t){e.exports=!0},function(e,t,i){var n=i(18).f,r=i(27),o=i(12)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,i){i(160);for(var n=i(14),r=i(25),o=i(32),a=i(12)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=n[l],f=c&&c.prototype;f&&!f[a]&&r(f,a,l),o[l]=o.Array}},function(e,t,i){"use strict";var n=i(181),r=i(198),o=i(82),a=i(86),s=i(85),u=i(117),l=i(44),c=i(118),f=i(206),h=i(58),p=i(57),_=i(207),d=i(209),y=i(84),v=i(45),g=i(213),m=i(115),b={WebGLRenderer:r.a,CanvasRenderer:n.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:u.a,BaseTexture:l.a,Texture:c.a,RenderTexture:f.a,WebGLRenderTarget:h.a,CanvasRenderTarget:p.a,Sprite:_.a,Shaders:d.a,Shader:y.a,Filter:v.a,Filters:g,PixelArrayImage:m.a,autoDetectRenderer:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.isSupported()?new r.a(e,t,i):new n.a(e,t,i)}};t.a=b},function(e,t,i){e.exports={default:i(190),__esModule:!0}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=i(44),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t,i,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=t,this._height=i,this._pixelRatio=n,this._baseTexture=new a.a,this._canvas=r||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return s(e,[{key:"_createCanvas",value:function(){return o.i.createCanvas()}},{key:"clear",value:function(){var e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getDimensions",value:function(){return new o.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=i(44),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t,i,n,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._gl=t.getContext(),this._width=i,this._height=n,this._frame=null,this._pixelRatio=r,this._projectionMatrix=new o.g,this._mipMapping=!1,this._baseTexture=new a.a;var u=this._baseTexture.getFrame();u.width=i,u.height=n,this._baseTexture.setPixelRatio(r),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return s(e,[{key:"resizeTo",value:function(e){this._width=0|e.x,this._height=0|e.y,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var e=a.a.DefaultMinFilter;return this._mipMapping&&(e=a.a.TrilinearFilter),e}},{key:"_getMagFilter",value:function(){return a.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var e=this._gl;e.bindTexture(e.TEXTURE_2D,this._texture);var t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null);var n=new o.k(this._width,this._height);o.i.isPowerOfTwo(n)?(o.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.b.TRANSPARENT,t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),o.e.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var e=this._projectionMatrix;e.reset();var t=this._frame||new o.h(0,0,this._width,this._height),i=t.x,n=t.y;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-i*e.a,e.ty=1-n*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-i*e.a,e.ty=-1-n*e.d)}},{key:"_initFrameBuffer",value:function(){var e=this._gl;this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new o.k(this._width,this._height)),o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var e=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),e.deleteTexture(this._texture),e.deleteFramebuffer(this._framebuffer)}}]),e}();t.a=u},function(e,t,i){"use strict";
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e.exports={stackBlurCanvasRGBA:function(e,t,i,a,s,u){if(!(isNaN(u)||u<1)){u|=0;var l,c,f,h,p,_,d,y,v,g,m,b,k,w,x,T,C,E,O,R,S,F,M,D,B,I=e.data,A=u+u+1,L=a-1,N=s-1,P=u+1,z=P*(P+1)/2,U=new o,j=U;for(f=1;f<A;f++)j=j.next=new o,f==P&&(B=j);j.next=U;var G=null,V=null;d=_=0;var W=n[u],H=r[u];for(c=0;c<s;c++){for(T=C=E=O=y=v=g=m=0,b=P*(R=I[_]),k=P*(S=I[_+1]),w=P*(F=I[_+2]),x=P*(M=I[_+3]),y+=z*R,v+=z*S,g+=z*F,m+=z*M,j=U,f=0;f<P;f++)j.r=R,j.g=S,j.b=F,j.a=M,j=j.next;for(f=1;f<P;f++)h=_+((L<f?L:f)<<2),y+=(j.r=R=I[h])*(D=P-f),v+=(j.g=S=I[h+1])*D,g+=(j.b=F=I[h+2])*D,m+=(j.a=M=I[h+3])*D,T+=R,C+=S,E+=F,O+=M,j=j.next;for(G=U,V=B,l=0;l<a;l++)I[_+3]=M=m*W>>H,0!==M?(M=255/M,I[_]=(y*W>>H)*M,I[_+1]=(v*W>>H)*M,I[_+2]=(g*W>>H)*M):I[_]=I[_+1]=I[_+2]=0,y-=b,v-=k,g-=w,m-=x,b-=G.r,k-=G.g,w-=G.b,x-=G.a,h=d+((h=l+u+1)<L?h:L)<<2,y+=T+=G.r=I[h],v+=C+=G.g=I[h+1],g+=E+=G.b=I[h+2],m+=O+=G.a=I[h+3],G=G.next,b+=R=V.r,k+=S=V.g,w+=F=V.b,x+=M=V.a,T-=R,C-=S,E-=F,O-=M,V=V.next,_+=4;d+=a}for(l=0;l<a;l++){for(C=E=O=T=v=g=m=y=0,b=P*(R=I[_=l<<2]),k=P*(S=I[_+1]),w=P*(F=I[_+2]),x=P*(M=I[_+3]),y+=z*R,v+=z*S,g+=z*F,m+=z*M,j=U,f=0;f<P;f++)j.r=R,j.g=S,j.b=F,j.a=M,j=j.next;for(p=a,f=1;f<=u;f++)_=p+l<<2,y+=(j.r=R=I[_])*(D=P-f),v+=(j.g=S=I[_+1])*D,g+=(j.b=F=I[_+2])*D,m+=(j.a=M=I[_+3])*D,T+=R,C+=S,E+=F,O+=M,j=j.next,f<N&&(p+=a);for(_=l,G=U,V=B,c=0;c<s;c++)I[3+(h=_<<2)]=M=m*W>>H,M>0?(M=255/M,I[h]=(y*W>>H)*M,I[h+1]=(v*W>>H)*M,I[h+2]=(g*W>>H)*M):I[h]=I[h+1]=I[h+2]=0,y-=b,v-=k,g-=w,m-=x,b-=G.r,k-=G.g,w-=G.b,x-=G.a,h=l+((h=c+P)<N?h:N)*a<<2,y+=T+=G.r=I[h],v+=C+=G.g=I[h+1],g+=E+=G.b=I[h+2],m+=O+=G.a=I[h+3],G=G.next,b+=R=V.r,k+=S=V.g,w+=F=V.b,x+=M=V.a,T-=R,C-=S,E-=F,O-=M,V=V.next,_+=a}}}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var d=p.Math.Vector2,y=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,i));return n._operation=e,n._dirtiness={},n.id=p.Utils.getUUID(),n._renderTextures={},n._identitySprite=new p.Engine.Sprite,n._sprite=new p.Engine.Sprite,n._dummyImage={addEventListener:function(){},removeEventListener:function(){}},n._hitTestSprite=new p.Engine.Sprite,n._renderers=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Configurable"]),_(t,[{key:"applyScale",value:function(e){}},{key:"applyRotation",value:function(e){var t=this._operation.getInputDimensions(),i=180*this.getRotation()/Math.PI;i+=e,this.setRotation(i*Math.PI/180);var n=(e+360)%360*Math.PI/180,r=Math.cos(n),o=Math.sin(n),a=this._options.position.clone().subtract(.5).multiply(t),s=new d(a.x*r-a.y*o,a.x*o+a.y*r).divide(t.clone().flip());this.setPosition(new d(.5,.5).add(s))}},{key:"applyFlip",value:function(e){var t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y}this.setPosition(t)}},{key:"applyTransform",value:function(e){var t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(e){if(this._renderTexture)this._renderTexture.clear();else{var t=this._getTexture();this._renderTextureContainer=new p.Engine.Container,this._renderTextureSprite=new p.Engine.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(p.RendererType.WEBGL)}},{key:"_optionEquals",value:function(e,i){return"type"===e||function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,i)}},{key:"update",value:function(e,t){this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t)}},{key:"_updateSprite",value:function(e){var t=this;[this._sprite,this._hitTestSprite].forEach(function(i){if(i.getTexture()){i.setAnchor(t._options.anchor),i.setPosition(t._options.position.clone().multiply(e)),void 0!==t._options.alpha&&i.setAlpha(t._options.alpha);var n=t._options.dimensions;n&&(n=n.clone().multiply(t._operation.getSDK().getTextureScale()),i.setWidth(n.x),i.setHeight(n.y)),i.updateTransform();var r=i.getTexture().getFrame(),o=new d(r.width,r.height);i.setPivot(t._options.pivot.clone().multiply(o)),i.setRotation(t._options.rotation),i.updateTransform()}})}},{key:"_renderToRenderTexture",value:function(e){var t=this._getTexture().getDimensions(),i=this._getRenderTexture(e.getRenderer(),t),n=t.clone();if(this._options.smoothDownscaling&&(n.x=p.Utils.nextHighestPOT(n.x),n.y=p.Utils.nextHighestPOT(n.y)),this._renderTexture.resizeTo(n),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var r=n.clone().subtract(t.x,t.y).divide(n),o=i.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-r.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-r.y}this._sprite.setTexture(i)}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}},{key:"_getRenderTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d(100,100);return this._renderTextures[e.id]||(this._renderTextures[e.id]=new p.Engine.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}},{key:"dispose",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose()}}]),t}();t.a=y},function(e,t,i){var n=i(21),r=i(14).document,o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,i){var n=i(21);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var n=i(50),r=i(35),o=i(26),a=i(62),s=i(27),u=i(92),l=Object.getOwnPropertyDescriptor;t.f=i(22)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return r(!n.f.call(e,t),e[t])}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var n=i(16),r=i(149),o=i(70),a=i(68)("IE_PROTO"),s=function(){},u=function(){var e,t=i(61)("iframe"),n=o.length;for(t.style.display="none",i(95).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var i;return null!==e?(s.prototype=n(e),i=new s,s.prototype=null,i[a]=e):i=u(),void 0===t?i:r(i,t)}},function(e,t,i){var n=i(67),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(69)("keys"),r=i(51);e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t,i){var n=i(14),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(15),r=i(9),o=i(31);e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*o(function(){i(1)}),"Object",a)}},function(e,t,i){t.f=i(12)},function(e,t,i){var n=i(14),r=i(9),o=i(52),a=i(72),s=i(18).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(36),r=i(12)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?i:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,i){var n=i(75),r=i(12)("iterator"),o=i(32);e.exports=i(9).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[n(e)]}},function(e,t,i){var n,r,o,a=i(30),s=i(175),u=i(95),l=i(61),c=i(14),f=c.process,h=c.setImmediate,p=c.clearImmediate,_=c.MessageChannel,d=c.Dispatch,y=0,v={},g=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},m=function(e){g.call(e.data)};h&&p||(h=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},n(y),y},p=function(e){delete v[e]},"process"==i(36)(f)?n=function(e){f.nextTick(a(g,e,1))}:d&&d.now?n=function(e){d.now(a(g,e,1))}:_?(o=(r=new _).port2,r.port1.onmessage=m,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,i){"use strict";var n=i(49);e.exports.f=function(e){return new function(e){var t,i;this.promise=new e(function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n}),this.resolve=n(t),this.reject=n(i)}(e)}},function(e,t,i){e.exports={default:i(182),__esModule:!0}},function(e,t,i){e.exports={default:i(187),__esModule:!0}},function(e,t){(function(){var t,i,n;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-n)/1e6},i=process.hrtime,n=(t=function(){var e;return 1e9*(e=i())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=i(57),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight())}return s(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(function(t){return t.resizeTo(e)})}},{key:"pushFilters",value:function(e,t){var i=e.getBounds();this._currentFrame=i;var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),this._filterStack.push({renderTarget:n,filters:t}),n.clear()}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,i=e.renderTarget,n=this._filterStack[this._filterStack.length-1].renderTarget;return 1===t.length?(t[0].apply(this._renderer,i,n),this._textures.push(i)):this._applyFilters(t,i,n),t}},{key:"_applyFilters",value:function(e,t,i){var n=this,r=t,o=this._getOrCreateRenderTarget(!0),a=e[e.length-1];e.forEach(function(e,t){if(e===a)e.apply(n._renderer,r,i);else{e.apply(n._renderer,r,o);var s=r;r=o,o=s}}),this._textures.push(r),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._textures.pop();return t||(t=new a.a(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"dispose",value:function(){}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(8),c=i(84);var f=l.c.UniformType,h=function(e){function t(e,i,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=i||t.defaultVertexSource,n=n||t.defaultFragmentSource,function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).call(this,e,i,n,t.defaultUniforms,t.defaultAttributes))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c["a"]),t}();h.defaultVertexSource=i(202),h.defaultFragmentSource=i(203);var p=new l.g;h.defaultUniforms={u_image:{type:f.SAMPLER2D,value:0},u_projMatrix:{type:f.MAT3,value:p.toArray()}},h.defaultAttributes=["a_position","a_texCoord","a_color"],t.a=h},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(56),a=i.n(o),s=i(8),u=i(28),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var c=s.f,f=s.i,h=function(){function e(t,i,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._vertexSource=i,this._fragmentSource=n,this._uniforms=r||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return l(e,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(e,t){var i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,!1,s.j,0),i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,!1,s.j,8),i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,!0,s.j,16)}},{key:"syncUniforms",value:function(){var e=this;a()(this._uniforms).forEach(function(t){e.syncUniform(t)})}},{key:"syncUniform",value:function(e){var t=this._renderer.getContext(),i=this._uniforms[e],n=this._uniformLocations[e];switch(i.type){case u.UniformType.SAMPLER2D:t.uniform1i(n,i.value);break;case u.UniformType.INT:case u.UniformType.INT1:t.uniform1i(n,i.value);break;case u.UniformType.FLOAT:case u.UniformType.FLOAT1:t.uniform1f(n,i.value);break;case u.UniformType.FLOAT2:t.uniform2f(n,i.value[0],i.value[1]);break;case u.UniformType.FLOAT3:t.uniform3f(n,i.value[0],i.value[1],i.value[2]);break;case u.UniformType.FLOAT4:t.uniform4f(n,i.value[0],i.value[1],i.value[2],i.value[3]);break;case u.UniformType.FLOAT_VECTOR2:t.uniform2fv(n,i.value);break;case u.UniformType.MAT3:case u.UniformType.MAT3FV:t.uniformMatrix3fv(n,!1,i.value);break;case u.UniformType.MAT4:t.uniformMatrix4fv(n,!1,i.value);break;default:c.warn(this.constructor.name,"Unknown uniform type: "+i.type)}}},{key:"_cacheAttributeLocations",value:function(){var e=this,t=this._renderer.getContext();this._attributes.forEach(function(i){e._attributeLocations[i]=t.getAttribLocation(e._program,i)})}},{key:"_cacheUniformLocations",value:function(){var e=this,t=this._renderer.getContext();a()(this._uniforms).forEach(function(i){e._uniformLocations[i]=t.getUniformLocation(e._program,i)})}},{key:"_addPrecisionToSource",value:function(e){var t=this._renderer.getMaxFloatPrecision(),i="mediump";return f.isMobile()&&"highp"===t&&(i="highp"),"precision "+i+" float;\n"+e}},{key:"_compile",value:function(){var e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;var i=this._addPrecisionToSource(this._fragmentSource),n=this._compileShader(e.FRAGMENT_SHADER,i);this._fragmentShader=n;var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){var o=e.getProgramInfoLog(r);e.isContextLost()&&(o="WebGL context lost"),e.deleteProgram(r),c.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=r}},{key:"_compileShader",value:function(e,t){var i=this._renderer.getContext(),n=i.createShader(e);if(i.shaderSource(n,t),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS)){var r=i.getShaderInfoLog(n);i.isContextLost()&&(r="WebGL context lost"),i.deleteShader(n),c.error(this.constructor.name,"WebGL shader compilation error: "+r)}return n}},{key:"setUniform",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t,i&&this.syncUniform(e)}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in e)this._uniforms[i].value=e[i],t&&this.syncUniform(i)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),e}();t.a=h},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._position=new o.k(0,0),this._scale=new o.k(1,1),this._pivot=new o.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new o.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new o.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new o.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new o.h(0,0,0,0)}return a(e,[{key:"renderWebGL",value:function(e){o.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(e){o.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var e=this._parent?this._parent.getWorldTransform():o.g.IDENTITY,t=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),t.a=this._cosRotation*this._scale.x,t.b=this._sinRotation*this._scale.x,t.c=-this._sinRotation*this._scale.y,t.d=this._cosRotation*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.tx|=0,t.ty|=0,t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(e){this._shaders.push(e)}},{key:"removeShader",value:function(e){var t=this._shaders.indexOf(e);return-1!==t&&(this._shaders.splice(t,1),!0)}},{key:"removeShaderAt",value:function(e){return!!this._shaders[e]&&(this._shaders.splice(e,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(e,t){e instanceof o.k?this._position.copy(e):this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(e,t){e instanceof o.k?this._scale.copy(e):this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(e,t){e instanceof o.k?this._pivot.copy(e):this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(e){this._alpha=e}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){this._parent=e}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(e){this._filterRectangle.copy(e)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(e){this._tint=e}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=i(58),s=i(204),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=o.c.RendererType,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return u(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(function(t){return t.resizeTo(e)})}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._renderTargets.pop();return t||(t=new a.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),t.setFrame(this._currentFrame),e&&t.clear(),t}},{key:"pushFilters",value:function(e,t){var i=e.getBounds();this._currentFrame=i;var n=e.getFilterRectangle();n.width>0&&n.height>0&&(this._currentFrame=n);var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),r.clear(),this._filterStack.push({renderTarget:r,filters:t})}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,i=e.renderTarget,n=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,i.getFrame());var r=t[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var u=r.getAttributeLocations();return s.vertexAttribPointer(u.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(u.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(u.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(i.getBaseTexture(),!1),1===t.length?(t[0].apply(this._renderer,i,n),this._renderTargets.push(i)):this._applyFilters(t,i,n),t}},{key:"_applyFilters",value:function(e,t,i){var n=this,r=t,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=e[e.length-1];e.forEach(function(e,t){if(e===a)e.apply(n._renderer,r,i);else{e.apply(n._renderer,r,o);var s=r;r=o,o=s}}),this._renderTargets.push(r),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(l.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new s.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(e){e.dispose()})}}]),e}();t.a=c},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(41),a=i(88),s=i(19),u=i(89),l=i(230),c=i(231),f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
var h=s.a.invariant,p=u.a.MARKERS,_=new RegExp("^data:image/jpeg;base64,","i"),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new a.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new c.a(this._getMarkerBuffer(p.EXIF)),this._jfifData=new l.a(this._getMarkerBuffer(p.JFIF))}return f(e,[{key:"restoreSegments",value:function(t){var i=e.fromDataURL(t);return i=this.restoreExifTagsToImageData(i),i=this.restoreJfifSegmentToImageData(i),e.toDataURL(i)}},{key:"restoreExifTagsToImageData",value:function(e){if(!this._exifData.isValid())return e;var t=this._sliceIntoSegments(e)[1][0],i=e.slice(0,t),n=e.slice(t),r=i.concat(this._exifData.getBuffer());return r=r.concat(n)}},{key:"restoreJfifSegmentToImageData",value:function(e){if(!this._jfifData.isValid())return e;var t=this._sliceIntoSegments(e),i=this._findSegment(p.JFIF,t);h(i,"JFIF Data Error: Segment not found");var n=i[0],r=i[1],o=e.slice(0,n),a=e.slice(n,r),s=e.slice(r),u=new l.a(a);u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity());var c=o.concat(a);return c=c.concat(s)}},{key:"restoreExifTags",value:function(t){var i=e.fromDataURL(t),n=this.restoreExifTagsToImageData(i);return e.toDataURL(n)}},{key:"restoreJfifSegment",value:function(t){if(!this._jfifData.isValid())return t;var i=e.fromDataURL(t),n=this.restoreJfifSegmentToImageData(i);return e.toDataURL(n)}},{key:"setOrientation",value:function(e){return this._exifData.setOrientation(e)}},{key:"_findSegment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,i=0;i<t.length;i++){var n=t[i][0],r=t[i][1];if(this._stream.setHead(n),this._stream.peekInt16()===e)return[n,r]}return!1}},{key:"_getMarkerBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,i=this._findSegment(e,t);if(i){var n=i[0],r=i[1];return this._buf.slice(n,r)}return!1}},{key:"_sliceIntoSegments",value:function(e){for(var t=new a.a(e),i=[];t.getHead()<e.length;){var n=t.readInt16();if(n!==p.SOI){if(n===p.SOS)break;if(!(n>=65280&&n<=65535))throw new Error("Invalid marker: 0x"+n.toString(16));var r=t.readInt16(),o=t.getHead()+r-2;i.push([t.getHead()-4,o]),t.setHead(o)}}return this._stream.setHead(0),i}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(e){return"data:image/jpeg;base64,"+o.a.encode(e)}},{key:"fromDataURL",value:function(e){var t=e.replace("data:image/jpeg;base64,","");return o.a.decode(t)}},{key:"isJPEG",value:function(e){return _.test(e)}},{key:"bufferIsJPEG",value:function(e){return"JFIF"===e.slice(6,10).toString()}},{key:"fromBase64String",value:function(t){var i=t.replace("data:image/jpeg;base64,","");return new e(o.a.decode(i))}}]),e}();t.a=d},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=0,this._buf=t}return o(e,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],i=this._buf[this._head+1];return e?(i<<8)+t:(t<<8)+i}},{key:"peekInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],i=this._buf[this._head+1],n=this._buf[this._head+2];return e?(n<<16)+(i<<8)+t:(t<<16)+(i<<8)+n}},{key:"peekInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],i=this._buf[this._head+1],n=this._buf[this._head+2],r=this._buf[this._head+3];return e?(r<<32)+(n<<16)+(i<<8)+t:(t<<32)+(i<<16)+(n<<8)+r}},{key:"writeInt8",value:function(e){this._buf[this._head]=255&e}},{key:"writeInt16",value:function(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=255&e}},{key:"readInt8",value:function(){var e=this.peekInt8();return this._head+=1,e}},{key:"readInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt16(e);return this._head+=2,t}},{key:"readInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt24(e);return this._head+=3,t}},{key:"readInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt32(e);return this._head+=4,t}},{key:"readString",value:function(e){for(var t="",i=0;i<e;i++){var n=this.readInt8();t+=String.fromCharCode(n)}return t}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(e){this._head=e}}]),e}();t.a=a},function(e,t,i){"use strict";t.a={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=i(132),s=i(47),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._categoriesById={},this._categories=[],this._stickersById={},this._addCategories(a.a.DEFAULTS.STICKER_CATEGORIES);var n=this._options,r=n.categories,o=n.replaceCategories;this._options.categories?this._addCategories(r,o):(this._updateCategoriesMap(),this._updateAllCategory())}return u(e,[{key:"loadExternal",value:function(e){var t=this;return new s.a(e).load().then(function(e){t._addCategories(e.categories,t._options.replaceCategories)})}},{key:"_addCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=t?e.slice(0):o.m.mergeCategories(this._categories,e,"stickers"),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_updateCategoriesMap",value:function(){var e=this;this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.identifier]=t}),this._categories.forEach(function(t){t.stickers.forEach(function(t){e._stickersById[t.identifier]=t})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(t){t.stickers=t.stickers.filter(function(t){return-1!==e._options.availableStickers.indexOf(t.identifier)})}),this._categories=this._categories.filter(function(e){return e.stickers.length>0})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(e){return e.stickers}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"getStickersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown sticker category '"+e+"'");return this._categoriesById[e].stickers}},{key:"getStickerByIdentifier",value:function(e){return this._stickersById[e]}},{key:"getCategories",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}],[{key:"getURLForSticker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",i=e.images,n="base"===t&&i.mediaBase||i.mediaThumb,r=n.uris||[n.uri];if(void 0===o.m.Browser||o.m.Browser.getIEVersion()){var a=r.filter(function(e){return!/\.svg$/i.test(e)});return a.length?a[0]:r[0]}var s=r.filter(function(e){return/\.svg$/i.test(e)});return s.length?s[0]:r[0]}}]),e}();t.a=l},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(11),c=i.n(l),f=i(10),h=i(347),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=i,this._loadedFonts=[]}return _(e,[{key:"setFonts",value:function(e){this._fonts=e}},{key:"needsToLoad",value:function(){for(var e=this,t=function(t){var i=void 0;return e._fonts[t].getVariations().forEach(function(e){i=i||e.getProvider()}),i?{v:!0}:"continue"},i=0;i<this._fonts.length;i++){var n=t(i);switch(n){case"continue":continue;default:if("object"===(void 0===n?"undefined":p(n)))return n.v}}}},{key:"fontLoaded",value:function(e){var t=e.getFontFamily();return-1!==this._loadedFonts.indexOf(t)}},{key:"setFontLoaded",value:function(e){if(!this.fontLoaded(e)){var t=e.getFontFamily();this._loadedFonts.push(t)}}},{key:"load",value:function(){var e=this,t=this._fonts,i={file:new h.a(this._ui)},n=function(){for(var e in i){i[e].dispose()}};t.filter(function(t){return!e.fontLoaded(t)}).forEach(function(e){e.getVariations().forEach(function(e){var t=e.getProvider();if(t){var n=i[t];if(!n)return f.g.warn("No font loader for provider `"+t+"` found.");n.add(e)}})});var r=[];for(var o in i)r.push(i[o].load());return c.a.all(r).then(function(){n(),t.forEach(function(t){e.setFontLoaded(t)})}).catch(function(e){throw n(),e})}}]),e}();t.a=d},function(e,t,i){e.exports=!i(22)&&!i(31)(function(){return 7!=Object.defineProperty(i(61)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(27),r=i(26),o=i(150)(!1),a=i(68)("IE_PROTO");e.exports=function(e,t){var i,s=r(e),u=0,l=[];for(i in s)i!=a&&n(s,i)&&l.push(i);for(;t.length>u;)n(s,i=t[u++])&&(~o(l,i)||l.push(i));return l}},function(e,t,i){var n=i(14).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(27),r=i(38),o=i(68)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,i){"use strict";var n=i(52),r=i(15),o=i(98),a=i(25),s=i(27),u=i(32),l=i(159),c=i(53),f=i(96),h=i(12)("iterator"),p=!([].keys&&"next"in[].keys()),_=function(){return this};e.exports=function(e,t,i,d,y,v,g){l(i,t,d);var m,b,k,w=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},x=t+" Iterator",T="values"==y,C=!1,E=e.prototype,O=E[h]||E["@@iterator"]||y&&E[y],R=!p&&O||w(y),S=y?T?w("entries"):R:void 0,F="Array"==t&&E.entries||O;if(F&&(k=f(F.call(new e)))!==Object.prototype&&k.next&&(c(k,x,!0),n||s(k,h)||a(k,h,_)),T&&O&&"values"!==O.name&&(C=!0,R=function(){return O.call(this)}),n&&!g||!p&&!C&&E[h]||a(E,h,R),u[t]=R,u[x]=_,y)if(m={values:T?R:w("values"),keys:v?R:w("keys"),entries:S},g)for(b in m)b in E||o(E,b,m[b]);else r(r.P+r.F*(p||C),t,m);return m}},function(e,t,i){e.exports=i(25)},function(e,t,i){var n=i(94),r=i(70).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t){},function(e,t,i){var n=i(16);e.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,i){var n=i(32),r=i(12)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[r]===e)}},function(e,t,i){var n=i(16),r=i(49),o=i(12)("species");e.exports=function(e,t){var i,a=n(e).constructor;return void 0===a||void 0==(i=n(a)[o])?t:r(i)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,i){var n=i(16),r=i(21),o=i(78);e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}},function(e,t,i){var n=i(12)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:i=!0}},o[n]=function(){return a},e(o)}catch(e){}return i}},function(e,t,i){e.exports={default:i(193),__esModule:!0}},function(e,t,i){e.exports={default:i(195),__esModule:!0}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(34),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return a(e,[{key:"multiply",value:function(e){var t,i,n,r,o,a;return t=this.a*e.a+this.b*e.c,i=this.a*e.b+this.b*e.d,n=this.c*e.a+this.d*e.c,r=this.c*e.b+this.d*e.d,o=this.tx*e.a+this.ty*e.c+e.tx,a=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=i,this.c=n,this.d=r,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(e){var t=e,i=t.x,n=t.y;return(e=e.clone()).x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.tx,e}},{key:"applyInverseToVector",value:function(e){var t=1/(this.a*this.d+this.c*-this.b),i=e,n=i.x,r=i.y;return(e=e.clone()).x=this.d*t*n+-this.c*t*r+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*r+-this.b*t*n+(-this.ty*this.a+this.tx*this.b)*t,e}},{key:"rectangleToCoordinates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(0,0),i=e.width*(1-t.x),n=e.width*-t.x,r=e.height*(1-t.y),a=e.height*-t.y,s=[];return s.push(new o.a(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new o.a(this.a*i+this.c*a+this.tx,this.d*a+this.b*i+this.ty)),s.push(new o.a(this.a*i+this.c*r+this.tx,this.d*r+this.b*i+this.ty)),s.push(new o.a(this.a*n+this.c*r+this.tx,this.d*r+this.b*n+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?e:new Float32Array(e)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(34),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i,this.width=n,this.height=r}return a(e,[{key:"set",value:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"equals",value:function(t,i,n,r){return t instanceof e?t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height:t===this.x&&i===this.y&&n===this.width&&r===this.height}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new o.a(this.x,this.y)}},{key:"getSize",value:function(){return new o.a(this.width,this.height)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(17);function a(e,t,i){return t in e?r()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={checkFramebufferStatus:function(e,t){var i,n=t.checkFramebufferStatus(t.FRAMEBUFFER),r=(a(i={},t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),a(i,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),a(i,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),a(i,t.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),i);n!==t.FRAMEBUFFER_COMPLETE&&o.a.warn(e,"Framebuffer incomplete: "+r[n])}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(81),u=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._tracking=!1;var n=this,r=function(e){"function"==typeof t[e]?i[e]=function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=t[e];if(!n._tracking)return a.apply(t,r);var u=s(),l=a.apply(t,r),c=s()-u,f={functionName:e,arguments:r,duration:c};return n._trackedCalls.push(f),l}:i._makePropertyWrapper(e)};for(var o in t)r(o)}return a(e,[{key:"_makePropertyWrapper",value:function(e){if(-1===["_context","_trackedCalls","_tracking"].indexOf(e)){var t=this._context;this.__defineGetter__(e,function(){return t[e]}),this.__defineSetter__(e,function(i){t[e]=i})}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var e="Rendering";o.f.log(e,"Frame rendering results:"),o.f.log(e,"Context calls: "+this._trackedCalls.length);var t={};this._trackedCalls.forEach(function(e){var i=e.functionName,n=e.duration;t[i]=t[i]||{totalDuration:0,calls:0},t[i].totalDuration+=n,t[i].calls++});var i=[];for(var n in t){var r=t[n];r.averageDuration=r.totalDuration/r.calls,i.push({functionName:n,data:r})}i.sort(function(e,t){return t.data.totalDuration-e.data.totalDuration}),(i=i.slice(0,3)).forEach(function(t){o.f.log(e,t.functionName+": "+t.data.calls+" calls, "+t.data.totalDuration.toFixed(2)+"ms")})}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(197),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return r._options=h.a.defaults(n,{pixelRatio:1,transparent:!1,clearColor:f.b.BLACK,debug:!1}),r.setMaxListeners(0),r._width=e||800,r._height=i||600,r._dimensions=new f.k(r._width,r._height),r._maxTextureSize=null,r._pixelRatio=r._options.pixelRatio,r._clearColor=r._options.transparent?f.b.TRANSPARENT:r._options.clearColor||f.b.BLACK,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["d"]),p(t,[{key:"setCanvas",value:function(e){var t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new f.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=e.clone()}},{key:"_createContext",value:function(){f.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){f.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(e){f.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(e){this._filterManager=e}},{key:"isOfType",value:function(e){return this._type===e}},{key:"dispose",value:function(){f.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),t}();t.a=_},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return o(e,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),e}();t.a=a},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(20),a=(i.n(o),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var s=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=i,this.data=n}return a(e,null,[{key:"fromNodeCanvasImage",value:function(t){var i=new o.Canvas(t.width,t.height).getContext("2d");i.drawImage(t,0,0);var n=i.getImageData(0,0,t.width,t.height);return new e(t.width,t.height,n.data)}}]),e}();t.a=s},function(e,i){e.exports=t},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(8),_=i(85),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._children=[],o._filters=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),d(t,[{key:"addFilter",value:function(e){this._filters.push(e)}},{key:"removeFilter",value:function(e){var t=this._filters.indexOf(e);return-1!==t&&(this._filters.splice(t,1),!0)}},{key:"setFilters",value:function(e){this._filters=e}},{key:"addChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.push(e)}},{key:"prependChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}},{key:"hasChild",value:function(e){return-1!==this._children.indexOf(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!==t?(this._children.splice(t,1),e.setParent(null)):p.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(function(t){t.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(e){}},{key:"renderCanvas",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(function(t){t.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}}},{key:"_renderCanvas",value:function(e){}},{key:"updateTransform",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"updateTransform",this).call(this),this._children.forEach(function(e){e.updateTransform()})}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),t}();t.a=y},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(44),p=i(205),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));if(!(e instanceof h.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return n._uvs=new p.a,n._frame=i?i.clone():null,n._frameLocked=!!i,n._onBaseTextureLoaded=n._onBaseTextureLoaded.bind(n),n._onBaseTextureUpdated=n._onBaseTextureUpdated.bind(n),n._frame||(n._frame=new f.h(0,0,1,1)),n.setBaseTexture(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["d"]),_(t,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var e=this._baseTexture.getFrame(),t=e.width,i=e.height;this._frame.width=t,this._frame.height=i,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(e){if(this._baseTexture=e,this._baseTexture.isLoaded()){var t=e.getFrame(),i=t.width,n=t.height;this._frameLocked||(this._frame=new f.h(0,0,i,n)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new f.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(e){return new t(new h.a(e))}},{key:"fromCanvas",value:function(e){return new t(new h.a(e))}}]),t}();t.a=d},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(42),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,g=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,m=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set(t,i,n,r,o,a,s,u,l,c,f,h,p,_,d,y,v,g,m,b)}return a(e,[{key:"set",value:function(e,t,i,n,r,o,a,s,u,l,c,f,h,p,_,d,y,v,g,m){this.a=e,this.b=t,this.c=i,this.d=n,this.e=r,this.f=o,this.g=a,this.h=s,this.i=u,this.j=l,this.k=c,this.l=f,this.m=h,this.n=p,this.o=_,this.p=d,this.q=y,this.r=v,this.s=g,this.t=m}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(e){var t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,i=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,n=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,r=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new o.a(t,i,n,r)}},{key:"multiply",value:function(e){var t,i,n,r,o,a,s,u,l,c,f,h,p,_,d,y,v,g,m,b,k=e,w=this;return t=k.a*w.a+k.b*w.f+k.c*w.k+k.d*w.p,i=k.a*w.b+k.b*w.g+k.c*w.l+k.d*w.q,n=k.a*w.c+k.b*w.h+k.c*w.m+k.d*w.r,r=k.a*w.d+k.b*w.i+k.c*w.n+k.d*w.s,a=k.f*w.a+k.g*w.f+k.h*w.k+k.i*w.p,s=k.f*w.b+k.g*w.g+k.h*w.l+k.i*w.q,u=k.f*w.c+k.g*w.h+k.h*w.m+k.i*w.r,l=k.f*w.d+k.g*w.i+k.h*w.n+k.i*w.s,f=k.k*w.a+k.l*w.f+k.m*w.k+k.n*w.p,h=k.k*w.b+k.l*w.g+k.m*w.l+k.n*w.q,p=k.k*w.c+k.l*w.h+k.m*w.m+k.n*w.r,_=k.k*w.d+k.l*w.i+k.m*w.n+k.n*w.s,y=k.p*w.a+k.q*w.f+k.r*w.k+k.s*w.p,v=k.p*w.b+k.q*w.g+k.r*w.l+k.s*w.q,g=k.p*w.c+k.q*w.h+k.r*w.m+k.s*w.r,m=k.p*w.d+k.q*w.i+k.r*w.n+k.s*w.s,o=k.a*w.e+k.b*w.j+k.c*w.o+k.d*w.t+k.e,c=k.f*w.e+k.g*w.j+k.h*w.o+k.i*w.t+k.j,d=k.k*w.e+k.l*w.j+k.m*w.o+k.n*w.t+k.o,b=k.p*w.e+k.q*w.j+k.r*w.o+k.s*w.t+k.t,this.a=t,this.b=i,this.c=n,this.d=r,this.e=o,this.f=a,this.g=s,this.h=u,this.i=l,this.j=c,this.k=f,this.l=h,this.m=p,this.n=_,this.o=d,this.p=y,this.q=v,this.r=g,this.s=m,this.t=b,this}},{key:"clone",value:function(){var t=new e;return t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),t}},{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var e=this;return"abcdefghijklmnopqrst".split("").map(function(t){return e[t]})}}],[{key:"createBrightnessMatrix",value:function(t){var i=new e;return i.e=t,i.j=t,i.o=t,i}},{key:"createContrastMatrix",value:function(t){var i=new e,n=(1-t)/2;return i.a=i.g=i.m=t,i.e=i.j=i.o=n,i}},{key:"createSaturationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=new e,n=1-t,r=.213*n,o=.715*n,a=.072*n;return i.a=r+t,i.b=o,i.c=a,i.f=r,i.g=o+t,i.h=a,i.k=r,i.l=o,i.m=a+t,i}},{key:"createExposureMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Math.pow(2,t);return new e(i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new e;return n.a=n.g=n.m=t,n.e=n.j=n.o=i,n}},{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(34),r=i(227),o=i(110),a=i(109),s=i(119);i.d(t,"Vector2",function(){return n.a}),i.d(t,"Vector3",function(){return r.a}),i.d(t,"Rectangle",function(){return o.a}),i.d(t,"Matrix",function(){return a.a}),i.d(t,"ColorMatrix",function(){return s.a})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(228);i.d(t,"ExifOrientationOperation",function(){return n.a})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(28),h=i(29),p=i(17),_=i(55),d=i(46),y=i(123),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,i,{enabled:{type:f.OptionType.BOOLEAN,default:!0,serializable:!1}}));return n._sdk=e,n._cacheEnabled=!1,n._dirtiness={},n._sprite=new _.a.Sprite,n._container=new _.a.Container,n._container.addChild(n._sprite),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,d["a"]),v(t,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(e){var t=this;if(!this.getEnabled())return p.a.info(this.constructor.name,"Disabled - skipping"),h.a.resolve(e);if(!this._renderTexture){var i=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new _.a.RenderTexture(this._sdk.getRenderer(),i.width,i.height)}var n=this._sdk.getRenderer(),r=void 0,o=void 0;if(p.a.canLog("info")&&(o=new y.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(n)){this._sprite.setTexture(e);var a=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),r=this._render(e).then(function(){return t.setDirtyForRenderer(!1,n),t._renderTexture})}else p.a.info(this.constructor.name,"Rendering from cache"),r=h.a.resolve(this._renderTexture);return r.then(function(e){return o&&o.stop(),e})}},{key:"_render",value:function(e){return(this._sdk.getRenderer().isOfType(f.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(e)}},{key:"_renderWebGL",value:function(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(e){return e.clone()}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(e){var t=this._dirtiness[e.id];return void 0===t||t}},{key:"setDirtyForRenderer",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in this._dirtiness)this.setDirtyForRenderer(e,{id:i},t)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this._sdk.getInputDimensions();t&&i.multiply(this._sdk.getZoom()).floor();var n=void 0;return this._sdk.getOperationsStack().forEach(function(t){n||(t!==e?i=t.getNewDimensions(i):n=!0)}),i.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),t}();g.identifier=null,t.a=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(33),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(81),u=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tag=t,this._name=i,this._start=s()}return a(e,[{key:"stop",value:function(){var e=s()-this._start,t=Math.round(1e3/e);o.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+t+" FPS)")}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(33),h=i(29),p=i(43),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return i._onOperationUpdate=i._onOperationUpdate.bind(i),i._cacheEnabled=!0,i._stack=e,i._stack.forEach(function(e){e.on("update",i._onOperationUpdate)}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p["a"]),_(t,[{key:"clear",value:function(){var e=this;this.forEach(function(t){return e.remove(t)}),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter(function(e){return!!e}).some(function(e){return e.hasChanges()})}},{key:"_onOperationUpdate",value:function(e,t){this.emit(f.Constants.Events.OPERATION_UPDATED,e,t)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(e){return this._stack.filter(function(e){return!!e}).forEach(e)}},{key:"render",value:function(e,t){var i=this,n=t,r=this._stack.filter(function(e){return!!e}).filter(function(e){return e.getEnabled()});r.reverse();var o=r.filter(function(t){return!t.isDirtyForRenderer(e.getRenderer())})[0],a=r.indexOf(o);r.reverse();var s=0;-1!==a&&(s=r.length-a-1);for(var u=0;u<s;u++)f.Log.info(this.constructor.name,"Skipping "+r[u].constructor.name);for(var l=h.a.resolve(n),c=function(e){var t=r[e],n=void 0,o=void 0;l=l.then(function(e){return t.render(e).then(function(e){return n&&e!==n&&!i._cacheEnabled&&o.disposeRenderTextures(),n=e,o=t,e})})},p=s;p<r.length;p++)c(p);return l}},{key:"validateSettings",value:function(){return h.a.all(this._stack.filter(function(e){return!!e}).map(function(e){return e.validateSettings()}))}},{key:"setAllToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(t){return t.setDirty(!0,e)})}},{key:"updateDirtinessForRenderer",value:function(e){for(var t=!1,i=0;i<this._stack.length;i++){var n=this._stack[i];n&&(n.isDirtyForRenderer(e)&&(t=!0),t&&n.setDirtyForRenderer(!0,e))}}},{key:"push",value:function(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}},{key:"unshift",value:function(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new t(this._stack.slice(0))}},{key:"get",value:function(e){return this._stack[e]}},{key:"set",value:function(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}},{key:"remove",value:function(e){var t=this._stack.indexOf(e);-1!==t&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}},{key:"removeAt",value:function(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach(function(e){e.dispose()})}}]),t}();t.a=d},function(e,t){e.exports={name:"photoeditorsdk",version:"4.8.0",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (9elements GmbH) <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:ui":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/ui","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.min.*'  | sed 's/.min././' | xargs -n1 rm && npm run jsdoc:server",precommit:"true",prepush:"npm run lint"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.0","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chromedriver:"^2.37.0",chalk:"^2.4.1","circular-json-es6":"^2.0.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.3.0","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.10.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2",husky:"^0.14.3",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7",lodash:"^4.17.4",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.7.2","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.2.2","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.2.0","react-dom":"^16.2.0",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^1.2.5","vinyl-source-stream":"0.1.1",webpack:"^3.10.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"git://github.com/imgly/node-canvas.git#v2.0.0-alpha.9",gl:"^4.0.4",request:"^2.83.0"}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p=f.Math.ColorMatrix,_=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(239),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),h(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options,u=s.colorMatrix,l=s.gamma,c=s.shadows,h=s.highlights,p=1!==l,_=0!==c||0!==h,d=new f.Color(0,0,0,0),y=0;y<n.width*n.height;y++){var v=4*y;if(d.r=a.data[v]/255,d.g=a.data[v+1]/255,d.b=a.data[v+2]/255,p&&(d.r=Math.pow(d.r,1/Math.max(l,1e-7)),d.g=Math.pow(d.g,1/Math.max(l,1e-7)),d.b=Math.pow(d.b,1/Math.max(l,1e-7))),_){var g=.2125*d.r+.7154*d.g+.0721*d.b,m=c>=0?f.Utils.clamp(Math.pow(g,1/(c+1))+-.76*Math.pow(g,2/(c+1))-g,0,Math.max(c,1)):-f.Utils.clamp(Math.pow(g,1/(1-c))+-.76*Math.pow(g,2/(1-c))-g,0,Math.max(-c,1)),b=m*g*g,k=m-b,w=g+b+(h<0?f.Utils.clamp(1-Math.pow(1-g,1/(1-h))- -.8*Math.pow(1-g,2/(1-h))-g,-1,0):-f.Utils.clamp(1-Math.pow(1-g,1/(1+h))- -.8*Math.pow(1-g,2/(1+h))-g,-1,0));d.r=f.Utils.clamp(w*((d.r+k)/Math.max(g,1e-7)),0,1),d.g=f.Utils.clamp(w*((d.g+k)/Math.max(g,1e-7)),0,1),d.b=f.Utils.clamp(w*((d.b+k)/Math.max(g,1e-7)),0,1)}d=u.apply(d),a.data[v]=255*d.r,a.data[v+1]=255*d.g,a.data[v+2]=255*d.b}o.putImageData(a,0,0)}}]),t}();_.prototype.availableOptions={gamma:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT},shadows:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},highlights:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT},colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new p,uniformType:f.UniformType.MAT4},colorOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}},t.a=_},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(59)),d=i.n(_),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=p.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(243),a._lastBlurRadius=null,a._lastDimensions=new v(0,0),a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Engine"].Filter),y(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getDimensions(),r=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),i.setPixelRatio(t.getPixelRatio()),i.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),i.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),i=e.getContext(),n=new v(t.width,t.height),r=i.getImageData(0,0,t.width,t.height);d.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurredRenderTarget.dispose()}}]),t}();g.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},delta:{type:p.OptionType.VECTOR2,default:new v(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new v(100,100),uniformType:p.UniformType.FLOAT2}},t.a=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(5)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"render",value:function(e,t,i){return f.Promise.resolve(i)}},{key:"hasChanges",value:function(){return!1}}]),t}();_.isIdentity=!0,_.identifier="identity",t.a=_},function(e,t,i){"use strict";var n=i(7),r=i.n(n),o=i(0),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(13)),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var m=function(e){function t(){var e;y(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(263),a}return g(t,p["Engine"].Filter),d(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.lookupTableData,u=0;u<n.width*n.height;u++){var l=4*u,c=a.data[l];a.data[l]=s[4*c];var f=a.data[l+1];a.data[l+1]=s[1+4*f];var h=a.data[l+2];a.data[l+2]=s[2+4*h]}o.putImageData(a,0,0)}}]),t}();m.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:1,uniformType:p.UniformType.INT},lookupTableData:{type:p.OptionType.ARRAY,default:[]}};var b=function(e){function t(){var e;y(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._filter=new m({lookupTable:o._options.textureGLUnit}),o._textures={},o._renderers={},o}return g(t,_["a"]),d(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(e){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var t=new Uint8Array(this._options.data),i=e.getRenderer(),n=i.id;this._renderers[n]=i,this._textures[n]||(this._textures[n]=new p.Engine.BaseTexture);var r=this._textures[n],o=new p.Engine.PixelArrayImage(256,1,t);r.setSource(o),r.setGLUnit(this._options.textureGLUnit),i.isOfType(p.RendererType.WEBGL)&&i.updateTexture(r)}},{key:"dispose",value:function(){for(var e in function e(t,i,n){null===t&&(t=Function.prototype);var o=r()(t,i);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}}]),t}();t.a=b},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(320)),d=i(60),y=i(131),v=i(322),g=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),m=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var b=p.Math.Vector2,k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._persistedPaths=[],o._outputCanvasDirty=!0,o._outputCanvas=p.Utils.createCanvas(),o._outputContext=o._outputCanvas.getContext("2d"),o._persistCanvas=p.Utils.createCanvas(),o._persistContext=o._persistCanvas.getContext("2d"),o._nextCanvas=p.Utils.createCanvas(),o._texture=p.Engine.Texture.fromCanvas(o._outputCanvas),o._sprite.setTexture(o._texture),o._onPathUpdate=o._onPathUpdate.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d["a"]),g(t,[{key:"applyFlip",value:function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var i=t.getPosition().clone();switch(e){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y}t.setPosition(i)}),t.setDirty(!0)}),this._reset()}},{key:"applyRotation",value:function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var i=t.getPosition().clone();90===e?(i.flip(),i.x=1-i.x):-90===e&&(i.flip(),i.y=1-i.y),t.setPosition(i)}),t.setDirty(!0)}),this._reset()}},{key:"applyTransform",value:function(e){var t=null;this._options.paths.forEach(function(i){i.forEachControlPoint(function(t){t.setPosition(e.applyToRelativePoint(t.getPosition()))});var n=i.getBrush();n!==t&&(n.setSize(e.applyToRelativeSize(n.getSize())),t=n),i.setDirty(!0)}),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var e=this._outputCanvas,t=e.width,i=e.height;this._outputContext.clearRect(0,0,t,i)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var e=this._persistCanvas,t=e.width,i=e.height;this._persistContext.clearRect(0,0,t,i)}}},{key:"serializeOptions",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=m(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,i);return e||(n.type="brush"),n}},{key:"serializeOption",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map(function(e){return e.serializeOptions(void 0,i)}):m(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,i)}},{key:"createPath",value:function(e){var t=new _.a(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,i,n),e&&n&&(this._persistedPaths=[],this._options.paths.forEach(function(e){e.setDirty(!0)}))}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[i],t)}},{key:"render",value:function(e){var t=this,i=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(i)&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,e),p.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(function(i){i.render(e),i.getClosed()&&-1===t._persistedPaths.indexOf(i)&&t._onPathPersist(i)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(e){e.getClosed()||e.renderToCanvas(t._outputCanvas)}),this.setDirtyForRenderer(!1,i))}},{key:"update",value:function(e,i){i&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,i),p.Utils.ensureCanvasDimensions(this._persistCanvas,i),this._texture.getBaseTexture().update()),this.render(i);var n=e.getRenderer();n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(this._texture.getBaseTexture()),m(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,i)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._texture.getBaseTexture().dispose()}}]),t}();k.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new b(0,0)},scale:{type:p.OptionType.VECTOR2,default:new b(1,1)},anchor:{type:p.OptionType.VECTOR2,default:new b(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new b(0,0)},rotation:{type:p.OptionType.NUMBER,default:0},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){var t=this;return e=e.map(function(e){if(e instanceof _.a)return e;var i=e.brush,n=e.closed,r=new _.a(t._operation,{brush:i,closed:n},t._nextCanvas);return e.controlPoints.forEach(function(e){r.addControlPoint(e)}),r}),this._reset(),e}}},k.type="brush",k.Brush=y.a,k.Path=_.a,k.Brushes={RadialBrush:v.a},t.a=k},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p=f.Math.Vector2,_=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._lastOptions={},o._lastInputDimensions=new p(0,0),o._brush=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Configurable"]),h(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,i=t.image,n=t.size;i.width=i.height=Math.ceil(n*e.min());var r=f.Utils.createCanvas();r.width=i.width,r.height=i.height;var o=r.getContext("2d");o.drawImage(i,0,0,r.width,r.height);var a=this._tintImageData(o.getImageData(0,0,r.width,r.height),r.width,r.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=e.clone(),r}},{key:"_tintImageData",value:function(e){for(var t=this._options.color,i=0;i<e.data.length;i+=4)e.data[i]+=(255*t.r-e.data[i])*t.a,e.data[i+1]+=(255*t.g-e.data[i+1])*t.a,e.data[i+2]+=(255*t.b-e.data[i+2])*t.a;return e}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),t}();t.a=_,_.prototype.availableOptions={identifier:{type:f.OptionType.STRING},image:{type:f.OptionType.IMAGE},size:{type:f.OptionType.NUMBER,default:.05},color:{type:f.OptionType.COLOR,default:f.Color.RED}}},function(e,t,i){"use strict";t.a={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=i(337),s=i(17),u=i(338),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var c=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return l(e,[{key:"_initFonts",value:function(){var e=this,t=this._options,i=t.fonts,n=t.replaceFonts,r=t.availableVariations,l=o.c.DEFAULTS.FONTS,c=void 0;l=(l=n?i:l.concat(i||[])).map(function(t){var i=t.fontFamily,n=t.variations;if(r&&(n=n.filter(function(e){return-1!==r.indexOf(e.identifier)})),0===n.length)return null;var o=new a.a({fontFamily:i});return n=n.map(function(t){var n=new u.a(t);return n.setFontFamily(i),n.setFont(o),t.default&&!c&&(c=n),null==n.getTextMetrics()&&s.a.warn("Missing font metrics for "+n.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),e._variationsByIdentifier[n.getIdentifier()]=n,n}),o.setVariations(n),e._fontsByFontFamily[i]=o,o}).filter(function(e){return e}),c||(c=l[0].getVariations()[0]),this._defaultVariation=c,this._fonts=l}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(e){return this._fontsByFontFamily[e]}},{key:"getVariationByIdentifier",value:function(e){return this._variationsByIdentifier[e]}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),e}();t.a=c},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(11),a=i.n(o),s=i(10),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=2*Math.PI,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._serializeOperations=this._serializeOperations.bind(this)}return u(e,[{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=s.k.defaults(e,{image:!0});var t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(e){var t=this._editor.getImage(),i=t.width,n=t.height;if(!this._options.image)return e.inputImage={width:i,height:n},a.a.resolve(e);var r=s.k.createCanvas();r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);var o=r.toDataURL(s.e.PNG);return e.inputImage={type:s.e.PNG,data:o.replace(/^data:image\/(.*?);base64,/,""),width:i,height:n},a.a.resolve(e)}},{key:"_serializeOperations",value:function(e){var t=this,i=[];return this._editor.operations.getStack().forEach(function(e){var n=t._serializeOperation(e,i);n&&i.push(n)}),e.operations=i.filter(function(e){return e}),a.a.resolve(e)}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:s.g.warn("Unable to serialize operation of type "+e.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+l)%l,{type:"crop",options:t}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(e){return"identity"===e.getIdentifier()?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=e.availableOptions,i={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(n){var r=t[n],o=e.getOption(n),a=r.minValue,s=r.midValue,u=r.maxValue;i[n]=o<=s?(o-a)/(s-a)-1:(o-s)/(u-s)}),{type:"adjustments",options:i}}},{key:"_serializeSpriteOperation",value:function(e,t){var i=this,n=t.filter(function(e){return"sprite"===e.type}),r=void 0,o=!0;if(n.length?(r=n.pop(),o=!1):r={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(function(t){var n=null;t instanceof e.constructor.StickerSprite?n=i._serializeSticker(e,t):t instanceof e.constructor.TextSprite?n=i._serializeText(e,t):t instanceof e.constructor.BrushSprite&&(n=i._serializeBrush(e,t)),n&&r.options.sprites.push(n)}),o)return r}},{key:"_serializeSticker",value:function(e,t){var i=t.getAdjustments(),n=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);n.name=n.identifier,delete n.identifier,n.rotation=(n.rotation+l)%l;var r=i.availableOptions;return n.adjustments={brightness:i.getBrightness()-r.brightness.default,saturation:i.getSaturation()-r.saturation.default,contrast:i.getContrast()-r.contrast.default},{type:"sticker",options:n}}},{key:"_serializeText",value:function(e,t){var i=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return i.rotation=(i.rotation+l)%l,{type:"text",options:i}}},{key:"_serializeBrush",value:function(e,t){var i=this;return{type:"brush",options:{paths:t.getPaths().map(function(e){return i._serializePath(e)})}}}},{key:"_serializePath",value:function(e){var t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(function(e){return e.getPosition().toObject()}),t}},{key:"_serializeRadialFocusOperation",value:function(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(n){n===e&&(t=!0),t||(i=n.getNewDimensions(i))}),i}}]),e}();t.a=c,c.version="1.0.0"},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(0),u=i.n(s),l=i(1),c=i.n(l),f=i(342),h=i.n(f),p=i(11),_=i.n(p),d=i(10),y=i(345),v=i(90),g=i(346),m=i(133),b=i(91),k=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var x=void 0;void 0!==d.j.Operations.SpriteOperation&&(x=d.j.Operations.SpriteOperation.BrushSprite);var T=function(){function e(t,i){w(this,e),this._editor=t,this._ui=this._editor.getUI(),this._data=i,this._filterManager=new y.a(this._ui,this._getOptions("filter")),this._stickerManager=new v.a(this._ui,this._getOptions("sticker")),this._brushManager=new g.a(this._ui,this._getOptions("brush")),this._fontManager=new m.a(this._ui,this._getOptions("text"))}return k(e,[{key:"_getOptions",value:function(e){var t=this._editor.controls,i={};t&&t.get(e)&&(i=t.get(e).defaultOptions);var n=this._editor.getOptions();return d.k.deepDefaults({},n.editor.controlsOptions[e]||{},i)}},{key:"deserialize",value:function(){var e=this;return this._validateVersion().then(function(){return e._deserializeInputImage()}).then(function(){return e._deserializeOperations()})}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?_.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):_.a.resolve()}},{key:"_deserializeInputImage",value:function(){var e=this;return new _.a(function(t,i){var n=e._data.inputImage,r=n.data,o=n.type;if(r&&o){var a=new window.Image;a.addEventListener("load",function(){e._editor.setImage(a),t()}),a.src="data:"+o+";base64,"+r}else t()})}},{key:"_deserializeOperations",value:function(){var e,t=(e=h.a.mark(function e(){var t,i,n,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._data.operations,i=[],n=0;case 3:if(!(n<t.length)){e.next=12;break}return r=t[n],e.next=7,this._deserializeOperation(r);case 7:o=e.sent,i.push(o);case 9:n++,e.next=3;break;case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new _.a(function(e,i){return function n(r,o){try{var a=t[r](o),s=a.value}catch(e){return void i(e)}if(!a.done)return _.a.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"_deserializeOperation",value:function(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,i=t.rotation,n=d.n.fromObject(t.start),r=d.n.fromObject(t.end);i>Math.PI&&(i-=2*Math.PI);var o={start:n,end:r};void 0!==i&&(o.rotation=i);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,o),a.set(o),_.a.resolve(a)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,i=this._editor.operations.getOrCreate("orientation");return i?(i.set(t),_.a.resolve(i)):_.a.resolve()}},{key:"_deserializeFilterOperation",value:function(e){var t=this,i=e.options;return this._filterManager.getFilterByIdentifier(i.name)?this._filterManager.instantiateFilterWithIdentifier(i.name).then(function(e){var n=t._editor.operations.getOrCreate("filter");return n.set({identifier:i.name,filter:e,intensity:i.intensity}),n}):(d.g.warn("Deserializer","Unknown filter `"+i.name+"`"),_.a.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=d.j.Operations.AdjustmentsOperation,i=e.options,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(e){if(void 0!==i[e]){var r=t.prototype.availableOptions[e],o=r.minValue,a=r.midValue,s=r.maxValue,u=i[e];u=u<0?a+(a-o)*u:a+(s-a)*u,n[e]=u}}),_.a.resolve(this._editor.operations.getOrCreate("adjustments",n))}},{key:"_deserializeSpriteOperation",value:function(e){var t=this,i=e.options,n=this._editor.operations.getOrCreate("sprite");if(!n)return _.a.resolve();var r=i.sprites.map(function(e){return t._deserializeSprite(n,e)}).filter(function(e){return e});return _.a.all(r).then(function(e){return n.setSprites(e.filter(function(e){return e})),n})}},{key:"_deserializeSprite",value:function(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t)}}},{key:"_deserializeSticker",value:function(e,t){var i=this,n=d.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.name),a=this._stickerManager.getURLForSticker(o);return o?new _.a(function(t,o){var s=new window.Image;s.addEventListener("load",function(){var i=n.StickerSprite.prototype.availableOptions.adjustments.structure,o=r.rotation,a=r.flipHorizontally,u=r.flipVertically,l={identifier:r.name,image:s,position:d.n.fromObject(r.position),dimensions:d.n.fromObject(r.dimensions),rotation:o,flipHorizontally:a,flipVertically:u,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==r.adjustments[e]&&(l.adjustments[e]=r.adjustments[e]+i[e].default)}),t(e.createSticker(l))}),s.crossOrigin="Anonymous",s.src=i._editor.getUI().getAssetPath(a)}):(d.g.warn("Deserializer","Unknown sticker '"+r.name+"'. Skipping sprite."),_.a.resolve())}},{key:"_deserializeText",value:function(e,t){var i=t.options,n=i.fontSize,r=i.lineHeight,o=i.fontFamily,a=i.fontWeight,s=i.alignment,u=i.rotation,l=i.maxWidth,c=i.color,f=i.backgroundColor,h=new b.a(this._ui),p=this._fontManager.getFontByFontFamily(o);return p||(p=this._fontManager.getDefaultFont()),h.setFonts([p]),h.load().then(function(){return e.createText({fontSize:n,lineHeight:r,fontFamily:o,fontWeight:a,alignment:s,rotation:u,maxWidth:l,text:i.text,color:d.b.fromArray(c),backgroundColor:d.b.fromArray(f),position:d.n.fromObject(i.position)})})}},{key:"_deserializeBrush",value:function(e,t){var i=this,n=t.options.paths,r=e.createBrush();return n.forEach(function(e){i._deserializeBrushPath(r,e)}),_.a.resolve(r)}},{key:"_deserializeBrushPath",value:function(e,t){var i=t.points,n=this._createBrushForPath(t),r=e.createPath(n);r.setClosed(!0),i.forEach(function(e){r.addControlPoint(d.n.fromObject(e))})}},{key:"_createBrushForPath",value:function(e){var t=e.color,i=e.size,n={color:d.b.fromArray(t),size:i},o=this._brushManager.getFirstBrush();if(o.prototype&&o.prototype instanceof x)return new o(n);var s=d.k.extend({},o);delete s.image;var u=function(e){function t(){return w(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,x),t}();return u.identifier=o.identifier,new u(d.k.extend({},s,n))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":var i=t.position,n=t.radius,r=t.gradientRadius,o=t.blurRadius;return _.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:d.n.fromObject(i),radius:n,gradientRadius:r,blurRadius:o}));case"linear":var a=t.start,s=t.end,u=t.size,l=t.gradientSize,c=t.blurRadius;return _.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:d.n.fromObject(a),end:d.n.fromObject(s),size:u,gradientSize:l,blurRadius:c}))}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(n){n===e&&(t=!0),t||(i=n.getNewDimensions(i))}),i}}]),e}();t.a=T,T.version="1.0.0"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(134),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var p=2*Math.PI,_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["a"]),h(t,[{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+p)%p,1!==t.textureScale&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}]),t}();t.a=_,_.version="1.0.1"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(11),h=i.n(f),p=i(1),_=i.n(p),d=i(10),y=i(135),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||_()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,y["a"]),v(t,[{key:"_deserializeOperation",value:function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||_()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,i=t.rotation,n=d.n.fromObject(t.start),r=d.n.fromObject(t.end),o=t.dimensions?d.n.fromObject(t.dimensions):null;i>Math.PI&&(i-=2*Math.PI);var a={start:n,end:r};void 0!==i&&(a.rotation=i);var s=this._editor.operations.getOrCreate("transform");if(!s)return h.a.resolve();if(this._editor.broadcastTransform(s,a),s.set(a),o){var u=r.clone().subtract(n),l=s.getInputDimensions(!1).multiply(u);s.setTextureScale(o.x/l.x)}return h.a.resolve(s)}}]),t}();t.a=g,g.version="1.0.1"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(136),_=i(139),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),y=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["a"]),d(t,[{key:"_serializeSticker",value:function(e,i){var n=e.getInputDimensions(!1),r=y(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,i);return"none"!==i.getTintMode()&&(r.options.tintColor=i.serializeOption("tintColor",!0)),r.options.dimensions=i.getDimensions().clone().divide(n.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializePath",this).call(this,e),n=e.getBrush();return n.hasOption("hardness")&&(i.hardness=n.getOption("hardness")),i}},{key:"_serializeOperation",value:function(e,i){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,i),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,i),null):y(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,i)}},{key:"_serializeFrameOperation",value:function(e,t){var i=t.filter(function(e){return"sprite"===e.type}),n=void 0;i.length?n=i.pop():(n={type:"sprite",options:{sprites:[]}},t.push(n)),n.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}},{key:"_serializeOverlayOperation",value:function(e,t){if(e.getIdentifier()){var i=t.filter(function(e){return"sprite"===e.type}),n=void 0;i.length?n=i.pop():(n={type:"sprite",options:{sprites:[]}},t.push(n)),n.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:_.a[e.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(e){return{identifier:e.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializeOrientationOperation",this).call(this,e);return 90!==i.options.rotation&&270!==i.options.rotation||(i.options.flipHorizontally=!i.options.flipHorizontally,i.options.flipVertically=!i.options.flipVertically),i}},{key:"_serializeTransformOperation",value:function(e){var i=this._editor.operations;if(i.exists("orientation")){e=e.clone();var n=i.get("orientation");e.rotate(-n.getRotation()),n.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),n.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var r=y(t.prototype.__proto__||h()(t.prototype),"_serializeTransformOperation",this).call(this,e);return r.type="transform",r}},{key:"_serializeText",value:function(e,i){var n=y(t.prototype.__proto__||h()(t.prototype),"_serializeText",this).call(this,e,i),r=e.getInputDimensions(!1);return n.options.fontIdentifier=i.getFontIdentifier(),n.options.maxWidth=n.options.maxWidth*r.x/r.min(),delete n.options.fontFamily,n}},{key:"_serializeFilterOperation",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializeFilterOperation",this).call(this,e);return i?(i.options.identifier=i.options.name,delete i.options.name,i):null}},{key:"_serializeRadialFocusOperation",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializeRadialFocusOperation",this).call(this,e),n=i.options.options;return n.start=n.position,delete n.position,n.end={x:n.start.x+n.radius,y:n.start.y},delete n.radius,i}}]),t}();t.a=v,v.version="2.0.0"},function(e,t,i){"use strict";var n,r=i(0),o=i.n(r);function a(e,t,i){return t in e?o()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=i(10).j.Engine.Filters.OverlayFilter;t.a=(a(n={},s.BLEND_MODES.NORMAL,"normal"),a(n,s.BLEND_MODES.OVERLAY,"overlay"),a(n,s.BLEND_MODES.HARD_LIGHT,"hard light"),a(n,s.BLEND_MODES.SOFT_LIGHT,"soft light"),a(n,s.BLEND_MODES.MULTIPLY,"multiply"),a(n,s.BLEND_MODES.DARKEN,"darken"),a(n,s.BLEND_MODES.LIGHTEN,"lighten"),a(n,s.BLEND_MODES.SCREEN,"screen"),a(n,s.BLEND_MODES.COLOR_BURN,"color burn"),n)},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(11),h=i.n(f),p=i(1),_=i.n(p),d=i(10),y=i(137),v=i(351),g=i(352),m=i(90),b=i(353),k=i(91),w=i(48),x=i(139),T=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),C=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var E=d.k.flipObject(x.a),O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(n)));o._frameManager=new v.a(o._ui,o._getOptions("frame"));var a=o._getOptions("overlay");return a&&(o._overlayManager=new g.a(o._ui,a)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,y["a"]),T(t,[{key:"_deserializeSprite",value:function(e,i){return"frame"===i.type?this._deserializeFrame(e,i):"overlay"===i.type?this._deserializeOverlay(e,i):C(t.prototype.__proto__||_()(t.prototype),"_deserializeSprite",this).call(this,e,i)}},{key:"_deserializeOperation",value:function(e){return"transform"===e.type?this._deserializeTransformOperation(e):C(t.prototype.__proto__||_()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),C(t.prototype.__proto__||_()(t.prototype),"_deserializeOrientationOperation",this).call(this,e)}},{key:"_deserializeTransformOperation",value:function(e){var i=this;return C(t.prototype.__proto__||_()(t.prototype),"_deserializeCropOperation",this).call(this,e).then(function(e){if(e){var t=i._data.operations.find(function(e){return"orientation"===e.type});if(t){var n=t.options,r=n.rotation,o=n.flipHorizontally,a=n.flipVertically;90!==r&&270!==r||(!o&&a||o&&!a)&&(o=!o,a=!a),e.rotate(n.rotation),o&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),a&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e}})}},{key:"_deserializeFrame",value:function(e,t){var i=this,n=t.options.identifier,r=this._frameManager.getFrameByIdentifier(n);if(!r)return d.g.warn("Deserializer","Unknown frame `"+n+"`. Skipping frame."),h.a.resolve();var o=new b.a(this._ui,r);return o.load().then(function(){i._editor.operations.getOrCreate("frame",{frame:o.getFrame()})})}},{key:"_deserializeOverlay",value:function(e,t){var i=this,n=t.options,r=n.blendMode,o=n.intensity,a=n.identifier,s=this._overlayManager.getOverlayByIdentifier(a);if(!s)return d.g.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),h.a.resolve();var u=this._editor.getUI().getAssetPath(s.image);return w.a.load(u).then(function(e){i._editor.operations.getOrCreate("overlay",{alpha:o,identifier:a,blendMode:parseInt(E[r||s.blendMode],10),image:e})})}},{key:"_createBrushForPath",value:function(e){var i=C(t.prototype.__proto__||_()(t.prototype),"_createBrushForPath",this).call(this,e);return void 0!==e.hardness&&i.hasOption("hardness")&&i.setHardness(e.hardness),i}},{key:"_deserializeSticker",value:function(e,t){var i=this,n=d.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.identifier),a=m.a.getURLForSticker(o,"base");if(!o)return d.g.warn("Deserializer","Unknown sticker `"+r.identifier+"`. Skipping sprite."),h.a.resolve();var s=e.getInputDimensions(!1);return new h.a(function(t,u){var l=new window.Image;l.addEventListener("load",function(){var i=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=r.rotation,u=r.flipHorizontally,c=r.flipVertically,f={identifier:r.identifier,image:l,position:d.n.fromObject(r.position),dimensions:d.n.fromObject(r.dimensions).multiply(s.min()),rotation:a,flipHorizontally:u,flipVertically:c,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==r.adjustments[e]&&(f.adjustments[e]=r.adjustments[e]+i[e].default)}),void 0!==r.tintColor&&void 0!==o.tintMode&&(f.tintColor=d.b.fromArray(r.tintColor),f.tintMode=o.tintMode),t(e.createSticker(f))}),l.crossOrigin="Anonymous",l.src=i._editor.getUI().getAssetPath(a)})}},{key:"_deserializeFilterOperation",value:function(e){var t=this,i=e.options;return this._filterManager.getFilterByIdentifier(i.identifier)?this._filterManager.instantiateFilterWithIdentifier(i.identifier).then(function(e){var n=t._editor.operations.getOrCreate("filter");if(n)return n.set({identifier:i.identifier,filter:e,intensity:i.intensity}),n}):(d.g.warn("Deserializer","Unknown filter `"+i.identifier+"`"),h.a.resolve())}},{key:"_deserializeFocusOperation",value:function(e){var i=e.options,n=i.options;if("radial"!==i.type)return C(t.prototype.__proto__||_()(t.prototype),"_deserializeFocusOperation",this).call(this,e);var r=n.start,o=n.end,a=n.gradientRadius,s=n.blurRadius,u=d.n.fromObject(o).subtract(d.n.fromObject(r)).len();return h.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:d.n.fromObject(r),radius:u,gradientRadius:a,blurRadius:s}))}},{key:"_deserializeText",value:function(e,t){var i=t.options,n=i.fontSize,r=i.lineHeight,o=i.fontIdentifier,a=i.alignment,s=i.rotation,u=i.maxWidth,l=i.color,c=i.backgroundColor,f=new k.a(this._ui),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),f.load().then(function(){var t=e.getInputDimensions(!1),o=u*t.min()/t.x;return e.createText({fontSize:n,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:s,maxWidth:o,text:i.text,color:d.b.fromArray(l),backgroundColor:d.b.fromArray(c),position:d.n.fromObject(i.position)})})}}]),t}();t.a=O,O.version="2.0.0"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(10),h=i(334),p=i(47),_=i(91),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();
/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
var y=function(e){return f.k.byteArrayToString(f.a.decode(e))},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return i._mediator=new f.d,i._fontLoader=new _.a(i),i._options=e,i._initOptions(),i._initEvents(),i._disposed=!1,i._editor=new h.a(i,i._options,i._mediator),i._options.editor.image&&i._editor.setImage(i._options.editor.image),f.g.setLevel(i._options.logLevel),i._v(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["d"]),d(t,[{key:"export",value:function(){var e;return(e=this._editor).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this._editor).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this._editor.deserialize(e)}},{key:"getEditor",value:function(){return this._editor}},{key:"_initOptions",value:function(){this._options=f.k.defaults(this._options,{logLevel:"warn",editor:{},assets:{},responsive:!1,preloader:!0}),this._options.editor=f.k.defaults(this._options.editor||{},{preferredRenderer:"webgl",displayResizeMessage:!0,controlsOptions:{},operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],maxMegaPixels:null}),this._options.editor.export=f.k.defaults(this._options.editor.export||{},{format:"image/png",type:f.i.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.assets=f.k.defaults(this._options.assets||{},{baseUrl:process.cwd(),resolver:null})}},{key:"_v",value:function(){return!!this[y("X29wdGlvbnM=")][y("bGljZW5zZQ==")]||(f.g.error(y("TGljZW5zaW5n"),y("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),f.g.error(y("TGljZW5zaW5n"),y("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"setImage",value:function(e){this._editor.setImage(e)}},{key:"getAssetPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._options.assets,r=n.baseUrl,o=n.resolver,a=r+"/"+e;if(e.match(/(ftp|http|https):\/\//)&&(a=e),t){if(!i)if(("undefined"!=typeof window&&window.devicePixelRatio||1)>1){e=e.replace(/\.[\w?=]+$/,function(e){return"@2x"+e})}a=r+"/ui/desktop/"+e}return void 0!==o&&null!==o&&(a=o(a)),a}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(e){var t=this;return this.deserialize(e).then(function(){return t.export()})}}]),t}();v.prototype.identifier="node",v.Constants=f.c,v.Utils=f.m,v.JSONLoader=p.a,v.SDK=f.j,t.default=v},function(e,t,i){i(143);var n=i(9).Object;e.exports=function(e,t,i){return n.defineProperty(e,t,i)}},function(e,t,i){var n=i(15);n(n.S+n.F*!i(22),"Object",{defineProperty:i(18).f})},function(e,t,i){i(145),e.exports=i(9).Object.setPrototypeOf},function(e,t,i){var n=i(15);n(n.S,"Object",{setPrototypeOf:i(146).set})},function(e,t,i){var n=i(21),r=i(16),o=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=i(30)(Function.call,i(63).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,i){return o(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:o}},function(e,t,i){i(148);var n=i(9).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,i){var n=i(15);n(n.S,"Object",{create:i(65)})},function(e,t,i){var n=i(18),r=i(16),o=i(37);e.exports=i(22)?Object.defineProperties:function(e,t){r(e);for(var i,a=o(t),s=a.length,u=0;s>u;)n.f(e,i=a[u++],t[i]);return e}},function(e,t,i){var n=i(26),r=i(66),o=i(151);e.exports=function(e){return function(t,i,a){var s,u=n(t),l=r(u.length),c=o(a,l);if(e&&i!=i){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===i)return e||c||0;return!e&&-1}}},function(e,t,i){var n=i(67),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?r(e+t,0):o(e,t)}},function(e,t,i){i(153),e.exports=i(9).Object.getPrototypeOf},function(e,t,i){var n=i(38),r=i(96);i(71)("getPrototypeOf",function(){return function(e){return r(n(e))}})},function(e,t,i){"use strict";var n=i(39),r=i.n(n),o=i(17),a=i(47),s=r.a.Utils,u=r.a.Math.Vector2,l={getInnerDimensionsForElement:function(e){var t=new u(e.offsetWidth,e.offsetHeight),i=window.getComputedStyle(e,null);return t.x-=parseInt(i.getPropertyValue("padding-left"),10),t.x-=parseInt(i.getPropertyValue("padding-right"),10),t.y-=parseInt(i.getPropertyValue("padding-top"),10),t.y-=parseInt(i.getPropertyValue("padding-bottom"),10),t},getEventPosition:function(e){var t=e.clientX,i=e.clientY;if(-1!==e.type.indexOf("touch")){if(!e.touches.length)return;t=e.touches[0].clientX,i=e.touches[0].clientY}return new u(t,i)},createTransparentPatternCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.fetch(e,t);if(!n)return o.a.info("Utils#translate","Unable to translate `"+t+"`"),null;for(var r in i)n=n.replace("${"+r+"}",i[r]);return n},fetch:function(e,t,i){for(var n=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<n.length;r++){if(!(e=e[n[r]]))break}return void 0!==e&&e},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=function(e){return e});var n=[];return t.forEach(function(t){e.forEach(function(e){i(e)===t&&n.push(e)})}),n},getJSONP:function(e){return new a.a(e).load()},cloneCategories:function(e,t){return e.map(function(e){return(e=s.clone(e))[t]=e[t].slice(0),e})},mergeCategories:function(e,t,i){e=this.cloneCategories(e,i);var n=null;return t.forEach(function(t){e.forEach(function(e){t.identifier===e.identifier&&(n=e)}),n?n[i]=n[i].concat(t[i]):e.push(t)}),e},getStyleObject:function(e){var t=window.getComputedStyle(e),i={};for(var n in t){var r=t.getPropertyValue(n),o=n.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});""!==r&&(i[o]=r)}return i},styleElement:function(e,t){for(var i in t)e.style[i]=t[i]},debounce:function(e,t,i){var n;return function(){var r=this,o=arguments,a=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(r,o)},t),a&&e.apply(this,o)}},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var n=i.offsetWidth;return e.parentNode.removeChild(e),t-n},findIntegerFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=Number.MAX_VALUE,n=0,r=0,o=1,a=1,s=0;s<t;s++){var l=o/a-e;if(l<0)o++;else{if(!(l>0))return new u(o,a);a++}var c=Math.abs(o/a-e);c<i&&(i=c,n=o,r=a)}return new u(n,r)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e.toFixed(t);return parseFloat(i)},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject:function(e){var t={};for(var i in e)t[e[i]]=i;return t}};t.a=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(156),r=i(120),o=i(121),a=i(55),s=i(42),u=i(122),l=i(43),c=i(19),f=i(233),h=i(124),p=i(87),_=i(29),d=i(46),y=i(17),v=i(234),g=i(28),m=i(41);
/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
n.a.version=i(125).version,n.a.Math=r,n.a.Operations=o,n.a.Engine=a.a,n.a.Color=s.a,n.a.Operation=u.a,n.a.EventEmitter=l.a,n.a.Utils=c.a,n.a.Env=f.a,n.a.OperationsStack=h.a,n.a.EXIF=p.a,n.a.Promise=_.a,n.a.Configurable=d.a,n.a.Log=y.a,n.a.Loaders=v,n.a.RenderType=g.RenderType,n.a.ImageFormat=g.ImageFormat,n.a.OptionType=g.OptionType,n.a.RendererType=g.RendererType,n.a.UniformType=g.UniformType,n.a.Base64=m.a,n.a.UI={},t.default=n.a},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(2),c=i.n(l),f=i(3),h=i.n(f),p=i(11),_=i.n(p),d=i(1),y=i.n(d),v=i(33),g=i(121),m=i(124),b=i(229),k=i(87),w=i(232),x=i(123),T="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},C=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}
/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
var O=function(e){return M.byteArrayToString(A.decode(e))},R=v.Rectangle,S=v.Constants,F=v.Engine,M=v.Utils,D=v.EventEmitter,B=v.Vector2,I=v.Log,A=v.Base64,L=S.RenderType,N=S.ImageFormat,P=S.Events,z=S.RendererType,U=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=E(this,(t.__proto__||y()(t)).call(this));r._onOperationUpdate=r._onOperationUpdate.bind(r),r._onContextRestored=r._onContextRestored.bind(r);var o=i(125).version;if(r.version=o,r[O("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,r._preferredRenderer=e,r._options=M.defaults(n,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),r._options.smoothUpscaling&&(F.BaseTexture.DefaultMagFilter=F.BaseTexture.LinearFilter),r._options.extensions=M.defaults(r._options.extensions,{operations:[],controls:[],languages:[]}),I.setLevel(r._options.logLevel),!r._v())return E(r);var a=v[O("TGljZW5zZUNoZWNrZXI=")];r._l=new a(r[O("X29wdGlvbnM=")][O("bGljZW5zZQ==")]),r._cv(!0).then(function(){r._ct()}).catch(function(e){I.error(O("TGljZW5zaW5n"),e.message)}),r._defaultRenderMode=r._options.renderMode,r._renderMode=r._options.renderMode,r._textureQuality=r._options.textureQuality,r._offset=new B,r._zoom=r._options.zoom,r._spriteScale=r._options.spriteScale,r._rotation=r._options.rotation,r._operations={},r._operationsStack=null,r.setOperationsStack(new m.a),r._container=new F.Container,r._sprite=new F.Sprite,r._container.addChild(r._sprite),r._inputTexture=r._options.inputTexture,r._currentInputTexture=null,r._currentTexture=null,r._resizedTexture=null,r._resizedContainer=new F.Container,r._resizedSprite=new F.Sprite,r._resizedContainer.addChild(r._resizedSprite),r.setSmoothDownscaling(r._options.smoothDownscaling),r._checkForUpdates(),r._registerOperations(),r._initRenderer();var s=r._renderer.constructor.type;return r._options.displayWelcomeMessage&&I.log("Version:",r.version+" ("+s+") - https://www.photoeditorsdk.com"),r._options.image&&r.setImage(r._options.image),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,D),C(t,[{key:"_v",value:function(){return!!this[O("X29wdGlvbnM=")][O("bGljZW5zZQ==")]||(I.error(O("TGljZW5zaW5n"),O("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),I.error(O("TGljZW5zaW5n"),O("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?I.error(O("TGljZW5zaW5n"),O("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):I.warn(O("TGljZW5zaW5n"),O("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(i){e[O("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var n=O("SW52YWxpZCBsaWNlbnNlLg==");throw t&&(n="ELICEXP"===i.code?O("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===i.code?O("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===i.code?O("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===i.code?O("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",T(e._options.license)):"ELICINV"===i.code?O("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):O("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),i.message=n,new Error(i)})}},{key:"_t",value:function(){this._l.t()}},{key:"_onOperationUpdate",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.emit.apply(this,[P.OPERATION_UPDATED].concat(t))}},{key:"_onContextRestored",value:function(){I.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(e){e.disposeRenderTextures()}),this.render()}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.DATAURL,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.PNG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return t.hasChanges()&&t._t(),new w.a(t,{renderType:e,imageFormat:i,quality:n}).export()})}},{key:"render",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var i=this._renderer.getContext();i.startFrame&&i.startFrame();var n=void 0;I.canLog("info")&&(n=new x.a("⚡⚡⚡","Frame rendering")),I.info("⚡⚡⚡","Rendering starts");var r=this._operationsStack;return r.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(t){"export"===e._renderMode&&(t=e._inputTexture),e._currentTexture=t,e._sprite.setTexture(t),e._container.updateTransform()}).then(function(){return r.validateSettings()}).then(function(){return r.render(e,e._currentTexture)}).then(function(i){switch(e._currentTexture=i,e._sprite.setTexture(e._currentTexture),e._renderMode){case"dynamic":var n=e._renderer.getDimensions().clone().divide(2).add(e._offset);e._container.setScale(e._zoom/e.getTextureScale(),e._zoom/e.getTextureScale()),e._container.setPosition(n),e._sprite.setAnchor(.5,.5),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(e._rotation);break;case"export":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(0)}return t&&e._renderer.render(e._container),i}).then(function(e){return n&&n.stop(),i.endFrame&&i.endFrame(),e})}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var e=this;return new _.a(function(t,i){var n=e.getTextureScale();if(1===e._textureQuality)return t(e._inputTexture);var r=e.getInputDimensions().multiply(n).floor(),o=void 0;e._resizedTexture?e._resizedTexture.getDimensions().equals(r)||(e._resizedTexture.resizeTo(r),o=!0):(e._resizedTexture=new F.RenderTexture(e._renderer,r.x,r.y),o=!0),o&&(e._resizedSprite.setScale(n,n),e._resizedSprite.setTexture(e._inputTexture),e._resizedTexture.render(e._resizedContainer)),t(e._resizedTexture)})}},{key:"_registerOperations",value:function(){for(var e in this._operations={},g){var t=g[e];this._operations[t.identifier]=t}this._operations=M.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(e){var t=this;e.forEach(function(e){t._operations[e.identifier]=e})}},{key:"setAllOperationsToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(e)}},{key:"createOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this._operations[e];if(!n)throw new Error("No operation with identifier `"+e+"` found.");var r=new n(this,t);return i&&this.addOperation(r),r}},{key:"addOperation",value:function(e){this._operationsStack.push(e)}},{key:"removeOperation",value:function(e){this._operationsStack.remove(e)}},{key:"getInputDimensions",value:function(){var e=this._inputTexture.getFrame();return new B(e.width,e.height)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getInputDimensions();return this._operationsStack.forEach(function(e){e.getEnabled()&&(t=e.getNewDimensions(t))}),e&&t.multiply(this._spriteScale),t.floor()}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.getTextureScale(),t=this.getInputDimensions().multiply(e).floor();return this._operationsStack.forEach(function(e){t=e.getNewDimensions(t)}),t}},{key:"_checkForUpdates",value:function(){this._l.isENT()||(this._versionChecker=new b.a(this.version))}},{key:"_initRenderer",value:function(){var e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},t=void 0,i=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var n=this._options.canvas;t=n.width,i=n.height}else if(this._inputTexture){var r=this.getFinalDimensions();t=r.x,i=r.y}else t=1,i=1;switch(this._preferredRenderer){case z.WEBGL:this._renderer=F.autoDetectRenderer(t,i,e),this._renderer.on("context-restored",this._onContextRestored);break;case z.CANVAS:this._renderer=new F.CanvasRenderer(t,i,e),this._renderer.on("context-restored",this._onContextRestored);break;default:I.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=F.autoDetectRenderer(t,i,e)}}},{key:"resizeTo",value:function(e){this._renderer.resizeTo(e,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(e){if(e){var t=e.src,n=!1,r=null;if(e instanceof i(20).Image&&e.rawSource){var o=e.rawSource;if(e.rawSource instanceof Buffer)t=e.rawSource.toString("base64");else{var a=e.rawSource.replace("data:image/jpeg;base64,","");o=Buffer.from(a,"base64"),t=e.rawSource}(n=k.a.bufferIsJPEG(o))&&(r=t)}if("undefined"!=typeof WEBPACK&&(n=k.a.isJPEG(t),r=t),n){var s=null;try{s=k.a.fromBase64String(r)}catch(e){}if(!s)return;return s}}}},{key:"_handleExifOrientation",value:function(){var e=this._exif.getTags();if(e&&e.Orientation){var t=1!==e.Orientation&&2!==e.Orientation,i=-1!==[2,4,5,7].indexOf(e.Orientation);(t||i)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e),this._exif.setOrientation(1))}}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"setImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();var n=new F.BaseTexture(this._image),r=new R(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);i&&(r.width=i.x,r.height=i.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new F.Texture(n,r),this._currentTexture=this._inputTexture,this._sprite.clearTexture(),this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(e){this._inputTexture=e}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(e){this._renderer.setCanvas(e)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(e){this._operationsStack&&this._operationsStack.off(P.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(P.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e,t){e instanceof B?this._offset.copy(e):this._offset.set(e,t)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(e){this._renderMode=e}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}},{key:"setRotation",value:function(e){this._rotation=e}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),t}();t.a=U},function(e,t,i){i(40),i(54),e.exports=i(72).f("iterator")},function(e,t,i){var n=i(67),r=i(64);e.exports=function(e){return function(t,i){var o,a,s=String(r(t)),u=n(i),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,i){"use strict";var n=i(65),r=i(35),o=i(53),a={};i(25)(a,i(12)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=n(a,{next:r(1,i)}),o(e,t+" Iterator")}},function(e,t,i){"use strict";var n=i(161),r=i(162),o=i(32),a=i(26);e.exports=i(97)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){i(164),i(100),i(169),i(170),e.exports=i(9).Symbol},function(e,t,i){"use strict";var n=i(14),r=i(27),o=i(22),a=i(15),s=i(98),u=i(165).KEY,l=i(31),c=i(69),f=i(53),h=i(51),p=i(12),_=i(72),d=i(73),y=i(166),v=i(167),g=i(16),m=i(21),b=i(26),k=i(62),w=i(35),x=i(65),T=i(168),C=i(63),E=i(18),O=i(37),R=C.f,S=E.f,F=T.f,M=n.Symbol,D=n.JSON,B=D&&D.stringify,I=p("_hidden"),A=p("toPrimitive"),L={}.propertyIsEnumerable,N=c("symbol-registry"),P=c("symbols"),z=c("op-symbols"),U=Object.prototype,j="function"==typeof M,G=n.QObject,V=!G||!G.prototype||!G.prototype.findChild,W=o&&l(function(){return 7!=x(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=R(U,t);n&&delete U[t],S(e,t,i),n&&e!==U&&S(U,t,n)}:S,H=function(e){var t=P[e]=x(M.prototype);return t._k=e,t},q=j&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},X=function(e,t,i){return e===U&&X(z,t,i),g(e),t=k(t,!0),g(i),r(P,t)?(i.enumerable?(r(e,I)&&e[I][t]&&(e[I][t]=!1),i=x(i,{enumerable:w(0,!1)})):(r(e,I)||S(e,I,w(1,{})),e[I][t]=!0),W(e,t,i)):S(e,t,i)},Y=function(e,t){g(e);for(var i,n=y(t=b(t)),r=0,o=n.length;o>r;)X(e,i=n[r++],t[i]);return e},Z=function(e){var t=L.call(this,e=k(e,!0));return!(this===U&&r(P,e)&&!r(z,e))&&(!(t||!r(this,e)||!r(P,e)||r(this,I)&&this[I][e])||t)},J=function(e,t){if(e=b(e),t=k(t,!0),e!==U||!r(P,t)||r(z,t)){var i=R(e,t);return!i||!r(P,t)||r(e,I)&&e[I][t]||(i.enumerable=!0),i}},K=function(e){for(var t,i=F(b(e)),n=[],o=0;i.length>o;)r(P,t=i[o++])||t==I||t==u||n.push(t);return n},Q=function(e){for(var t,i=e===U,n=F(i?z:b(e)),o=[],a=0;n.length>a;)!r(P,t=n[a++])||i&&!r(U,t)||o.push(P[t]);return o};j||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===U&&t.call(z,i),r(this,I)&&r(this[I],e)&&(this[I][e]=!1),W(this,e,w(1,i))};return o&&V&&W(U,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",function(){return this._k}),C.f=J,E.f=X,i(99).f=T.f=K,i(50).f=Z,i(74).f=Q,o&&!i(52)&&s(U,"propertyIsEnumerable",Z,!0),_.f=function(e){return H(p(e))}),a(a.G+a.W+a.F*!j,{Symbol:M});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)p($[ee++]);for(var te=O(p.store),ie=0;te.length>ie;)d(te[ie++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return r(N,e+="")?N[e]:N[e]=M(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?x(e):Y(x(e),t)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:Q}),D&&a(a.S+a.F*(!j||l(function(){var e=M();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))})),"JSON",{stringify:function(e){for(var t,i,n=[e],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=t=n[1],(m(t)||void 0!==e)&&!q(e))return v(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),n[1]=t,B.apply(D,n)}}),M.prototype[A]||i(25)(M.prototype,A,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,i){var n=i(51)("meta"),r=i(21),o=i(27),a=i(18).f,s=0,u=Object.isExtensible||function(){return!0},l=!i(31)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!o(e,n)&&c(e),e}}},function(e,t,i){var n=i(37),r=i(74),o=i(50);e.exports=function(e){var t=n(e),i=r.f;if(i)for(var a,s=i(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,i){var n=i(36);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(26),r=i(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(n(e))}},function(e,t,i){i(73)("asyncIterator")},function(e,t,i){i(73)("observable")},function(e,t,i){i(100),i(40),i(54),i(172),i(179),i(180),e.exports=i(9).Promise},function(e,t,i){"use strict";var n,r,o,a,s=i(52),u=i(14),l=i(30),c=i(75),f=i(15),h=i(21),p=i(49),_=i(173),d=i(174),y=i(103),v=i(77).set,g=i(176)(),m=i(78),b=i(104),k=i(105),w=u.TypeError,x=u.process,T=u.Promise,C="process"==c(x),E=function(){},O=r=m.f,R=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[i(12)("species")]=function(e){e(E,E)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),S=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var i=e._c;g(function(){for(var n=e._v,r=1==e._s,o=0,a=function(t){var i,o,a=r?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(r||(2==e._h&&B(e),e._h=1),!0===a?i=n:(l&&l.enter(),i=a(n),l&&l.exit()),i===t.promise?u(w("Promise-chain cycle")):(o=S(i))?o.call(i,s,u):s(i)):u(n)}catch(e){u(e)}};i.length>o;)a(i[o++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){v.call(u,function(){var t,i,n,r=e._v,o=D(e);if(o&&(t=b(function(){C?x.emit("unhandledRejection",r,e):(i=u.onunhandledrejection)?i({promise:e,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)}),e._h=C||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){v.call(u,function(){var t;C?x.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},A=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw w("Promise can't be resolved itself");(t=S(e))?g(function(){var n={_w:i,_d:!1};try{t.call(e,l(A,n,1),l(I,n,1))}catch(e){I.call(n,e)}}):(i._v=e,i._s=1,F(i,!1))}catch(e){I.call({_w:i,_d:!1},e)}}};R||(T=function(e){_(this,T,"Promise","_h"),p(e),n.call(this);try{e(l(A,this,1),l(I,this,1))}catch(e){I.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(177)(T.prototype,{then:function(e,t){var i=O(y(this,T));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=C?x.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&F(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=l(A,e,1),this.reject=l(I,e,1)},m.f=O=function(e){return e===T||e===a?new o(e):r(e)}),f(f.G+f.W+f.F*!R,{Promise:T}),i(53)(T,"Promise"),i(178)("Promise"),a=i(9).Promise,f(f.S+f.F*!R,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!R),"Promise",{resolve:function(e){return k(s&&this===a?T:this,e)}}),f(f.S+f.F*!(R&&i(106)(function(e){T.all(e).catch(E)})),"Promise",{all:function(e){var t=this,i=O(t),n=i.resolve,r=i.reject,o=b(function(){var i=[],o=0,a=1;d(e,!1,function(e){var s=o++,u=!1;i.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,i[s]=e,--a||n(i))},r)}),--a||n(i)});return o.e&&r(o.v),i.promise},race:function(e){var t=this,i=O(t),n=i.reject,r=b(function(){d(e,!1,function(e){t.resolve(e).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(e,t){e.exports=function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var n=i(30),r=i(101),o=i(102),a=i(16),s=i(66),u=i(76),l={},c={};(t=e.exports=function(e,t,i,f,h){var p,_,d,y,v=h?function(){return e}:u(e),g=n(i,f,t?2:1),m=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>m;m++)if((y=t?g(a(_=e[m])[0],_[1]):g(e[m]))===l||y===c)return y}else for(d=v.call(e);!(_=d.next()).done;)if((y=r(d,g,_.value,t))===l||y===c)return y}).BREAK=l,t.RETURN=c},function(e,t){e.exports=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var n=i(14),r=i(77).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==i(36)(a);e.exports=function(){var e,t,i,l=function(){var n,r;for(u&&(n=a.domain)&&n.exit();e;){r=e.fn,e=e.next;try{r()}catch(n){throw e?i():t=void 0,n}}t=void 0,n&&n.enter()};if(u)i=function(){a.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve();i=function(){c.then(l)}}else i=function(){r.call(n,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),i=function(){h.data=f=!f}}return function(n){var r={fn:n,next:void 0};t&&(t.next=r),e||(e=r,i()),t=r}}},function(e,t,i){var n=i(25);e.exports=function(e,t,i){for(var r in t)i&&e[r]?e[r]=t[r]:n(e,r,t[r]);return e}},function(e,t,i){"use strict";var n=i(14),r=i(9),o=i(18),a=i(22),s=i(12)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){"use strict";var n=i(15),r=i(9),o=i(14),a=i(103),s=i(105);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),i="function"==typeof e;return this.then(i?function(i){return s(t,e()).then(function(){return i})}:e,i?function(i){return s(t,e()).then(function(){throw i})}:e)}})},function(e,t,i){"use strict";var n=i(15),r=i(78),o=i(104);n(n.S,"Promise",{try:function(e){var t=r.f(this),i=o(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(112),p=i(113),_=i(57),d=i(82),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=f.c.RendererType,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._type=v.CANVAS,o.setCanvas(o._options.canvas||o._createCanvas()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p["a"]),y(t,[{key:"_createCanvas",value:function(){return f.i.createCanvas()}},{key:"_createContext",value:function(){var e=this._canvas.getContext("2d");return this._options.debug&&(e=new h.a(e)),this.id=e.id=t.contextId++,this._context=e,e.renderer=this,this.emit("context",e),e}},{key:"_setupContext",value:function(){var e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(t){e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new _.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new d.a(this)}},{key:"render",value:function(e){var t=this._renderTarget.getContext(),i=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(i),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;var n=this._canvas,r=n.width,o=n.height;t.clearRect(0,0,r,o),0!==this._clearColor.a&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,r,o),t.restore()),this.renderDisplayObject(e,this._renderTarget)}},{key:"renderDisplayObject",value:function(e,t){var i=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(i)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(e){this._renderTarget=e}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),t}();g.contextId=0,g.type="Canvas2D",t.a=g},function(e,t,i){i(40),i(183),e.exports=i(9).Array.from},function(e,t,i){"use strict";var n=i(30),r=i(15),o=i(38),a=i(101),s=i(102),u=i(66),l=i(184),c=i(76);r(r.S+r.F*!i(106)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,r,f,h=o(e),p="function"==typeof this?this:Array,_=arguments.length,d=_>1?arguments[1]:void 0,y=void 0!==d,v=0,g=c(h);if(y&&(d=n(d,_>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(i=new p(t=u(h.length));t>v;v++)l(i,v,y?d(h[v],v):h[v]);else for(f=g.call(h),i=new p;!(r=f.next()).done;v++)l(i,v,y?a(f,d,[r.value,v],!0):r.value);return i.length=v,i}})},function(e,t,i){"use strict";var n=i(18),r=i(35);e.exports=function(e,t,i){t in e?n.f(e,t,r(0,i)):e[t]=i}},function(e,t,i){e.exports={default:i(186),__esModule:!0}},function(e,t,i){var n=i(9),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,i){i(188),e.exports=i(9).Object.assign},function(e,t,i){var n=i(15);n(n.S+n.F,"Object",{assign:i(189)})},function(e,t,i){"use strict";var n=i(37),r=i(74),o=i(50),a=i(38),s=i(93),u=Object.assign;e.exports=!u||i(31)(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[i]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var i=a(e),u=arguments.length,l=1,c=r.f,f=o.f;u>l;)for(var h,p=s(arguments[l++]),_=c?n(p).concat(c(p)):n(p),d=_.length,y=0;d>y;)f.call(p,h=_[y++])&&(i[h]=p[h]);return i}:u},function(e,t,i){i(191),e.exports=i(9).Object.keys},function(e,t,i){var n=i(38),r=i(37);i(71)("keys",function(){return function(e){return r(n(e))}})},function(e,t){e.exports=i},function(e,t,i){i(54),i(40),e.exports=i(194)},function(e,t,i){var n=i(75),r=i(12)("iterator"),o=i(32);e.exports=i(9).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(n(t))}},function(e,t,i){i(54),i(40),e.exports=i(196)},function(e,t,i){var n=i(16),r=i(76);e.exports=i(9).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,i){"use strict";var n={defaults:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)void 0===r[u]&&(r[u]=s[u])}return r},extend:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)r[u]=s[u]}return r}};t.a=n},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(8),_=i(113),d=i(58),y=i(114),v=i(201),g=i(83),m=i(85),b=i(86),k=i(112),w=i(115),x=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),T=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var C=p.c.RendererType,E=i(20),O=void 0!==E?E.Image:void 0,R=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._type=C.WEBGL,o._textures=[],o._fakeObject=new m.a,o._onContextLost=o._onContextLost.bind(o),o._onContextRestored=o._onContextRestored.bind(o),o.setCanvas(o._options.canvas||p.i.createCanvas()),o.shaders=o._initShaders(),o.renderers=o._initRenderers(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),x(t,[{key:"_onContextLost",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"Failed to create WebGL context: "+(e.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){var e=this;p.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(t){t.disposeGLTexturesForRenderer(e)}),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new b.a(this),this._currentObjectRenderer=new y.a(this)}},{key:"setShader",value:function(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}},{key:"setCanvas",value:function(e){this._canvas&&this._removeContextEventListeners(),T(t.prototype.__proto__||h()(t.prototype),"setCanvas",this).call(this,e),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(e){var t=this._context,i=e.getAttributes(),n=e.getAttributeLocations();i.forEach(function(e){var i=n[e];t.enableVertexAttribArray(i)})}},{key:"_initShaders",value:function(){return{default:new g.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new v.a(this)}}},{key:"_createContext",value:function(){var e=this._canvas,n=null;if(n=i(116)(e.width,e.height,{preserveDrawingBuffer:!0}),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){n=window.WebGLDebugUtils.makeDebugContext(n,null,function(e,t){console.error("gl."+e+"("+window.WebGLDebugUtils.glFunctionArgsToString(e,t)+")")})}return this._options.debug&&(n=new k.a(n)),this.id=n.id=t.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n}},{key:"_setupContext",value:function(){var e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new d.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=0!==t.precision?"highp":"mediump";var i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=0!==i.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];T(t.prototype.__proto__||h()(t.prototype),"resizeTo",this).call(this,e,i),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context.resize(e.x,e.y)}},{key:"setRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=e,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}},{key:"render",value:function(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var t=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}},{key:"getOrCreateGLTexture",value:function(e){var t=this._context,i=e.getGLTextureForRenderer(this);return i||(i=t.createTexture(),e.setGLTextureForRenderer(i,this),this._textures.push(e)),i}},{key:"updateTexture",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.getSource(),n=!!i,r=this._context,o=e.getGLUnit(),a=this.getOrCreateGLTexture(e);r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,a),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&n&&("undefined"==typeof WEBPACK?((i instanceof O||i instanceof E.Canvas)&&(i=w.a.fromNodeCanvasImage(i)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i.width,i.height,0,r.RGBA,r.UNSIGNED_BYTE,i.data)):i instanceof w.a?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i.width,i.height,0,r.RGBA,r.UNSIGNED_BYTE,i.data):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i)),e.isMipMappingEnabled()?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e.getGLRepeat(r,"x")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e.getGLRepeat(r,"y"))),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e.getGLFilter(r,"min")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e.getGLFilter(r,"mag")),r.activeTexture(r.TEXTURE0)}},{key:"getMaxDimensions",value:function(){if("undefined"==typeof WEBPACK){var e=i(116)(1,1);return e.getParameter(e.MAX_TEXTURE_SIZE)}var t=p.i.createCanvas(),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var r=n.getParameter(n.MAX_TEXTURE_SIZE),o=n.getExtension("WEBGL_lose_context");return o&&o.loseContext(),r}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){var e=this;for(var t in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(t){t.disposeGLTexturesForRenderer(e)}),this.shaders)this.shaders[t].dispose(),delete this.shaders[t];this._removeContextEventListeners();var i=this._context.getExtension("WEBGL_lose_context");i&&i.loseContext()}}],[{key:"isSupported",value:function(){if("undefined"==typeof WEBPACK)return!0;var e=p.i.createCanvas();e.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var t=e.getContext("webgl")||e.getContext("experimental-webgl");return e.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),!!t}}]),t}();R.contextId=0,R.type="WebGL",t.a=R},function(e,t,i){i(200);var n=i(9).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,i){var n=i(26),r=i(63).f;i(71)("getOwnPropertyDescriptor",function(){return function(e,t){return r(n(e),t)}})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(8),_=i(114),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));o._maxBatchSize=p.a,o._vertices=new ArrayBuffer(4*p.a*p.j),o._positions=new Float32Array(o._vertices),o._colors=new Uint32Array(o._vertices),o._indices=new Uint16Array(6*p.a);for(var a=0,s=0;a<6*p.a;a+=6,s+=4)o._indices[a+0]=s+0,o._indices[a+1]=s+1,o._indices[a+2]=s+2,o._indices[a+3]=s+0,o._indices[a+4]=s+2,o._indices[a+5]=s+3;return o._shaders=[],o._sprites=[],o._currentBatchSize=0,o._currentBaseTexture=null,o._onContextChange(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),d(t,[{key:"render",value:function(e){var t=e.getTexture(),i=t.getFrame(),n=t.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=n);var r=t.getUVs();if(r){var o=this._currentBatchSize*p.j;this._addVertexCoordinates(e,o,i),this._addTextureUVs(e,o,r),this._addColors(e,o),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}}},{key:"_addColors",value:function(e,t){var i=this._colors,n=e.getTint(),r=(n>>16)+(65280&n)+((255&n)<<16)+(255*e.getWorldAlpha()<<24);i[t+4]=i[t+9]=i[t+14]=i[t+19]=r}},{key:"_addTextureUVs",value:function(e,t,i){var n=this._positions,r=i.getUVsAt(0);n[t+2]=r.x,n[t+3]=r.y,r=i.getUVsAt(1),n[t+7]=r.x,n[t+8]=r.y,r=i.getUVsAt(2),n[t+12]=r.x,n[t+13]=r.y,r=i.getUVsAt(3),n[t+17]=r.x,n[t+18]=r.y}},{key:"_addVertexCoordinates",value:function(e,t,i){for(var n=this._positions,r=e.getWorldTransform(),o=e.getAnchor(),a=r.rectangleToCoordinates(i,o),s=0;s<4;s++)n[t+5*s]=a[s].x,n[t+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var e=this._renderer,t=e.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*p.a)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{var i=this._positions.subarray(0,this._currentBatchSize*p.j);t.bufferSubData(t.ARRAY_BUFFER,0,i)}for(var n=0,r=null,o=null,a=null,s=null,u=!1,l=null,c=0,f=0,h=this._currentBatchSize;f<h;f++){if(o=(l=this._sprites[f]).getTexture().getBaseTexture(),u=a!==(s=l.getShader()||this._shader),(r!==o||u)&&(this._renderBatch(r,n,c),c=f,n=0,r=o,u)){a=s,e.setShader(a);var _=e.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",_),a.syncUniforms(),t.activeTexture(t.TEXTURE0)}n++}this._renderBatch(r,n,c),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(e,t,i){if(0!==t){var n=this._renderer,r=n.getContext(),o=e.getGLTextureForRenderer(n);o||(o=n.getOrCreateGLTexture(e)),e.isDirty()&&(n.updateTexture(e),e.setDirty(!1)),r.activeTexture(r.TEXTURE0+e.getGLUnit()),r.bindTexture(r.TEXTURE_2D,o);var a=6*t,s=6*i*2;r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var e=this._renderer.getContext();e.deleteBuffer(this._vertexBuffer),e.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}();t.a=y},function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return o(e,[{key:"map",value:function(e,t){var i=t.x,n=t.y;this._uvs[2]=t.width/e.width,this._uvs[4]=this._uvs[2],this._uvs[5]=t.height/e.height,this._uvs[7]=this._uvs[5],this._vertices[0]=i,this._vertices[1]=n,this._vertices[2]=i+t.width,this._vertices[3]=n,this._vertices[4]=this._vertices[2],this._vertices[5]=n+t.height,this._vertices[6]=i,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var e=this._context;this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var e=this._context;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this._uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var e=this._context;e.deleteBuffer(this._vertexBuffer),e.deleteBuffer(this._indexBuffer)}}]),e}();t.a=a},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(8),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uvs=[new o.k(0,0),new o.k(1,0),new o.k(1,1),new o.k(0,1)]}return a(e,[{key:"update",value:function(e,t){var i=this._uvs[0];i.x=e.x/t.width,i.y=e.y/t.height,(i=this._uvs[1]).x=(e.x+e.width)/t.width,i.y=e.y/t.height,(i=this._uvs[2]).x=(e.x+e.width)/t.width,i.y=(e.y+e.height)/t.height,(i=this._uvs[3]).x=e.x/t.width,i.y=(e.y+e.height)/t.height}},{key:"getUVsAt",value:function(e){return this._uvs[e]}},{key:"getUVs",value:function(){return this._uvs}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(118),p=i(44),_=i(58),d=i(57),y=i(86),v=i(82),g=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var m=f.c.RendererType,b=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,new p.a,new f.h(0,0,i,n)));return o._loaded=!0,o._width=i,o._height=n,o._pixelRatio=r,o._renderer=e,o._setupFilterManager(),o._setupBuffer(),o.setBaseTexture(o._renderTarget.getBaseTexture()),o._updateUVs(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),g(t,[{key:"_setupFilterManager",value:function(){this._renderer.isOfType(m.WEBGL)?this._filterManager=new y.a(this._renderer):this._renderer.isOfType(m.CANVAS)&&(this._filterManager=new v.a(this._renderer)),this._filterManager.resizeTo(new f.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(m.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(m.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget=new _.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget=new d.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(e){this._renderTarget.clear(e)}},{key:"resizeTo",value:function(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}},{key:"render",value:function(e){if(this._renderer.isOfType(m.WEBGL))this._renderWebGL(e);else{if(!this._renderer.isOfType(m.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(e)}}},{key:"_renderWebGL",value:function(e){this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"_renderCanvas",value:function(e){e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose()}}]),t}();t.a=b},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(117),p=i(208),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return i._onTextureUpdate=i._onTextureUpdate.bind(i),i._texture=e,i._shader=null,i._width=0,i._height=0,i._anchor=new f.k(0,0),i.setTexture(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),_(t,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(e){var t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new p.a),this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(e){var t=this._worldTransform,i=this._texture.getFrame(),n=i.width,r=i.height,o=e.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-n|0,s=this._anchor.y*-r|0,u=e.getContext();u.setTransform(t.a,t.b,t.c,t.d,t.tx*o,t.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),c=l.getPixelRatio(),f=l.getSource();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,(f.naturalWidth||n)*c,(f.naturalHeight||r)*c,a*o,s*o,n*o,r*o)}},{key:"isAtPosition",value:function(e){var t=this._worldTransform.applyInverseToVector(e),i=this._texture.getFrame(),n=i.width,r=i.height,o=new f.k(-n,-r);o.multiply(this._anchor);var a=o.clone().add(n,r);return!(t.x<o.x||t.x>a.x||t.y<o.y||t.y>a.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var e=this._bounds,t=this._texture.getFrame(),i=this._worldTransform,n=this._anchor,r=i.rectangleToCoordinates(t,n),o=r[0].x,a=r[0].y,s=o,u=a;r.forEach(function(e){var t=e.x,i=e.y;o=Math.min(o,t),a=Math.min(a,i),s=Math.max(s,t),u=Math.max(u,i)}),e.x=o,e.width=Math.abs(s-o),e.y=a,e.height=Math.abs(u-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){this._texture&&(this._texture.off("update",this._onTextureUpdate),this._texture.dispose(),this._texture=null,this._potRenderer&&(this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(e){e&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(e){this._shader=e}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(e){this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new f.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(e,t){e instanceof f.k?this._anchor.copy(e):this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(e){this._smoothDownscaling=e}},{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}]),t}();t.a=d},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(33),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite)}return a(e,[{key:"render",value:function(e,t,i){var n=i.getDimensions(),r=this._getNextHighestPOT(n);this._renderTexture?this._renderTexture.resizeTo(r):this._renderTexture=new o.Engine.RenderTexture(e,r.x,r.y);var a=this._renderTexture.getDimensions();this._sprite.setTexture(i),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(e,t,n,a)}},{key:"_updateSprite",value:function(e,t,i,n){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new o.Rectangle(0,0,i.x,i.y))}},{key:"_getNextHighestPOT",value:function(e){return new o.Vector2(o.Utils.nextHighestPOT(e.x),o.Utils.nextHighestPOT(e.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(83);t.a={TextureShader:n.a}},function(e,t,i){e.exports={default:i(211),__esModule:!0}},function(e,t,i){i(212),e.exports=i(9).setImmediate},function(e,t,i){var n=i(15),r=i(77);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(214);i.d(t,"UnpremultiplyFilter",function(){return n.a});var r=i(216);i.d(t,"ColorOverlayFilter",function(){return r.a});var o=i(218);i.d(t,"TintFilter",function(){return o.a});var a=i(220);i.d(t,"OverlayFilter",function(){return a.a})},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(45);var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).call(this));return e._fragmentSource=i(215),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();t.a=c},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(45),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=f.c.OptionType,d=f.c.UniformType,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(217),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=this._options.color,s=r.getImageData(0,0,n.width,n.height),u=o.getImageData(0,0,n.width,n.height),l=n.width*n.height,c=new f.b,h=new f.b,p=0;p<4*l;p+=4){c.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),h.set(u.data[p]/255,u.data[p+1]/255,u.data[p+2]/255,u.data[p+3]/255);var _=h.r+c.a*(c.r-h.r);u.data[p]=255*(_+c.a*(a.r-_));var d=h.g+c.a*(c.g-h.g);u.data[p+1]=255*(d+c.a*(a.g-d));var y=h.b+c.a*(c.b-h.b);u.data[p+2]=255*(y+c.a*(a.b-y))}o.putImageData(u,0,0)}}]),t}();y.prototype.availableOptions={color:{type:_.COLOR,default:f.b.WHITE,uniformType:d.FLOAT4}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(45),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=f.c.OptionType,d=f.c.UniformType,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(219),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"_applyCanvas",value:function(e,i,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=i.getCanvas(),o=i.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),u=this._options,l=u.mode,c=u.color,h=c.r,p=c.g,_=c.b,d=c.a,y=[.2125,.7154,.0721];switch(l){case t.MODES.SOLID:for(var v=0;v<r.width*r.height;v++){var g=4*v;s.data[g]+=(255*h-s.data[g])*d,s.data[g+1]+=(255*p-s.data[g+1])*d,s.data[g+2]+=(255*_-s.data[g+2])*d}break;case t.MODES.COLORIZED:for(var m=0;m<r.width*r.height;m++){var b=4*m,k=s.data[b]/255*y[0]+s.data[b+1]/255*y[1]+s.data[b+2]/255*y[2],w=new f.b(k*h,k*p,k*_);s.data[b]+=(255*w.r-s.data[b])*d,s.data[b+1]+=(255*w.g-s.data[b+1])*d,s.data[b+2]+=(255*w.b-s.data[b+2])*d}}a.putImageData(s,0,0)}}]),t}();y.MODES={NONE:0,SOLID:1,COLORIZED:2},y.prototype.availableOptions={color:{type:_.COLOR,default:f.b.WHITE,uniformType:d.FLOAT4},mode:{type:_.NUMBER,default:y.MODES.NONE,uniformType:d.INT}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(8),h=i(45),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=f.c.OptionType,d=f.c.UniformType,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(221),a._lastImage=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"_applyCanvas",value:function(e,i,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=this._options.overlayTexture.getRenderTarget().getContext(),o=i.getCanvas(),a=i.getContext(),s=n.getContext(),u=a.getImageData(0,0,o.width,o.height),l=r.getImageData(0,0,o.width,o.height),c=this._options,h=c.blendMode,p=c.alpha,_=new f.b,d=new f.b,y=new f.b,v=0;v<o.width*o.height*4;v+=4){_.set(u.data[v]/255,u.data[v+1]/255,u.data[v+2]/255,u.data[v+3]/255),d.set(l.data[v]/255,l.data[v+1]/255,l.data[v+2]/255,l.data[v+3]/255);var g=void 0,m=void 0,b=void 0,k=void 0,w=void 0,x=void 0,T=void 0,C=void 0,E=void 0;switch(h){case t.BLEND_MODES.NORMAL:y.set(_.r+d.a*p*(d.r-_.r),_.g+d.a*p*(d.g-_.g),_.b+d.a*p*(d.b-_.b),_.a);break;case t.BLEND_MODES.OVERLAY:g=1-2*(1-_.r)*(1-d.r),m=2*_.r*d.r,b=g+(_.r<.5?1:0)*(m-g),k=1-2*(1-_.g)*(1-d.g),w=2*_.g*d.g,x=k+(_.g<.5?1:0)*(w-k),T=1-2*(1-_.b)*(1-d.b),C=2*_.b*d.b,E=T+(_.b<.5?1:0)*(C-T),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.HARD_LIGHT:g=1-2*(1-d.r)*(1-_.r),m=2*d.r*_.r,b=g+(d.r<.5?1:0)*(m-g),k=1-2*(1-d.g)*(1-_.g),w=2*d.g*_.g,x=k+(d.g<.5?1:0)*(w-k),T=1-2*(1-d.b)*(1-_.b),C=2*d.b*_.b,E=T+(d.b<.5?1:0)*(C-T),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.SOFT_LIGHT:g=2*_.r*(1-d.r)+(2*d.r-1)*Math.sqrt(_.r),m=2*_.r*d.r+_.r*_.r*(1-2*d.r),b=g+(d.r<.5?1:0)*(m-g),k=2*_.g*(1-d.g)+(2*d.g-1)*Math.sqrt(_.g),w=2*_.g*d.g+_.g*_.g*(1-2*d.g),x=k+(d.g<.5?1:0)*(w-k),T=2*_.b*(1-d.b)+(2*d.b-1)*Math.sqrt(_.b),C=2*_.b*d.b+_.b*_.b*(1-2*d.b),E=T+(d.b<.5?1:0)*(C-T),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.MULTIPLY:b=_.r*d.r,x=_.g*d.g,E=_.b*d.b,y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.DARKEN:b=Math.min(_.r,d.r),x=Math.min(_.g,d.g),E=Math.min(_.b,d.b),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.LIGHTEN:b=Math.max(_.r,d.r),x=Math.max(_.g,d.g),E=Math.max(_.b,d.b),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.SCREEN:b=1-(1-_.r)*(1-d.r),x=1-(1-_.g)*(1-d.g),E=1-(1-_.b)*(1-d.b),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a);break;case t.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-_.r)/Math.max(d.r,1e-6))),x=Math.max(0,Math.min(1,1-(1-_.g)/Math.max(d.g,1e-6))),E=Math.max(0,Math.min(1,1-(1-_.b)/Math.max(d.b,1e-6))),y.set(_.r+d.a*p*(b-_.r),_.g+d.a*p*(x-_.g),_.b+d.a*p*(E-_.b),_.a)}u.data[v]=255*y.r,u.data[v+1]=255*y.g,u.data[v+2]=255*y.b,u.data[v+3]=255*y.a}s.putImageData(u,0,0)}}]),t}();y.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},y.prototype.availableOptions={blendMode:{type:_.NUMBER,default:y.BLEND_MODES.NORMAL,uniformType:d.INT},overlayImage:{type:_.NUMBER,required:!0,uniformType:d.SAMPLER2D},overlayTexture:{type:_.OBJECT,required:!0},alpha:{type:_.NUMBER,default:1,uniformType:d.FLOAT}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), 1.0);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(11),c=i.n(l),f=i(19),h=i(223),p=i(41),_=i(47),d=i(225),y="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=function(e){return f.a.byteArrayToString(p.a.decode(e))};var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version="2.0",this._l="string"==typeof t?t.trim():t,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return v(e,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(e){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[g("YXBwX2lkZW50aWZpZXJz")].length)return!0;var e=window.location.hostname,t=!1;return this._decLic[g("YXBwX2lkZW50aWZpZXJz")].forEach(function(i){f.a.wildCardMatch(e,i)&&(t=!0)}),t}},{key:"_platformValid",value:function(){var e=this._decLic[g("cGxhdGZvcm0=")];return("undefined"==typeof WEBPACK?"Server":"HTML5")===e}},{key:"c",value:function(){var e=this;return new c.a(function(t,i){if("string"!==y(e._l)||!e._jsonValid()){var n=new Error;return n.code="ELICINVFMT",i(n)}if(!e._sigValid()){var r=new Error;return r.code="ELICINV",i(r)}if(!e._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",i(o)}if(!e._platformValid()){var a=new Error;return a.code="ELICINVPLAT",i(a)}if(e.isExp()){var s=new Error;return s.code="ELICEXP",i(s)}t()})}},{key:"isToolAllowed",value:function(e){return this._decLic[g("ZmVhdHVyZXM=")]&&-1!==this._decLic[g("ZmVhdHVyZXM=")].indexOf(e)}},{key:"t",value:function(){if(this._decLic.enterprise_license)return c.a.resolve();var e=this._decLic[g("ZG9tYWlucw==")][0]+g(g("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[g("YXBpX3Rva2Vu")];return new _.a(e).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[g("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[g("ZXhwaXJlc19hdA==")]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[g("ZXhwaXJlc19hdA==")]&&e>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[g("ZXhwaXJlc19hdA==")]}},{key:"_verify",value:function(e,t){return this._encodeMessage(e)===this._decodeSignature(t).substr(-64)}},{key:"_encodeMessage",value:function(e){return Object(d.a)(e)}},{key:"_decodeSignature",value:function(e){return e=p.a.decode(e),e=e.map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join(""),(e=this._parseBigInt(e,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(e,t){return new h.a(e,t)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[g("c2lnbmF0dXJl")]||"",delete this._decLic[g("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'+g("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}}]),e}();t.a=m},function(e,t,i){"use strict";
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */var n,r=r||{};function o(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new o(null)}"Microsoft Internet Explorer"==r.appName?(o.prototype.am=function(e,t,i,n,r,o){for(var a=32767&t,s=t>>15;--o>=0;){var u=32767&this[e],l=this[e++]>>15,c=s*u+l*a;r=((u=a*u+((32767&c)<<15)+i[n]+(1073741823&r))>>>30)+(c>>>15)+s*l+(r>>>30),i[n++]=1073741823&u}return r},n=30):"Netscape"!=r.appName?(o.prototype.am=function(e,t,i,n,r,o){for(;--o>=0;){var a=t*this[e++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=67108863&a}return r},n=26):(o.prototype.am=function(e,t,i,n,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var u=16383&this[e],l=this[e++]>>14,c=s*u+l*a;r=((u=a*u+((16383&c)<<14)+i[n]+r)>>28)+(c>>14)+s*l,i[n++]=268435455&u}return r},n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-n,o.prototype.F2=2*n-52;var s,u,l="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array;for(s="0".charCodeAt(0),u=0;u<=9;++u)c[s++]=u;for(s="a".charCodeAt(0),u=10;u<36;++u)c[s++]=u;for(s="A".charCodeAt(0),u=10;u<36;++u)c[s++]=u;function f(e){return l.charAt(e)}function h(e,t){var i=c[e.charCodeAt(t)];return null==i?-1:i}function p(e){var t=a();return t.fromInt(e),t}function _(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function d(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function g(e,t){return e|t}function m(e,t){return e^t}function b(e,t){return e&~t}function k(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function w(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function x(){}function T(e){return e}function C(e){this.r2=a(),this.q3=a(),o.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},o.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},o.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},o.prototype.fromString=function(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.t=0,this.s=0;for(var n=e.length,r=!1,a=0;--n>=0;){var s=8==i?255&e[n]:h(e,n);s<0?"-"==e.charAt(n)&&(r=!0):(r=!1,0==a?this[this.t++]=s:a+i>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=i)>=this.DB&&(a-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},o.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},o.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},o.prototype.lShiftTo=function(e,t){var i,n=e%this.DB,r=this.DB-n,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)t[i+a+1]=this[i]>>r|s,s=(this[i]&o)<<n;for(i=a-1;i>=0;--i)t[i]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},o.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,r=this.DB-n,o=(1<<n)-1;t[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)t[a-i-1]|=(this[a]&o)<<r,t[a-i]=this[a]>>n;n>0&&(t[this.t-i-1]|=(this.s&o)<<r),t.t=this.t-i,t.clamp()}},o.prototype.subTo=function(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e[i],t[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[i++]=this.DV+n:n>0&&(t[i++]=n),t.t=i,t.clamp()},o.prototype.multiplyTo=function(e,t){var i=this.abs(),n=e.abs(),r=i.t;for(t.t=r+n.t;--r>=0;)t[r]=0;for(r=0;r<n.t;++r)t[r+i.t]=i.am(0,n[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)},o.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},o.prototype.divRemTo=function(e,t,i){var n=e.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=a());var s=a(),u=this.s,l=e.s,c=this.DB-_(n[n.t-1]);c>0?(n.lShiftTo(c,s),r.lShiftTo(c,i)):(n.copyTo(s),r.copyTo(i));var f=s.t,h=s[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,v=1<<this.F2,g=i.t,m=g-f,b=null==t?a():t;for(s.dlShiftTo(m,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),o.ONE.dlShiftTo(f,b),b.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--m>=0;){var k=i[--g]==h?this.DM:Math.floor(i[g]*d+(i[g-1]+v)*y);if((i[g]+=s.am(0,k,i,m,0,f))<k)for(s.dlShiftTo(m,b),i.subTo(b,i);i[g]<--k;)i.subTo(b,i)}null!=t&&(i.drShiftTo(f,t),u!=l&&o.ZERO.subTo(t,t)),i.t=f,i.clamp(),c>0&&i.rShiftTo(c,i),u<0&&o.ZERO.subTo(i,i)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},o.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},o.prototype.exp=function(e,t){if(e>4294967295||e<1)return o.ONE;var i=a(),n=a(),r=t.convert(this),s=_(e)-1;for(r.copyTo(i);--s>=0;)if(t.sqrTo(i,n),(e&1<<s)>0)t.mulTo(n,r,i);else{var u=i;i=n,n=u}return t.revert(i)},o.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,n=(1<<t)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(i=this[a]>>s)>0&&(r=!0,o=f(i));a>=0;)s<t?(i=(this[a]&(1<<s)-1)<<t-s,i|=this[--a]>>(s+=this.DB-t)):(i=this[a]>>(s-=t)&n,s<=0&&(s+=this.DB,--a)),i>0&&(r=!0),r&&(o+=f(i));return r?o:"0"},o.prototype.negate=function(){var e=a();return o.ZERO.subTo(this,e),e},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+_(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},o.prototype.modPowInt=function(e,t){var i;return i=e<256||t.isEven()?new d(t):new y(t),this.exp(e,i)},o.ZERO=p(0),o.ONE=p(1),x.prototype.convert=T,x.prototype.revert=T,x.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},x.prototype.sqrTo=function(e,t){e.squareTo(t)},C.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},C.prototype.revert=function(e){return e},C.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},C.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},C.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],O=(1<<26)/E[E.length-1];o.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},o.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),n=p(i),r=a(),o=a(),s="";for(this.divRemTo(n,r,o);r.signum()>0;)s=(i+o.intValue()).toString(e).substr(1)+s,r.divRemTo(n,r,o);return o.intValue().toString(e)+s},o.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),n=Math.pow(t,i),r=!1,a=0,s=0,u=0;u<e.length;++u){var l=h(e,u);l<0?"-"==e.charAt(u)&&0==this.signum()&&(r=!0):(s=t*s+l,++a>=i&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),r&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(e,t,i){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(o.ONE.shiftLeft(e-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(o.ONE.shiftLeft(e-1),this);else{var n=new Array,r=7&e;n.length=1+(e>>3),t.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(e,t,i){var n,r,o=Math.min(e.t,this.t);for(n=0;n<o;++n)i[n]=t(this[n],e[n]);if(e.t<this.t){for(r=e.s&this.DM,n=o;n<this.t;++n)i[n]=t(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=o;n<e.t;++n)i[n]=t(r,e[n]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},o.prototype.changeBit=function(e,t){var i=o.ONE.shiftLeft(e);return this.bitwiseTo(i,t,i),i},o.prototype.addTo=function(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this[i]+e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n+=e[i],t[i++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[i++]=n:n<-1&&(t[i++]=this.DV+n),t.t=i,t.clamp()},o.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},o.prototype.multiplyLowerTo=function(e,t,i){var n,r=Math.min(this.t+e.t,t);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,e[r],i,r,0,this.t);for(n=Math.min(e.t,t);r<n;++r)this.am(0,e[r],i,r,0,t-r);i.clamp()},o.prototype.multiplyUpperTo=function(e,t,i){--t;var n=i.t=this.t+e.t-t;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)i[this.t+n-t]=this.am(t-n,e[n],i,0,0,this.t+n-t);i.clamp(),i.drShiftTo(1,i)},o.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(this.t>0)if(0==t)i=this[0]%e;else for(var n=this.t-1;n>=0;--n)i=(t*i+this[n])%e;return i},o.prototype.millerRabin=function(e){var t=this.subtract(o.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var n=t.shiftRight(i);(e=e+1>>1)>E.length&&(e=E.length);for(var r=a(),s=0;s<e;++s){r.fromInt(E[Math.floor(Math.random()*E.length)]);var u=r.modPow(n,this);if(0!=u.compareTo(o.ONE)&&0!=u.compareTo(t)){for(var l=1;l++<i&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},o.prototype.clone=function(){var e=a();return this.copyTo(e),e},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},o.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var i,n=this.DB-e*this.DB%8,r=0;if(e-- >0)for(n<this.DB&&(i=this[e]>>n)!=(this.s&this.DM)>>n&&(t[r++]=i|this.s<<this.DB-n);e>=0;)n<8?(i=(this[e]&(1<<n)-1)<<8-n,i|=this[--e]>>(n+=this.DB-8)):(i=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(t[r++]=i);return t},o.prototype.equals=function(e){return 0==this.compareTo(e)},o.prototype.min=function(e){return this.compareTo(e)<0?this:e},o.prototype.max=function(e){return this.compareTo(e)>0?this:e},o.prototype.and=function(e){var t=a();return this.bitwiseTo(e,v,t),t},o.prototype.or=function(e){var t=a();return this.bitwiseTo(e,g,t),t},o.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,m,t),t},o.prototype.andNot=function(e){var t=a();return this.bitwiseTo(e,b,t),t},o.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},o.prototype.shiftLeft=function(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},o.prototype.shiftRight=function(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},o.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+k(this[e]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i)e+=w(this[i]^t);return e},o.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},o.prototype.setBit=function(e){return this.changeBit(e,g)},o.prototype.clearBit=function(e){return this.changeBit(e,b)},o.prototype.flipBit=function(e){return this.changeBit(e,m)},o.prototype.add=function(e){var t=a();return this.addTo(e,t),t},o.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},o.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},o.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},o.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},o.prototype.divideAndRemainder=function(e){var t=a(),i=a();return this.divRemTo(e,t,i),new Array(t,i)},o.prototype.modPow=function(e,t){var i,n,r=e.bitLength(),o=p(1);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new d(t):t.isEven()?new C(t):new y(t);var s=new Array,u=3,l=i-1,c=(1<<i)-1;if(s[1]=n.convert(this),i>1){var f=a();for(n.sqrTo(s[1],f);u<=c;)s[u]=a(),n.mulTo(f,s[u-2],s[u]),u+=2}var h,v,g=e.t-1,m=!0,b=a();for(r=_(e[g])-1;g>=0;){for(r>=l?h=e[g]>>r-l&c:(h=(e[g]&(1<<r+1)-1)<<l-r,g>0&&(h|=e[g-1]>>this.DB+r-l)),u=i;0==(1&h);)h>>=1,--u;if((r-=u)<0&&(r+=this.DB,--g),m)s[h].copyTo(o),m=!1;else{for(;u>1;)n.sqrTo(o,b),n.sqrTo(b,o),u-=2;u>0?n.sqrTo(o,b):(v=o,o=b,b=v),n.mulTo(b,s[h],o)}for(;g>=0&&0==(e[g]&1<<r);)n.sqrTo(o,b),v=o,o=b,b=v,--r<0&&(r=this.DB-1,--g)}return n.revert(o)},o.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return o.ZERO;for(var i=e.clone(),n=this.clone(),r=p(1),a=p(0),s=p(0),u=p(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),t?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(e,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);i.compareTo(n)>=0?(i.subTo(n,i),t&&r.subTo(s,r),a.subTo(u,a)):(n.subTo(i,n),t&&s.subTo(r,s),u.subTo(a,u))}return 0!=n.compareTo(o.ONE)?o.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},o.prototype.pow=function(e){return this.exp(e,new x)},o.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),i=e.s<0?e.negate():e.clone();if(t.compareTo(i)<0){var n=t;t=i,i=n}var r=t.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return t;for(r<o&&(o=r),o>0&&(t.rShiftTo(o,t),i.rShiftTo(o,i));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),t.compareTo(i)>=0?(t.subTo(i,t),t.rShiftTo(1,t)):(i.subTo(t,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i},o.prototype.isProbablePrime=function(e){var t,i=this.abs();if(1==i.t&&i[0]<=E[E.length-1]){for(t=0;t<E.length;++t)if(i[0]==E[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<E.length;){for(var n=E[t],r=t+1;r<E.length&&n<O;)n*=E[r++];for(n=i.modInt(n);t<r;)if(n%E[t++]==0)return!1}return i.millerRabin(e)},o.prototype.square=function(){var e=a();return this.squareTo(e),e},t.a=o},function(e,t){e.exports=require("url")},function(e,t,i){"use strict";
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function n(e){var t=8,i=0;function n(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function r(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function a(e,t,i){return e&t^~e&i}function s(e,t,i){return e&t^e&i^t&i}function u(e){return r(e,2)^r(e,13)^r(e,22)}function l(e){return r(e,6)^r(e,11)^r(e,25)}function c(e){return r(e,7)^r(e,18)^o(e,3)}return function(e){for(var t=i?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>8*(3-r%4)+4&15)+t.charAt(e[r>>2]>>8*(3-r%4)&15);return n}(function(e,t){var i,f,h,p,_,d,y,v,g,m,b,k=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var T=0;T<e.length;T+=16){i=w[0],f=w[1],h=w[2],p=w[3],_=w[4],d=w[5],y=w[6],v=w[7];for(var C=0;C<64;C++)x[C]=C<16?e[C+T]:n(n(n(r(b=x[C-2],17)^r(b,19)^o(b,10),x[C-7]),c(x[C-15])),x[C-16]),g=n(n(n(n(v,l(_)),a(_,d,y)),k[C]),x[C]),m=n(u(i),s(i,f,h)),v=y,y=d,d=_,_=n(p,g),p=h,h=f,f=i,i=n(g,m);w[0]=n(i,w[0]),w[1]=n(f,w[1]),w[2]=n(h,w[2]),w[3]=n(p,w[3]),w[4]=n(_,w[4]),w[5]=n(d,w[5]),w[6]=n(y,w[6]),w[7]=n(v,w[7])}return w}(function(e){for(var i=Array(),n=(1<<t)-1,r=0;r<e.length*t;r+=t)i[r>>5]|=(e.charCodeAt(r/t)&n)<<24-r%32;return i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)),e.length*t))}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"b",function(){return r}),i.d(t,"a",function(){return o});for(
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
var n="undefined"==typeof window?global:window,r=n.requestAnimationFrame,o=n.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],u=0;u<s.length&&!r;++u)r=n[s[u]+"RequestAnimationFrame"],o=n[s[u]+"CancelAnimationFrame"]||n[s[u]+"CancelRequestAnimationFrame"];r&&(r=r.bind(n)),o&&(o=o.bind(n)),r||(r=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),r=setTimeout(function(){e(i+n)},n);return a=i+n,r}),o||(o=function(e){clearTimeout(e)})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i,this.z=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return o(e,[{key:"set",value:function(e,t,i){return this.x=e,this.y=t,this.z=i,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clamp",value:function(t,i){var n=null!==t&&void 0!==t,r=null!==i&&void 0!==i;return t instanceof e||!n||(t=new e(t,t,t)),i instanceof e||!r||(i=new e(i,i,i)),n&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y),this.z=Math.max(t.z,this.z)),r&&(this.x=Math.min(i.x,this.x),this.y=Math.min(i.y,this.y),this.z=Math.min(i.z,this.z)),this}},{key:"divide",value:function(t){return t instanceof e?(this.x/=t.x,this.y/=t.y,this.z/=t.z):(this.x/=t,this.y/=t,this.z/=t),this}},{key:"subtract",value:function(t){return t instanceof e?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t),this}},{key:"multiply",value:function(t){return t instanceof e?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t),this}},{key:"add",value:function(t){return t instanceof e?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t),this}},{key:"equals",value:function(t){return t instanceof e?t.x===this.x&&t.y===this.y&&t.z===this.z:t===this.x&&t===this.y&&t===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y,t.z)}},{key:"NULL",get:function(){return new e(0,0,0)}}]),e}();t.a=a},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(33),h=i(29),p=i(34),_=i(122),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=f.Constants.OptionType,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,_["a"]),d(t,[{key:"_getRotation",value:function(){var e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90}return e}},{key:"_getFlipVertically",value:function(){var e=this.getTags().Orientation;return-1!==[5,7].indexOf(e)}},{key:"_getFlipHorizontally",value:function(){var e=this.getTags().Orientation;return-1!==[2,4].indexOf(e)}},{key:"_getFinalOptions",value:function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(e){var t=this._getFinalOptions(),i=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var n=this._sprite.getBounds();return this._renderTexture.resizeTo(new p.a(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),h.a.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}}]),t}();v.identifier="exif-orientation",v.prototype.availableOptions={tags:{type:y.OBJECT,default:{}}},t.a=v},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(33),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version=t,this._check()}return a(e,[{key:"_check",value:function(){var e=this;if("undefined"==typeof document)return o.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var t=this;window.imglySDKVersionCallback=function(i){i.outdated&&o.Log.warn(e.constructor.name,"Your Version "+t._version+" is outdated. Current version is "+i.version+".")};var i=document.createElement("script");i.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,i.async=!0,document.getElementsByTagName("head")[0].appendChild(i)}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(88),a=i(89),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=a.a.MARKERS,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0)}return s(e,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==u.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var e=this._stream.readString(4),t=this._stream.readInt8();return"JFIF"===e&&0===t}},{key:"setUnitDensity",value:function(e){this._stream.setHead(11),this._stream.writeInt8(e)}},{key:"setDensityX",value:function(e){this._stream.setHead(12),this._stream.writeInt16(e)}},{key:"setDensityY",value:function(e){this._stream.setHead(13),this._stream.writeInt16(e)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}}]),e}();t.a=l},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(88),a=i(89),s=i(19),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=s.a.invariant,c=a.a.MARKERS,f=a.a.EXIF_TAGS,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0),this._parse()}return u(e,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var e=this._stream.getHead(),t=!1,i=this._stream.readInt16();18761===i?t=!1:19789===i?t=!0:l(!1,"Invalid TIFF data: No endian type found"),l(42===this._stream.readInt16(!t),"Invalid TIFF data: No 0x002A");var n=this._stream.readInt32(!t);l(n>=8,"Invalid TIFF data: First IFD offset < 8");var r=e+n,o=this._readTags(this._stream,e,r,t);this._tags=o.tags,this._tagData=o.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(e){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._stream.setHead(t+8),this._stream.writeInt16(e)}}},{key:"_readTags",value:function(e,t,i,n){e.setHead(i);for(var r=e.readInt16(!n),o={},a=[],s=0;s<r;s++){var u=i+12*s+2;e.setHead(u);var l=e.readInt16(!n),c=void 0,h=void 0,p=void 0;if(f[l]){l=f[l],c=e.readInt16(!n),h=e.readInt32(!n),p=e.readInt32(!n)+t;var _=null;switch(c){case 1:case 7:if(1===h)_=e.readInt8(!n);else{_=[];for(var d=0;d<h;d++)_.push(e.readInt8(!n))}break;case 2:e.setHead(h>4?p:u+8),_=e.readString(h);break;case 3:if(e.setHead(h>2?p:u+8),1===h)_=e.readInt16(!n);else{_=[];for(var y=0;y<h;y++)_.push(e.readInt16(!n))}break;case 4:case 9:if(e.setHead(h>1?p:u+8),1===h)_=e.readInt32(!n);else{_=[];for(var v=0;v<h;v++)_.push(e.readInt32(!n))}break;case 5:case 10:if(e.setHead(p),1===h){_=e.readInt32(!n)/e.readInt32(!n)}else{_=[];for(var g=0;g<h;g++){var m=e.readInt32(!n)/e.readInt32(!n);_.push(m)}}}o[l]=_,a[l]={value:_,numValues:h,entryOffset:u,valueOffset:p,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),e}();t.a=h},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(11),c=i.n(l),f=i(1),h=i.n(f),p=i(28),_=i(55),d=i(19),y=i(87),v=i(46),g=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var m=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,i));return n._sdk=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,v["a"]),g(t,[{key:"export",value:function(){var e=this,t=this._sdk.getRenderer(),n=this._options,r=n.renderType,o=n.imageFormat,a=n.quality;return this.validateSettings().then(function(){return e._prepareSDK()}).then(function(n){var s=t.getCanvas();t.isOfType(p.RendererType.WEBGL)&&(s=e._createCanvasFromTexture(n));var u=void 0;if(r===p.RenderType.IMAGE||r===p.RenderType.DATAURL){u="undefined"==typeof window?s.toDataURL(o):s.toDataURL(o,a);var l=e._sdk.getImage(),f=y.a.isJPEG(l.src),h=y.a.isJPEG(u);if(f&&h){var _=e._sdk.getExif();_&&(u=_.restoreSegments(u))}}if(r===p.RenderType.IMAGE){var d=void 0;return(d=new(0,i(20).Image)).src=u,d}if(r===p.RenderType.DATAURL)return u;if(r===p.RenderType.BUFFER)switch(o){case p.ImageFormat.JPEG:return new c.a(function(e,t){var i=s.createJPEGStream({bufsize:2048,quality:100*a|0}),n=[];i.on("data",function(e){return n.push(e)}),i.on("end",function(){return e(Buffer.concat(n))})});case p.ImageFormat.PNG:return c.a.resolve(s.toBuffer());default:return c.a.reject(new Error("Invalid ImageFormat: "+o))}else{if(r===p.RenderType.MSBLOB)return s.msToBlob();if(r===p.RenderType.BLOB)return new c.a(function(e,t){s.toBlob(function(t){e(t)},o,a)})}}).then(function(t){return e._restoreSDK().then(function(){return t})})}},{key:"_prepareSDK",value:function(){var e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var t=e.isOfType(p.RendererType.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);var i=this._sdk.getOperationsStack();return i.forEach(function(e){e.disposeRenderTextures()}),i.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var e=this._sdk.getRenderer(),t=e.isOfType(p.RendererType.CANVAS);return e.setPixelRatio(this._sdkSettings.pixelRatio),e.resizeTo(this._sdkSettings.dimensions,t),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(e){var t=this._sdk.getRenderer(),i=this._sdk.getFinalDimensions(),n=this._sdk.getRenderer().getContext(),r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r);var o=e.getBaseTexture().getGLTextureForRenderer(t);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var a=new Uint8Array(i.x*i.y*4);n.readPixels(0,0,i.x,i.y,n.RGBA,n.UNSIGNED_BYTE,a);var s=void 0;if(this._checkPixelsForTransparency(a)){var u=new _.a.Sprite(e);u.setFilters([new _.a.Filters.UnpremultiplyFilter]);var l=new _.a.Container;l.addChild(u),(s=new _.a.RenderTexture(t,i.x,i.y)).render(l);var c=s.getBaseTexture().getGLTextureForRenderer(t);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,c,0),n.readPixels(0,0,i.x,i.y,n.RGBA,n.UNSIGNED_BYTE,a),t.setRenderTarget(),s.dispose()}var f=d.a.createCanvas();f.width=i.x,f.height=i.y;var h=f.getContext("2d"),p=h.createImageData(i.x,i.y);return p.data.set(a),h.putImageData(p,0,0),n.deleteFramebuffer(r),f}},{key:"_checkPixelsForTransparency",value:function(e){for(var t=this._sdk.getFinalDimensions(),i=t.x*t.y*4,n=3;n<i;n+=4)if(255!==e[n])return!0;return!1}}]),t}();m.prototype.availableOptions={renderType:{type:p.OptionType.STRING,available:d.a.values(p.RenderType),default:p.RenderType.IMAGE},imageFormat:{type:p.OptionType.STRING,available:d.a.values(p.ImageFormat),default:p.ImageFormat.PNG},quality:{type:p.OptionType.NUMBER,default:.8}},t.a=m},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}]),e}();t.a=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(48);i.d(t,"ImageLoader",function(){return n.a});var r=i(47);i.d(t,"JSONLoader",function(){return r.a})},function(e,t){e.exports=require("fs")},function(e,t){e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),r=i.n(n),o=i(238),a=i(242),s=i(244),u=i(307),l=i(308),c=i(311),f=i(314),h=i(315),p=i(316),_=i(319),d=i(325),y=i(330),v=i(332),g=[o.a,a.a,s.a,u.a,l.a,c.a,f.a,h.a,p.a,_.a,d.a,y.a,v.a];r.a.AllOperations=g,t.default=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(126),y=i(240),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=p.Math.ColorMatrix,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._clarityFilter=new y.a,o._filter=new d.a,o._sprite.setFilters([o._clarityFilter,o._filter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),v(t,[{key:"_render",value:function(e){var t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;var i=new g;i.multiply(g.createSaturationMatrix(-.3*this._options.clarity+1)),i.multiply(g.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:i,colorOffset:i.getOffsets()});var n=new g;return n.multiply(g.createExposureMatrix(this._options.exposure)),n.multiply(g.createSaturationMatrix(this._options.saturation+1)),n.multiply(g.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),n.multiply(g.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:n,colorOffset:n.getOffsets()}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose()}}]),t}();m.identifier="adjustments",m.prototype.availableOptions={brightness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:p.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:p.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},_.a.Operations.AdjustmentsOperation=m,t.a=m},function(e,t){e.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  color.rgb *= color.a; // Do premultiplie alpha\n\n  gl_FragColor = color;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p=f.Math.Vector2,_=f.Math.ColorMatrix,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(241),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),h(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=i.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.clarity,s=this._options.colorMatrix,u=new f.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),l=r.width,c=r.height,h=o.getImageData(0,0,l,c),p=n.createImageData(l,c);this.canvasShader(h,p,a,s,u),n.putImageData(p,0,0)}},{key:"canvasShader",value:function(e,t,i,n,r){for(var o=function(e,t,i){return Math.min(Math.max(e,t),i)},a=function(e,t,i){var n=o((i-e)/(t-e),0,1);return n*n*(3-2*n)},s=4*e.width,u=e.data.length,l=u-1,c=e.data,h=t.data,p=new f.Color,_=function(e){return c[e=(e=e<0?0:e)>l?l:e]},d=0;d<u;d+=4){var y=_(d+0),v=_(d+1),g=_(d+2),m=_(d+3),b=(y+_(d-4-s+0)+_(d-4+0)+_(d-4+s+0)+_(d-s+0)+_(d+s+0)+_(d+4-s+0)+_(d+4+0)+_(d+4+s))/2295,k=(v+_(d-4-s+1)+_(d-4+1)+_(d-4+s+1)+_(d-s+1)+_(d+s+1)+_(d+4-s+1)+_(d+4+1)+_(d+4+s+1))/2295,w=(g+_(d-4-s+2)+_(d-4+2)+_(d-4+s+2)+_(d-s+2)+_(d+s+2)+_(d+4-s+2)+_(d+4+2)+_(d+4+s+2))/2295,x=(m+_(d-4-s+3)+_(d-4+3)+_(d-4+s+3)+_(d-s+3)+_(d+s+3)+_(d+4-s+3)+_(d+4+3)+_(d+4+s+3))/2295;m/=255;var T=o(.3*(y/=255)+.59*(v/=255)+.1*(g/=255),.111111,.999999),C=Math.min(a(1-T,0,.11),a(T,0,.11)),E=3.7*i*C,O=Math.pow(2,.27*i*C),R=o(y+o((y-b)*E,0,10),0,1)*O,S=o(v+o((v-k)*E,0,10),0,1)*O,F=o(g+o((g-w)*E,0,10),0,1)*O,M=o(m+o((m-x)*E,0,10),0,1);p.set(R,S,F,M);var D=n.apply(p).add(r);h[d+0]=255*D.r,h[d+1]=255*D.g,h[d+2]=255*D.b,h[d+3]=255*D.a}}}]),t}();d.prototype.availableOptions={clarity:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},pixelDimension:{type:f.OptionType.VECTOR2,default:new p(100,100),uniformType:f.UniformType.FLOAT2},colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new _,uniformType:f.UniformType.MAT4},colorOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}},t.a=d},function(e,t){e.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n\n    vec4 mergedColor = color;\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor /= 9.0;\n\n    color.rgb /= max(color.a, EPSILON);       // Revert premultiplied alpha\n    mergedColor.rgb /= max(mergedColor.a, EPSILON); // Revert premultiplied alpha\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0);\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n\n\n    color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n    color.rgb *= color.a; // Do premultiplie alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(127),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=p.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._lastBlurRadius=o._options.blurRadius,o._horizontalFilter=new d.a,o._verticalFilter=new d.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new d.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),y(t,[{key:"_renderWebGL",value:function(e){var t=e.getDimensions(),i=t.min(),n={blurRadius:this._options.blurRadius*i,texSize:t};return this._horizontalFilter.set(n),this._verticalFilter.set(n),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderCanvas",value:function(e){var t=this._options.blurRadius,i=e.getDimensions();return this._filter.set({blurRadius:t,texSize:i}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"transform",value:function(e){var t=this.getBlurRadius(),i=e.applyToRelativeSize(t);this.set({blurRadius:i},!1)}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();g.identifier="blur",g.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.025}},_.a.Operations.BlurOperation=g,t.a=g},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(e,t,i){"use strict";var n=i(80),r=i.n(n),o=i(0),a=i.n(o),s=i(7),u=i.n(s),l=i(2),c=i.n(l),f=i(3),h=i.n(f),p=i(1),_=i.n(p),d=i(4),y=i.n(d),v=i(128),g=i(6),m=i(275),b=i(5),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},w=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),x=function e(t,i,n){null===t&&(t=Function.prototype);var r=u()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||_()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,d["Operation"]),w(t,[{key:"_render",value:function(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}},{key:"render",value:function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?d.Promise.resolve(e):x(t.prototype.__proto__||_()(t.prototype),"render",this).call(this,e)}},{key:"setDirtyForRenderer",value:function(e,i){x(t.prototype.__proto__||_()(t.prototype),"setDirtyForRenderer",this).call(this,e,i),this._selectedFilter.setDirtyForRenderer(e,i)}},{key:"disposeRenderTextures",value:function(){x(t.prototype.__proto__||_()(t.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){x(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(e){var t=k({},e);if(delete t.filter,e.filter){var i=e.filter.constructor;"3d-lut"===i.identifier?this.setFilter(new i({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):this.setFilter(new i)}this.set(t)}}]),t}();T.identifier="filter",T.prototype.availableOptions={identifier:{type:d.OptionType.STRING,default:"identity"},intensity:{type:d.OptionType.NUMBER,default:1,setter:function(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:d.OptionType.OBJECT,default:new v.a,setter:function(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},T.FilterPrimitives=g,T.Filters=m,T.Filter=b.a,y.a.Operations.FilterOperation=T,t.a=T},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=function(e){function t(){p(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(246),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),h(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getCanvas(),r=i.getContext(),o=this._options.filteredCanvas;r.save(),r.drawImage(n,0,0),r.globalAlpha=this._options.intensity,r.drawImage(o,0,0),r.restore()}}]),t}();_.prototype.availableOptions={filteredImage:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.INT},filteredCanvas:{type:f.OptionType.OBJECT,default:null},intensity:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;p(this,e),this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new f.Engine.Container,this._sprite=new f.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new _}return h(e,[{key:"push",value:function(e){this._stack.push(e)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(e,t,i){if(0===this._stack.length)return f.Promise.resolve();var n=e.getRenderer();this._sprite.setTexture(t);var r=this._renderTextures[n.id];if(!r){var o=e.getSprite().getTexture().getFrame();r=new f.Engine.RenderTexture(e.getRenderer(),o.width,o.height),this._renderTextures[n.id]=r}var a=i.getDimensions();r.resizeTo(a);var s=this.isDirtyForRenderer(n);if(s){this._stack.forEach(function(t){t.update(e)});var u=this._stack.map(function(e){return e.getFilter()});this._sprite.setFilters(u),r.render(this._container),this.setDirtyForRenderer(!1,n)}if(this._blendFilter.setIntensity(this._intensity),n.isOfType(f.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(r.getRenderTarget().getCanvas());else if(n.isOfType(f.RendererType.WEBGL)){var l=r.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),n.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),i.clear(f.Color.TRANSPARENT),i.render(this._container),s&&this.disposeRenderTextures(),f.Promise.resolve(i)}},{key:"setIntensity",value:function(e){this._intensity=e}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this._dirtiness[t]=e}},{key:"disposeRenderTextures",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach(function(e){return e.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),e}();t.a=d},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(248),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.brightness;if(0!==s){s*=255;for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}}}]),t}();v.prototype.availableOptions={brightness:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(250),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.contrast;if(1!==s){for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}}}]),t}();v.prototype.availableOptions={contrast:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=f.Math.ColorMatrix,g=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(252),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.colorMatrix,u=new f.Color(0,0,0,0),l=0;l<n.width*n.height;l++){var c=4*l;u.r=a.data[c]/255,u.g=a.data[c+1]/255,u.b=a.data[c+2]/255,u=s.apply(u),a.data[c]=255*u.r,a.data[c+1]=255*u.g,a.data[c+2]=255*u.b}o.putImageData(a,0,0)}}]),t}();g.prototype.availableOptions={colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new v,uniformType:f.UniformType.MAT4},colorMatrixOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}};var m=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new g,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),t}();m.prototype.availableOptions=g.prototype.availableOptions,t.a=m},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(254),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=[.3,.59,.11],u=this._options.desaturation,l=0;l<n.width*n.height;l++){var c=4*l,f=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*f-a.data[c])*u,a.data[c+1]+=(255*f-a.data[c+1])*u,a.data[c+2]+=(255*f-a.data[c+2])*u}o.putImageData(a,0,0)}}]),t}();v.prototype.availableOptions={desaturation:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(256),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,s.r);for(var c=new Float32Array(256),f=0;f<256;f++)c[f]=255*Math.pow(f/255,s.g);for(var h=new Float32Array(256),p=0;p<256;p++)h[p]=255*Math.pow(p/255,s.b);for(var _=0;_<n.width*n.height;_++){var d=4*_;a.data[d]=u[a.data[d]],a.data[d+1]=c[a.data[d+1]],a.data[d+2]=h[a.data[d+2]]}o.putImageData(a,0,0)}}]),t}();v.prototype.availableOptions={gamma:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(258),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n,r=t.getCanvas(),o=t.getContext(),a=i.getContext(),s=o.getImageData(0,0,r.width,r.height),u=this._options.color,l=0;l<r.width;l++)for(var c=0;c<r.height;c++){var f=4*(r.width*c+l),h=(l/r.width-.5)/.75,p=(c/r.height-.5)/.75;n=1-(h*h+p*p),n=Math.min(Math.max(n,.1),1),s.data[f]=s.data[f]*(n*u.r),s.data[f+1]=s.data[f+1]*(n*u.g),s.data[f+2]=s.data[f+2]*(n*u.b),s.data[f+3]=255}a.putImageData(s,0,0)}}]),t}();v.prototype.availableOptions={color:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(260),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)}}]),t}(),g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),t}();t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(262),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s),c=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),t}(),g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),t}();t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(7),r=i.n(n),o=i(0),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(13)),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var m=p.Math.Vector2,b=function(e){function t(){y(this,t);var e=v(this,(t.__proto__||h()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=i(265),e}return g(t,p["Engine"].Filter),d(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,i=new m;i.y=.125*(0|t)|0,i.x=(0|t)-8*i.y,this._quads.push(i)}}},{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),u=r.getImageData(0,0,n.width,n.height),l=s.getImageData(0,0,a.width,a.height),c=new m,f=0;f<n.width*n.height*4;f+=4){var h=u.data[f],p=u.data[f+1],_=u.data[f+2],d=u.data[f+3]/255,y=this._quads[_];c.x=64*y.x,c.y=64*y.y,c.x+=Math.floor(h/4),c.y+=Math.floor(p/4);var v=4*(a.width*c.y+c.x)|0,g=l.data[v];g=h*(1-d)+g*d;var b=l.data[v+1];b=p*(1-d)+b*d;var k=l.data[v+2];k=_*(1-d)+k*d,u.data[f]=g,u.data[f+1]=b,u.data[f+2]=k}o.putImageData(u,0,0)}},{key:"_createImageCanvas",value:function(e){var t=p.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}();b.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null}};var k=function(e){function t(){var e;y(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._filter=new b,o._textures={},o}return g(t,_["a"]),d(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),i=t.id;this._textures[i]||(this._textures[i]=new p.Engine.BaseTexture);var n=this._textures[i];n.setSource(this._options.image),n.setGLUnit(3),t.updateTexture(n)}},{key:"dispose",value:function(){for(var e in function e(t,i,n){null===t&&(t=Function.prototype);var o=r()(t,i);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}();k.prototype.availableOptions={image:{type:p.OptionType.IMAGE}},t.a=k},function(e,t){e.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(267),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=this._options.saturation,u=0;u<n.width;u++)for(var l=0;l<n.height;l++){var c=4*(n.width*l+u),f=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=f*(1-s)+a.data[c]*s,a.data[c+1]=f*(1-s)+a.data[c+1]*s,a.data[c+2]=f*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),t}();v.prototype.availableOptions={saturation:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(269),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)}}]),t}();v.prototype.availableOptions={color:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),p(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}();g.prototype.availableOptions=v.prototype.availableOptions,t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(129)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._options.rgbControlPoints||(o._options.rgbControlPoints={red:o._options.controlPoints,green:o._options.controlPoints,blue:o._options.controlPoints}),o._updateLookupTable(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"_updateLookupTable",value:function(){var e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,i)}},{key:"_buildLookupTable",value:function(e,t,i){for(var n=[],r=0;r<256;r++)n.push(Math.min(Math.max(r+e[r],0),255)),n.push(Math.min(Math.max(r+t[r],0),255)),n.push(Math.min(Math.max(r+i[r],0),255)),n.push(255);return n}},{key:"_calculateSplineCurve",value:function(e){e=e.sort(function(e,t){return e[0]>t[0]});var t,i=this._getSplineCurve(e),n=i[0];if(n[0]>0)for(t=0;t<n[0];t++)i.unshift([0,0]);var r=[];for(t=0;t<i.length;t++){var o=i[t],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),r.push(s)}return r}},{key:"_getSplineCurve",value:function(e){var t,i=this._secondDerivative(e),n=i.length,r=[];for(t=0;t<n;t++)r[t]=i[t];var o=[];for(t=0;t<n-1;t++)for(var a=e[t],s=e[t+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),c=1-l,f=l,h=s[0]-a[0],p=c*a[1]+f*s[1]+h*h/6*((c*c*c-c)*r[t]+(f*f*f-f)*r[t+1]);p>255?p=255:p<0&&(p=0),o.push([u,p])}return 255===o.length&&o.push(e[e.length-1]),o}},{key:"_secondDerivative",value:function(e){var t=e.length;if(t<=0||1===t)return null;var i,n,r=[],o=[];for(r[0]=[0,1,0],i=1;i<t-1;i++){var a=e[i-1],s=e[i],u=e[i+1];r[i]=r[i]||[],r[i][0]=(s[0]-a[0])/6,r[i][1]=(u[0]-a[0])/3,r[i][2]=(u[0]-s[0])/6,o[i]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[t-1]=0,r[t-1]=[0,1,0],i=1;i<t;i++)n=r[1][0]/r[i-1][1],r[i][1]-=n*r[i-1][2],r[i][0]=0,o[i]-=n*o[i-1];for(i=t-2;i>0;i--)n=r[i][2]/r[i+1][1],r[i][1]-=n*r[i+1][0],r[i][2]=0,o[i]-=n*o[i+1];var l=[];for(i=0;i<t;i++)l[i]=o[i]/r[i][1];return l}}]),t}();_.prototype.availableOptions={rgbControlPoints:{type:f.OptionType.OBJECT},controlPoints:{type:f.OptionType.ARRAY,default:[]},textureGLUnit:{type:f.OptionType.NUMBER,default:1}},t.a=_},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(13)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var v=function(e){function t(){_(this,t);var e=d(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(272),e}return y(t,f["Engine"].Filter),p(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=r.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s),c=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),t}(),g=function(e){function t(){var e;_(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));return o._filter=new v,o}return y(t,h["a"]),t}();t.a=g},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(e,t,i){"use strict";var n=i(7),r=i.n(n),o=i(0),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(13)),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var m=p.Math.Vector2,b=p.Math.Vector3,k=function(e){function t(){y(this,t);var e=v(this,(t.__proto__||h()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=i(274),e}return g(t,p["Engine"].Filter),d(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,i=new m;i.y=.125*(0|t)|0,i.x=(0|t)-8*i.y,this._quads.push(i)}}},{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=this._options,r=n.resolution,o=n.horizontalTileCount,a=n.verticalTileCount,s=t.getCanvas(),u=t.getContext(),l=i.getContext(),c=this._options.lookupTableImage,f=this._createImageCanvas(c).getContext("2d"),h=u.getImageData(0,0,s.width,s.height),_=f.getImageData(0,0,c.width,c.height),d=new b(r/o-1|0,r/a-1|0,o*a-1|0),y=new p.Color,v=new p.Color,g=new p.Color,k=new p.Color,w=new p.Color,x=new p.Color,T=new p.Color,C=new p.Color,E=new m,O=new m,R=function(e,t,i,n){e.r=t.r*(1-n)+i.r*n,e.g=t.g*(1-n)+i.g*n,e.b=t.b*(1-n)+i.b*n},S=function(e,t,i){var n=4*((i=.5+i|0)*r+(t=.5+t|0));e.r=_.data[n]/255,e.g=_.data[n+1]/255,e.b=_.data[n+2]/255,e.a=_.data[n+3]/255},F=new p.Color,M=new p.Color,D=function(e,t,i,n,r,o,a){R(F,t,n,o),R(M,i,r,o),R(e,F,M,a)},B=new m(r,r).divide(o,a).floor(),I=0;I<s.width*s.height*4;I+=4){y.set(h.data[I]/255,h.data[I+1]/255,h.data[I+2]/255,h.data[I+3]/255);var A=new b(y.r*d.x,y.g*d.y,y.b*d.z),L=A.clone().floor().toInt(),N=A.clone().ceil().toInt(),P=A.clone().fract();E.y=L.z/o|0,E.x=L.z-E.y*o|0,O.y=N.z/o|0,O.x=N.z-O.y*o|0,E.multiply(B),O.multiply(B),S(w,E.x+L.x,E.y+L.y),S(x,E.x+L.x,E.y+N.y),S(T,E.x+N.x,E.y+L.y),S(C,E.x+N.x,E.y+N.y),D(g,w,x,T,C,P.x,P.y),S(w,O.x+L.x,O.y+L.y),S(x,O.x+L.x,O.y+N.y),S(T,O.x+N.x,O.y+L.y),S(C,O.x+N.x,O.y+N.y),D(k,w,x,T,C,P.x,P.y),R(v,g,k,P.z),h.data[I]=Math.ceil(255*v.r),h.data[I+1]=Math.ceil(255*v.g),h.data[I+2]=Math.ceil(255*v.b)}l.putImageData(h,0,0)}},{key:"_createImageCanvas",value:function(e){var t=p.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}();k.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null},resolution:{type:p.OptionType.NUMBER,default:128,uniformType:p.UniformType.FLOAT},horizontalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT},verticalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT}};var w=function(e){function t(){var e;y(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._filter=new k,o._textures={},o}return g(t,_["a"]),d(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var i=this._options,n=i.resolution,r=i.verticalTileCount,o=i.horizontalTileCount;this._filter.set({resolution:n,verticalTileCount:r,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),i=t.id;this._textures[i]||(this._textures[i]=new p.Engine.BaseTexture);var n=this._textures[i];n.setSource(this._options.image),n.setGLUnit(3),n.setMinFilter(p.Engine.BaseTexture.NearestFilter),t.updateTexture(n)}},{key:"dispose",value:function(){for(var e in function e(t,i,n){null===t&&(t=Function.prototype);var o=r()(t,i);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}();w.prototype.availableOptions={image:{type:p.OptionType.IMAGE},resolution:{type:p.OptionType.NUMBER,default:128},horizontalTileCount:{type:p.OptionType.NUMBER,default:5},verticalTileCount:{type:p.OptionType.NUMBER,default:5}},t.a=w},function(e,t){e.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(128);i.d(t,"IdentityFilter",function(){return n.a});var r=i(276);i.d(t,"A15Filter",function(){return r.a});var o=i(277);i.d(t,"BreezeFilter",function(){return o.a});var a=i(278);i.d(t,"BWFilter",function(){return a.a});var s=i(279);i.d(t,"BWHardFilter",function(){return s.a});var u=i(280);i.d(t,"CelsiusFilter",function(){return u.a});var l=i(281);i.d(t,"ChestFilter",function(){return l.a});var c=i(282);i.d(t,"FixieFilter",function(){return c.a});var f=i(283);i.d(t,"FoodFilter",function(){return f.a});var h=i(284);i.d(t,"FridgeFilter",function(){return h.a});var p=i(285);i.d(t,"FrontFilter",function(){return p.a});var _=i(286);i.d(t,"GlamFilter",function(){return _.a});var d=i(287);i.d(t,"GobblinFilter",function(){return d.a});var y=i(288);i.d(t,"K1Filter",function(){return y.a});var v=i(289);i.d(t,"K2Filter",function(){return v.a});var g=i(290);i.d(t,"K6Filter",function(){return g.a});var m=i(291);i.d(t,"KDynamicFilter",function(){return m.a});var b=i(292);i.d(t,"LeninFilter",function(){return b.a});var k=i(293);i.d(t,"LomoFilter",function(){return k.a});var w=i(294);i.d(t,"MellowFilter",function(){return w.a});var x=i(295);i.d(t,"MetalFilter",function(){return x.a});var T=i(296);i.d(t,"MorningFilter",function(){return T.a});var C=i(297);i.d(t,"OrchidFilter",function(){return C.a});var E=i(298);i.d(t,"PolaFilter",function(){return E.a});var O=i(299);i.d(t,"Pola669Filter",function(){return O.a});var R=i(300);i.d(t,"QuoziFilter",function(){return R.a});var S=i(301);i.d(t,"SemiredFilter",function(){return S.a});var F=i(302);i.d(t,"SunnyFilter",function(){return F.a});var M=i(303);i.d(t,"TexasFilter",function(){return M.a});var D=i(304);i.d(t,"X400Filter",function(){return D.a});var B=i(305);i.d(t,"LUTFilter",function(){return B.a});var I=i(306);i.d(t,"ThreeDLUTFilter",function(){return I.a})},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Contrast({contrast:.63})),o._stack.push(new c.Brightness({brightness:.12})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="a15",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Desaturation({desaturation:.5})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="breeze",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Grayscale),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="bw",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Grayscale),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="bwhard",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="celsius",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="chest",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="fixie",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Saturation({saturation:1.35})),o._stack.push(new c.Contrast({contrast:1.1})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="food",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="fridge",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="front",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Contrast({contrast:1.1})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="glam",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Gobblin),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="gobblin",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new c.Saturation({saturation:.9})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="k1",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(4),c=(i.n(l),i(5)),f=i(6);var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new f.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new f.SoftColorOverlay({color:new l.Color(40/255,40/255,40/255)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c["a"]),t}();h.identifier="k2",t.a=h},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Saturation({saturation:.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="k6",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new c.Saturation({saturation:.7})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="kdynamic",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Desaturation({desaturation:.4})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="lenin",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="lomo",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="mellow",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(4),c=(i.n(l),i(5)),f=i(6);var h=l.Math.ColorMatrix,p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n))),a=new h(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);o._stack.push(new f.ColorMatrixPrimitive({colorMatrix:a}));var s=new l.Color(.8,.6,.9);return o._stack.push(new f.Gamma({gamma:s})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c["a"]),t}();p.identifier="metal",t.a=p},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="morning",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),o._stack.push(new c.Desaturation({desaturation:.65})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="orchid",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="pola",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="pola669",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.Desaturation({desaturation:.65})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="quozi",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="semired",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="sunny",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="texas",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(5),c=i(6);var f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._stack.push(new c.X400),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["a"]),t}();f.identifier="x400",t.a=f},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(4),c=(i.n(l),i(5)),f=i(6);var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n)));return o._lutPrimitive=new f.LookupTableImage({image:o._options.image}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c["a"]),t}();h.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},h.identifier="lut",t.a=h},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(4),c=(i.n(l),i(5)),f=i(6);var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(n))),a=o._options,s=a.image,l=a.resolution,c=a.verticalTileCount,h=a.horizontalTileCount;return o._lutPrimitive=new f.ThreeDLookupTableImage({image:s,resolution:l,verticalTileCount:c,horizontalTileCount:h}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c["a"]),t}();h.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:l.OptionType.NUMBER,default:128},horizontalTileCount:{type:l.OptionType.NUMBER,default:5},verticalTileCount:{type:l.OptionType.NUMBER,default:5}},h.identifier="3d-lut",t.a=h},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(7),c=i.n(l),f=i(2),h=i.n(f),p=i(3),_=i.n(p),d=i(1),y=i.n(d),v=i(4),g=i.n(v),m="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var k,w=v.Math.Vector2;k=i(20).Image;var x=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||y()(t)).call.apply(e,[this].concat(n)));return o._colorOverlayFilter=new v.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new v.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=_()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v["Operation"]),b(t,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(e){var t=this;if(!e)return this._disposeSprites();var i=e.imageGroups,n=e.layoutMode;this._layoutMode=n||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(e){void 0!==i[e]&&["start","mid","end"].forEach(function(n){if(void 0!==i[e][n]){var r=i[e][n];"image"in r&&(r=r.image);var o=v.Engine.Texture.fromImage(r),a=new v.Engine.Sprite(o);t._spriteGroups[e][n]=a,t._sprites.push(a),t._frameContainer.addChild(a)}})})}},{key:"_render",value:function(e){var t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new v.Engine.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new v.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),v.Promise.resolve(this._renderTexture)}},{key:"_updateSprites",value:function(e){var t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.getDimensions(),r="vertical-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,u=0,l=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth/f);var h=new w(0,i);h.x=r?this._frameWidth:0,o.setPosition(h),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*f);var p=new w(n.x-l,i);p.x-=r?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(l)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var _=new w(u,i),d=n.x-u-l;if(r&&(_.x+=this._frameWidth,d-=2*this._frameWidth),a.setPosition(_),a.setWidth(d),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var y=this._frameWidth/f,v=Math.ceil(d/y),g=0;if(-1!==v){var m=Math.round(d/v);a.setWidth(m),g+=m,this._ensureRepeatSpritesExist(v-1,t,a);for(var b=0;b<v-1;b++){m=Math.round((d-g)/(v-b-1));var k=this._repeatSprites[t][b],x=_.clone().add(g,0).floor();k.setPosition(x),k.setWidth(m),k.setHeight(this._frameWidth),g+=m}}}}}},{key:"_ensureRepeatSpritesExist",value:function(e,t,i){var n=this;i.getTexture().setMaxListeners(e+1);var r=this._repeatSprites[t].length;if(e>r)for(var o=e-r,a=0;a<o;a++){var s=new v.Engine.Sprite(i.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else if(e<r){this._repeatSprites[t].splice(e).forEach(function(e){var t=n._sprites.indexOf(e);-1!==t&&(n._sprites.splice(t,1),n._frameContainer.removeChild(e),e.dispose())})}}},{key:"_updateVerticalSpriteGroup",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.getDimensions(),r="horizontal-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,u=0,l=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth*f);var h=new w(i,0);h.y=r?this._frameWidth:0,o.setPosition(h),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*f);var p=new w(i,n.y-l);p.y-=r?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(l)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var _=new w(i,u),d=n.y-u-l;if(r&&(_.y+=this._frameWidth,d-=2*this._frameWidth),a.setPosition(_),a.setHeight(d),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var y=this._frameWidth*f,v=Math.ceil(d/y),g=0;if(-1!==v){var m=Math.round(d/v);a.setHeight(m),g+=m,this._ensureRepeatSpritesExist(v-1,t,a);for(var b=0;b<v-1;b++){m=Math.round((d-g)/(v-b-1));var k=this._repeatSprites[t][b],x=_.clone().add(0,g).floor();k.setPosition(x),k.setHeight(m),k.setWidth(this._frameWidth),g+=m}}}}}},{key:"_disposeSprites",value:function(){var e=this;this._sprites.forEach(function(t){e._frameContainer.removeChild(t),t.getTexture().getBaseTexture().dispose(),t.dispose()}),this._resetSprites()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=c()(t,i);if(void 0===r){var o=y()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0})(t.prototype.__proto__||y()(t.prototype),"dispose",this).call(this),this._disposeSprites()}}],[{key:"validateFrame",value:function(e){if(e){var t=e.imageGroups,i=e.layoutMode;if("string"!=typeof e.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==m(e.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var n=function(e){var i=t[e],n=i.start,r=i.end,o=i.mid;if(void 0!==t[e]){if("object"!==m(t[e]))throw new Error("Frame: `imageGroups."+e+"` needs to be of type Object.");if(void 0!==n&&!(n instanceof k||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".start` needs to be of type Image.");if(void 0!==o&&!(n instanceof k||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":m(o)))throw new Error("Frame: `imageGroups."+e+".mid` needs to be of type Image or Object.");if(void 0!==r&&!(r instanceof k||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".end` needs to be of type Image.")}};if(void 0!==i&&-1===["vertical-inside","horizontal-inside"].indexOf(i))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");n("top"),n("left"),n("right"),n("bottom")}}}]),t}();x.identifier="frame",x.prototype.availableOptions={frame:{type:v.OptionType.OBJECT,validation:x.validateFrame,setter:function(e,t){return t||this._createSpritesForFrame(e),e}},alpha:{type:v.OptionType.NUMBER,default:1},tintColor:{type:v.OptionType.COLOR,default:new v.Color(1,1,1,0)},scale:{type:v.OptionType.NUMBER,default:.1}},g.a.Operations.FrameOperation=x,t.a=x},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(309),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=p.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._lastBlurRadius=o._options.blurRadius,o._lastControlPoint1=o._options.controlPoint1.clone(),o._lastControlPoint2=o._options.controlPoint2.clone(),o._horizontalFilter=new d.a,o._verticalFilter=new d.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new d.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),y(t,[{key:"rotate",value:function(e){var t=this._options.controlPoint1,i=this._options.controlPoint2;90===e?(t.flip(),t.x=1-t.x,i.flip(),i.x=1-i.x):-90===e&&(t.flip(),t.y=1-t.y,i.flip(),i.y=1-i.y),this.set({controlPoint1:t,controlPoint2:i})}},{key:"flip",value:function(e){var t=this._options.controlPoint1,i=this._options.controlPoint2;switch(e){case"horizontal":t.x=1-t.x,i.x=1-i.x;break;case"vertical":t.y=1-t.y,i.y=1-i.y}this.set({controlPoint1:t,controlPoint2:i})}},{key:"transform",value:function(e){var t=this,i={};["controlPoint1","controlPoint2"].forEach(function(n){var r=t.getOption(n);i[n]=e.applyToRelativePoint(r)}),["blurRadius"].forEach(function(n){var r=t.getOption(n);i[n]=e.applyToRelativeSize(r)}),this.set(i,!1)}},{key:"_renderWebGL",value:function(e){var t=e.getDimensions(),i=t.min(),n=this._options,r={blurRadius:n.blurRadius*i,controlPoint1:n.controlPoint1,controlPoint2:n.controlPoint2,texSize:t};return this._horizontalFilter.set(r),this._verticalFilter.set(r),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderCanvas",value:function(e){var t=e.getDimensions(),i=this._options,n=i.blurRadius,r=i.controlPoint1,o=i.controlPoint2;return this._filter.set({blurRadius:n,controlPoint1:r.clone(),controlPoint2:o.clone(),texSize:t}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();g.identifier="linear-focus",g.prototype.availableOptions={controlPoint1:{type:p.OptionType.VECTOR2,default:new v(0,.5)},controlPoint2:{type:p.OptionType.VECTOR2,default:new v(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025}},_.a.Operations.LinearFocusOperation=g,t.a=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(59)),p=i.n(h),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=f.Math.Vector2,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(310),a._lastBlurRadius=null,a._lastControlPoint1=new d,a._lastControlPoint2=new d,a._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),_(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!r||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),i=e.getContext(),n=new d(t.width,t.height),r=i.getImageData(0,0,t.width,t.height);p.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=new d(e.width,e.height),n=this._options.controlPoint1.clone().multiply(i),r=this._options.controlPoint2.clone().multiply(i),o=t.createLinearGradient(n.x,n.y,r.x,r.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var i=t.getContext(),n=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,f=void 0,h=0;h<n.width*n.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];i.putImageData(s,0,0)}}]),t}();y.prototype.availableOptions={blurRadius:{type:f.OptionType.NUMBER,default:30,uniformType:f.UniformType.FLOAT},controlPoint1:{type:f.OptionType.VECTOR2,default:new d(0,.5),uniformType:f.UniformType.FLOAT2},controlPoint2:{type:f.OptionType.VECTOR2,default:new d(1,.5),uniformType:f.UniformType.FLOAT2},delta:{type:f.OptionType.VECTOR2,default:new d(1,1),uniformType:f.UniformType.FLOAT2},texSize:{type:f.OptionType.VECTOR2,default:new d(100,100),uniformType:f.UniformType.FLOAT2}},t.a=y},function(e,t){e.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(312),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=p.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._lastBlurRadius=o._options.blurRadius,o._lastSize=o._options.size,o._lastGradientSize=o._options.gradientSize,o._horizontalFilter=new d.a,o._verticalFilter=new d.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new d.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),y(t,[{key:"rotate",value:function(e){var t=this._options.start,i=this._options.end;90===e?(t.flip(),t.x=1-t.x,i.flip(),i.x=1-i.x):-90===e&&(t.flip(),t.y=1-t.y,i.flip(),i.y=1-i.y),this.set({start:t,end:i})}},{key:"flip",value:function(e){var t=this._options.start,i=this._options.end;switch(e){case"horizontal":t.x=1-t.x,i.x=1-i.x;break;case"vertical":t.y=1-t.y,i.y=1-i.y}this.set({start:t,end:i})}},{key:"transform",value:function(e){var t=this,i={};["start","end"].forEach(function(n){var r=t.getOption(n);i[n]=e.applyToRelativePoint(r)}),["blurRadius","size","gradientSize"].forEach(function(n){var r=t.getOption(n);i[n]=e.applyToRelativeSize(r)}),this.set(i,!1)}},{key:"_renderWebGL",value:function(e){var t=e.getDimensions(),i=t.min(),n=this._options.start.clone(),r=this._options.end.clone(),o=this._options,a={blurRadius:o.blurRadius*i,size:o.size*i,gradientSize:o.gradientSize*i,start:n.clone().multiply(t),end:r.clone().multiply(t),texSize:t};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderCanvas",value:function(e){var t=e.getDimensions(),i=this._options,n=i.blurRadius,r=i.size,o=i.gradientSize,a=i.start,s=i.end;return this._filter.set({blurRadius:n,gradientSize:o,size:r,start:a.clone(),end:s.clone(),texSize:t}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();g.identifier="mirrored-focus",g.prototype.availableOptions={start:{type:p.OptionType.VECTOR2,default:new v(0,.5)},end:{type:p.OptionType.VECTOR2,default:new v(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},size:{type:p.OptionType.NUMBER,default:.1},gradientSize:{type:p.OptionType.NUMBER,default:.1}},_.a.Operations.MirroredFocusOperation=g,t.a=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(59)),p=i.n(h),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=f.Math.Vector2,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(313),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastStart=new d,a._lastEnd=new d,a._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),_(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!r||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),i=e.getContext(),n=new d(t.width,t.height),r=i.getImageData(0,0,t.width,t.height);p.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=this._maskRenderTarget.getPixelRatio(),n=new d(e.width,e.height),r=this._options.size*n.min()*i,o=this._options.gradientSize*n.min()*i,a=this._options.start.clone().multiply(n),s=this._options.end.clone().multiply(n).clone().subtract(a),u=a.clone().add(s.clone().divide(2)),l=s.len(),c=s.clone().divide(l),f=u.clone().add((r+o)*c.y,-(r+o)*c.x),h=u.clone().add(-(r+o)*c.y,(r+o)*c.x),p=t.createLinearGradient(f.x,f.y,h.x,h.y),_=h.clone().subtract(f).len();p.addColorStop(0,"#000000"),p.addColorStop(o/2/_,"#FFFFFF"),p.addColorStop(1-o/2/_,"#FFFFFF"),p.addColorStop(1,"#000000"),t.fillStyle=p,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var i=t.getContext(),n=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,f=void 0,h=0;h<n.width*n.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];i.putImageData(s,0,0)}}]),t}();y.prototype.availableOptions={blurRadius:{type:f.OptionType.NUMBER,default:30,uniformType:f.UniformType.FLOAT},size:{type:f.OptionType.NUMBER,default:50,uniformType:f.UniformType.FLOAT},gradientSize:{type:f.OptionType.NUMBER,default:50,uniformType:f.UniformType.FLOAT},start:{type:f.OptionType.VECTOR2,default:new d(0,.5),uniformType:f.UniformType.FLOAT2},end:{type:f.OptionType.VECTOR2,default:new d(1,.5),uniformType:f.UniformType.FLOAT2},delta:{type:f.OptionType.VECTOR2,default:new d(1,1),uniformType:f.UniformType.FLOAT2},texSize:{type:f.OptionType.VECTOR2,default:new d(100,100),uniformType:f.UniformType.FLOAT2}},t.a=y},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=i.n(f),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=f.Math.Vector2,d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Operation"]),p(t,[{key:"_render",value:function(e){var t=this._options.rotation%360*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(t),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new _(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"getNewDimensions",value:function(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}},{key:"flip",value:function(e){var t=this._options.rotation;switch(90!==t&&270!==t||(e="vertical"===e?"horizontal":"vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),t}();d.identifier="orientation",d.prototype.availableOptions={rotation:{type:f.OptionType.NUMBER,default:0,validation:function(e){if(e%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(e){return(e+360)%360}},flipVertically:{type:f.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:f.OptionType.BOOLEAN,default:!1}},h.a.Operations.OrientationOperation=d,t.a=d},function(e,t,i){"use strict";var n=i(56),r=i.n(n),o=i(0),a=i.n(o),s=i(7),u=i.n(s),l=i(2),c=i.n(l),f=i(3),h=i.n(f),p=i(1),_=i.n(p),d=i(4),y=i.n(d),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),g=function e(t,i,n){null===t&&(t=Function.prototype);var r=u()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};var m=d.Engine.Filters.OverlayFilter,b=d.Math.Vector2,k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(n)));return o._overlayTexture=d.Engine.Texture.fromImage(o._options.image),o._overlayContainer=new d.Engine.Container,o._overlaySprite=new d.Engine.Sprite,o._overlaySprite.setTexture(o._overlayTexture),o._overlaySprite.setAnchor(0,0),o._overlayContainer.addChild(o._overlaySprite),o._overlayFilter=new d.Engine.Filters.OverlayFilter({overlayImage:o._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:o._overlayTexture}),o._sprite.setFilters([o._overlayFilter]),o._renderedOverlaySprite=new d.Engine.Sprite,o._renderedOverlayContainer=new d.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayRendered=!1,o._lastInputDimensions=new b(0,0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,d["Operation"]),v(t,[{key:"setOption",value:function(e,i){if(g(t.prototype.__proto__||_()(t.prototype),"setOption",this).call(this,e,i),"image"===e&&i&&this._sdk){var n=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(i),n.isOfType(d.RendererType.WEBGL)&&n.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(e){var t=e.getDimensions(),i=this._options,n=i.image,r=i.alpha,o=i.blendMode;return n?(this._overlayRendered&&this._lastInputDimensions.equals(t)||(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),d.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),d.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(e){var t=this._sdk.getRenderer(),i=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new d.Engine.RenderTexture(t,i.x,i.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var n=this._options.image,r=n.width,o=n.height,a=d.Utils.resizeVectorToFill(new b(r,o),i);this._overlaySprite.setWidth(a.x),this._overlaySprite.setHeight(a.y);var s=this._overlayRenderTexture.getBaseTexture();t.isOfType(d.RendererType.WEBGL)&&(s.setGLUnit(4),t.updateTexture(s,!1)),this._overlayRenderTexture.resizeTo(i),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){g(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._overlaySprite.dispose()}}]),t}();k.identifier="overlay",k.BLEND_MODES=m.BLEND_MODES,k.prototype.availableOptions={identifier:{type:d.OptionType.STRING},image:{type:d.OptionType.IMAGE},blendMode:{type:d.OptionType.NUMBER,default:m.BLEND_MODES.MULTIPLY,available:r()(m.BLEND_MODES).map(function(e){return m.BLEND_MODES[e]})},alpha:{type:d.OptionType.NUMBER,default:1}},y.a.Operations.OverlayOperation=k,t.a=k},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(317),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=p.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._lastBlurRadius=o._options.blurRadius,o._lastGradientRadius=o._options.gradientRadius,o._horizontalFilter=new d.a,o._verticalFilter=new d.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new d.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),y(t,[{key:"rotate",value:function(e){var t=this._options.position;90===e?(t.flip(),t.x=1-t.x):-90===e&&(t.flip(),t.y=1-t.y),this.set({position:t})}},{key:"flip",value:function(e){var t=this._options.position;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y}this.set({position:t})}},{key:"transform",value:function(e){var t=this,i={},n=this.getPosition();i.position=e.applyToRelativePoint(n),["radius","blurRadius","gradientRadius"].forEach(function(n){var r=t.getOption(n);i[n]=e.applyToRelativeSize(r)}),this.set(i,!1)}},{key:"_renderWebGL",value:function(e){var t=e.getDimensions(),i=t.min(),n=this._options,r=n.position,o={blurRadius:n.blurRadius*i,radius:n.radius*i,gradientRadius:n.gradientRadius*i,position:r.clone().multiply(t),texSize:t};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderCanvas",value:function(e){var t=this._options,i=t.blurRadius,n=t.radius,r=t.gradientRadius,o=t.position,a=e.getDimensions();return this._filter.set({blurRadius:i,radius:n,gradientRadius:r,position:o,texSize:a}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();g.identifier="radial-focus",g.prototype.availableOptions={position:{type:p.OptionType.VECTOR2,default:new v(.5,.5)},radius:{type:p.OptionType.NUMBER,default:.25},gradientRadius:{type:p.OptionType.NUMBER,default:.125},blurRadius:{type:p.OptionType.NUMBER,default:.025}},_.a.Operations.RadialFocusOperation=g,t.a=g},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(59)),p=i.n(h),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=f.Math.Vector2,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=i(318),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastPosition=new d,a._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),_(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions()),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!r||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,i)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),i=e.getContext(),n=new d(t.width,t.height),r=i.getImageData(0,0,t.width,t.height);p.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),i=new d(e.width,e.height),n=this._maskRenderTarget.getPixelRatio(),r=this._options.position.clone().multiply(i),o=this._options,a=o.radius,s=o.gradientRadius;a*=e.height,s*=e.height;var u=t.createRadialGradient(r.x,r.y,0,r.x,r.y,(a+s)*n);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),t.fillStyle=u,t.fillRect(0,0,i.x,i.y)}},{key:"_applyMask",value:function(e,t){for(var i=t.getContext(),n=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,f=void 0,h=0;h<n.width*n.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];i.putImageData(s,0,0)}}]),t}();y.prototype.availableOptions={blurRadius:{type:f.OptionType.NUMBER,default:30,uniformType:f.UniformType.FLOAT},radius:{type:f.OptionType.NUMBER,default:50,uniformType:f.UniformType.FLOAT},gradientRadius:{type:f.OptionType.NUMBER,default:25,uniformType:f.UniformType.FLOAT},position:{type:f.OptionType.VECTOR2,default:new d(.5,.5),uniformType:f.UniformType.FLOAT2},delta:{type:f.OptionType.VECTOR2,default:new d(1,1),uniformType:f.UniformType.FLOAT2},texSize:{type:f.OptionType.VECTOR2,default:new d(100,100),uniformType:f.UniformType.FLOAT2}},t.a=y},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=i(130),y=i(127),v=i(323),g=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),m=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var b=p.Math.Vector2,k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n))),a=o._sdk.getRenderer();o._lastBlurRadius=null,o._blurredRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._maskRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._brushSprite=new d.a(o),o._brushSpriteContainer=new p.Engine.Container;var s=o._brushSprite.getDisplayObject();if(o._brushSpriteContainer.addChild(s),o._outputSprite=new p.Engine.Sprite,o._outputContainer=new p.Engine.Container,o._outputContainer.addChild(o._outputSprite),o._maskFilter=new v.a,a.isOfType(p.RendererType.WEBGL)){o._horizontalFilter=new y.a,o._verticalFilter=new y.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new b(1,1)),o._verticalFilter.setDelta(new b(-1,1));var u=o._maskRenderTexture.getBaseTexture();u.setGLUnit(o._maskFilter.getMaskImage()),a.updateTexture(u,!1),(u=o._blurredRenderTexture.getBaseTexture()).setGLUnit(o._maskFilter.getFilterImage()),a.updateTexture(u,!1)}else a.isOfType(p.RendererType.CANVAS)&&(o._blurFilter=new y.a,o._sprite.setFilters([o._blurFilter]),o._maskFilter.setMaskCanvas(o._maskRenderTexture.getRenderTarget().getCanvas()),o._maskFilter.setFilterCanvas(o._blurredRenderTexture.getRenderTarget().getCanvas()));return o._outputSprite.setFilters([o._maskFilter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),g(t,[{key:"flip",value:function(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),p.Promise.resolve()}},{key:"_renderMask",value:function(e){var t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(p.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var i=this._sdk.getRenderer();i.isOfType(p.RendererType.WEBGL)&&i.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),i=this._blurredRenderTexture.getDimensions();i.equals(t)||this._blurredRenderTexture.resizeTo(t);var n=this._options.blurRadius;if(this._lastBlurRadius!==n||!i.equals(t)){var r=this._sdk.getRenderer(),o=void 0;if(r.isOfType(p.RendererType.WEBGL))o={blurRadius:n*t.min(),texSize:t},this._horizontalFilter.set(o),this._verticalFilter.set(o);else r.isOfType(p.RendererType.CANVAS)&&(o={blurRadius:n},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=n}}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new d.a.Brushes.RadialBrush({size:e,hardness:t,color:p.Color.WHITE}),n=this._brushSprite.createPath(i);return this._options.paths.push(n),this.setDirty(!0),n}},{key:"setDirtyForRenderer",value:function(e,i,n){m(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,i,n),this._brushSprite.setDirtyForRenderer(e,i,n)}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(p.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();k.identifier="selective-blur",k.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.05},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}},_.a.Operations.SelectiveBlurOperation=k,t.a=k},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(321)),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),y=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var v=function(e){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,i));return r._operation=e,r._canvas=n||p.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Configurable"]),d(t,[{key:"serializeOption",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map(function(e){var t=e.getPosition();return i?t.toObject():t.clone()}):y(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,i)}},{key:"_optionEquals",value:function(e,i){if("controlPoints"===e){for(var n=this._options.controlPoints,r=0,o=n.length;r<o;r++)if(!n[r].getPosition().equals(i[r]))return!1;return!0}return y(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,i)}},{key:"render",value:function(e){var t=this._options,i=t.controlPoints,n=t.size;if(!(i.length<2)){p.Utils.ensureCanvasDimensions(this._canvas,e),this._brush&&this._lastBrushSize===n&&e.equals(this._brushInputDimensions)||(this._brushInputDimensions=e.clone(),this._lastBrushSize=n);for(var r=i[0],o=r,a=1;a<i.length;a++)(o=i[a]).renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,r),r=o}}},{key:"_createBrush",value:function(e){var t=this._options,i=t.size,n=t.hardness,r=t.color,o=p.Utils.createCanvas();o.width=o.height=Math.ceil(i*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*n),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(e){var t=new _.a(this,e);this._options.controlPoints.push(t),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(e){this._canvas=e,this._context=e.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(e){e.setDirty()})}},{key:"forEachControlPoint",value:function(e){this._options.controlPoints.forEach(e)}},{key:"renderToCanvas",value:function(e){var t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),t}();v.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},brush:{type:p.OptionType.OBJECT,required:!0},controlPoints:{type:p.OptionType.ARRAY,default:[]},closed:{type:p.OptionType.BOOLEAN,default:!1}},t.a=v},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(4),a=(i.n(o),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var s=o.Math.Vector2,u=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._path=t,this._drawnCanvases=[],this._position=i}return a(e,[{key:"renderToCanvas",value:function(e,t,i){if(-1===this._drawnCanvases.indexOf(t)){for(var n=new s(t.width,t.height),r=t.getContext("2d"),o=this._position.clone().multiply(n),a=i.getPosition().clone().multiply(n),u=o.clone().subtract(a).len(),l=e.width/10,c=0;c<=u;){var f=Math.max(0,Math.min(1,c/u)),h=a.x+(o.x-a.x)*f,p=a.y+(o.y-a.y)*f;r.drawImage(e,h-e.width/2,p-e.height/2,e.width,e.height),c+=l}this._drawnCanvases.push(t)}}},{key:"setPosition",value:function(e){this._position=e}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),i(131)),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h["a"]),p(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,i=t.size,n=t.hardness,r=t.color,o=f.Utils.createCanvas();o.width=o.height=Math.ceil(i*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*n),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=e.clone(),o}}]),t}();t.a=_,_.identifier="imgly_brush_radial",_.prototype.availableOptions=f.Utils.extend(h.a.prototype.availableOptions,{hardness:{type:f.OptionType.NUMBER,default:1}})},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=i(324),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Engine"].Filter),h(t,[{key:"_applyCanvas",value:function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=t.getCanvas(),r=t.getContext(),o=i.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,l=s.getContext("2d"),c=u.getContext("2d"),f=l.getImageData(0,0,n.width,n.height).data,h=r.getImageData(0,0,n.width,n.height),p=h.data,_=c.getImageData(0,0,n.width,n.height).data,d=void 0,y=0;y<n.width*n.height*4;y+=4)d=f[y]/255,p[y]=d*_[y]+(1-d)*p[y],p[y+1]=d*_[y+1]+(1-d)*p[y+1],p[y+2]=d*_[y+2]+(1-d)*p[y+2];o.putImageData(h,0,0)}}]),t}();p.prototype.availableOptions={maskImage:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.INT},maskCanvas:{type:f.OptionType.OBJECT,default:null},filterImage:{type:f.OptionType.NUMBER,default:2,uniformType:f.UniformType.INT},filterCanvas:{type:f.OptionType.OBJECT,default:null}},t.a=p},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(e,t,i){"use strict";var n=i(80),r=i.n(n),o=i(0),a=i.n(o),s=i(7),u=i.n(s),l=i(2),c=i.n(l),f=i(3),h=i.n(f),p=i(1),_=i.n(p),d=i(4),y=i.n(d),v=i(60),g=i(326),m=i(327),b=i(130),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},w=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),x=function e(t,i,n){null===t&&(t=Function.prototype);var r=u()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(n)));return o.setSmoothDownscaling(o._sdk.getOptions().smoothDownscaling),o._onSpriteUpdate=o._onSpriteUpdate.bind(o),o._options.sprites.slice().forEach(function(e){o.removeSprite(e),o.addSprite(e)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,d["Operation"]),w(t,[{key:"getSpritesOfType",value:function(e){return this._options.sprites.filter(function(t){return t instanceof e})}},{key:"rotate",value:function(e){this._options.sprites.forEach(function(t){t.applyRotation(e)})}},{key:"flip",value:function(e){this._options.sprites.forEach(function(t){t.applyFlip(e)})}},{key:"_onSpriteUpdate",value:function(e,t){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(e,t){this._options.sprites.forEach(function(i){return i.applyRotation(e,t)})}},{key:"transform",value:function(e){this._options.sprites.forEach(function(t){return t.applyTransform(e)})}},{key:"scale",value:function(e){this._options.sprites.forEach(function(t){return t.applyScale(e)})}},{key:"serializeOption",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(function(e){return e.serializeOptions(void 0,i)}):x(t.prototype.__proto__||_()(t.prototype),"serializeOption",this).call(this,e,i)}},{key:"createSticker",value:function(e){return new g.a(this,e)}},{key:"createText",value:function(e){return new m.a(this,e)}},{key:"createBrush",value:function(e){return new b.a(this,e)}},{key:"addSprite",value:function(e){this._options.sprites.push(e);var t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(e){var t=this._options.sprites,i=t.indexOf(e);return-1!==i&&(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(i,1),this.setDirty(!0),!0)}},{key:"_render",value:function(e){var t=this,i=this._container,n=this._options.sprites,r=e.getDimensions().clone().floor();return d.Promise.all(n.map(function(e){return e.validateSettings()})).then(function(){n.forEach(function(e){return e.update(t._sdk,r)})}).then(function(){t._renderTexture.clear(),t._renderTexture.render(i)})}},{key:"takeSpriteToFront",value:function(e){var t=this._options.sprites,i=t.indexOf(e);if(-1!==i){d.Utils.moveArrayItem(t,i,t.length-1);var n=e.getDisplayObject();this._container.removeChild(n),this._container.addChild(n),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(e,t){var i=this,n=[];this._options.sprites.forEach(function(e){return e.update(i._sdk,t)});var r=this._sdk.getSprite(),o=r.getWorldTransform().applyInverseToVector(e),a=r.getTexture().getFrame(),s=a.width,u=a.height,l=r.getAnchor().clone().multiply(-s,-u);o.subtract(l);for(var c=this._options.sprites.slice(0).reverse(),f=0,h=c.length;f<h;f++){var p=c[f];p.getHitTestDisplayObject().isAtPosition(o)&&n.push(p)}return n}},{key:"setDirtyForRenderer",value:function(e,i,n){x(t.prototype.__proto__||_()(t.prototype),"setDirtyForRenderer",this).call(this,e,i,n),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,i,n)})}},{key:"dispose",value:function(){x(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._options.sprites.forEach(function(e){e.dispose()})}}]),t}();T.StickerSprite=g.a,T.TextSprite=m.a,T.BrushSprite=b.a,T.identifier="sprite",T.prototype.availableOptions={sprites:{type:d.OptionType.ARRAY,default:[],setter:function(e,t){var i=this;if(e=e.map(function(e,t){if(e instanceof v.a)return e;var n=k({},e);switch(delete n.type,e.type){case"text":return new m.a(i,n);case"sticker":return new g.a(i,n);case"brush":return new b.a(i,n);default:d.Log.error(i.constructor.name,"Invalid sprite type: "+e.type)}}),!t){if(this._options.sprites)this._options.sprites.slice().forEach(function(e){e.dispose(),i.removeSprite(e)});e.forEach(function(e){i.addSprite(e)})}return e}},smoothDownscaling:{type:d.OptionType.BOOLEAN,default:!1}},y.a.Operations.SpriteOperation=T,t.a=T},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(60)),d=i(126),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),v=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var g=p.Math.Vector2,m=p.Math.ColorMatrix,b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n))),a=o._options.image,s=a.src||a.filePath;return o._isSVG=s&&!!s.match(/\w+\.svg(?=\?|$)/i),o._isSVG&&(o._canvas=p.Utils.createCanvas(),o._context=o._canvas.getContext("2d"),o._options.smoothDownscaling=!1),a&&o._onImageUpdate(),o._tintFilter=new p.Engine.Filters.TintFilter,o._adjustmentsFilter=new d.a,o._lastRenderedDimensions=g.NULL,o._lastRenderedInputDimensions=g.NULL,o._onOptionsChange=o._onOptionsChange.bind(o),o._options.adjustments.on("update",o._onOptionsChange),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),y(t,[{key:"applyScale",value:function(e){this.setDimensions(this.getDimensions().multiply(e))}},{key:"serializeOptions",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=v(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,i);return e||(n.type="sticker"),n}},{key:"_rendersToRenderTexture",value:function(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(e,t){var i=this._options,n=i.dimensions,r=i.image;n.equals(g.NULL)&&n.set(r.width,r.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(n)||this._lastRenderedImage!==r)&&this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)&&(r.width=n.x,r.height=n.y,this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()),this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);var o=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){o.push(this._adjustmentsFilter);var a=this._options.adjustments,s=new m;s.multiply(m.createBrightnessMatrix(a.getBrightness())),s.multiply(m.createSaturationMatrix(a.getSaturation())),s.multiply(m.createContrastMatrix(a.getContrast())),this._adjustmentsFilter.set({colorMatrix:s})}this._options.tintMode&&"none"!==this._options.tintMode&&(o.push(this._tintFilter),this._tintFilter.set({mode:p.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(o)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(n),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=r}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale();this._options.flipVertically&&(e.y*=-1),this._options.flipHorizontally&&(e.x*=-1),this._sprite.setScale(e)}},{key:"applyFlip",value:function(e){v(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var i={rotation:this._options.rotation},n=-1*(i.rotation/Math.PI*180);switch(i.rotation=n*Math.PI/180,e){case"horizontal":i.flipHorizontally=!this._options.flipHorizontally,this.set(i);break;case"vertical":i.flipVertically=!this._options.flipVertically,this.set(i)}}},{key:"_hasAdjustments",value:function(){var e=this._options.adjustments;return 0!==e.getBrightness()||1!==e.getSaturation()||1!==e.getContrast()}},{key:"_onImageUpdate",value:function(){var e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(p.RendererType.WEBGL)&&(e=this._canvas),this._inputTexture=p.Engine.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"setOption",value:function(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,i,n),"image"===e&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var e=this._dirtiness;for(var t in e)e[t]=!0}},{key:"dispose",value:function(){v(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)}}]),t}();b.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},identifier:{type:p.OptionType.STRING,default:""},image:{type:p.OptionType.IMAGE,required:!0},position:{type:p.OptionType.VECTOR2,default:g.NULL},dimensions:{type:p.OptionType.VECTOR2,default:g.NULL},anchor:{type:p.OptionType.VECTOR2,default:new g(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:p.OptionType.BOOLEAN,default:!1},tintColor:{type:p.OptionType.COLOR,default:p.Color.WHITE},tintMode:{type:p.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:p.OptionType.NUMBER,default:1},adjustments:{type:p.OptionType.CONFIGURABLE,structure:{brightness:{type:p.OptionType.NUMBER,default:0},saturation:{type:p.OptionType.NUMBER,default:1},contrast:{type:p.OptionType.NUMBER,default:1}}}},b.type="sticker",t.a=b},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=(i.n(p),i(60)),d=i(328),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),v=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var g=p.Math.Vector2,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._textRenderer=new d.a(o,o._operation),o._textRenderer.rotation=o.getRotation(),o._sprite.setTexture(o._textRenderer.getFinalTexture()),o._hitTestSprite.setTexture(o._textRenderer.getTexture()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),y(t,[{key:"serializeOptions",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=v(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,i);return e||(n.type="text"),n}},{key:"getDOMStyle",value:function(e,t){var i=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:i+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(t)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(e){var t=this.getFontSize()*e.y,i=this.getTextMetrics();if(i){var n=1/i.unitsPerEm*t,r=i.ascender*n,o=i.descender*n;return r+Math.abs(o)}return t*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(e,t){return this._textRenderer.getDimensions(e,t)}},{key:"applyFlip",value:function(e){v(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var i=this._options.rotation;switch(e){case"horizontal":i+=2*(Math.PI-i),this.setRotation(i);break;case"vertical":i+=2*(Math.PI/2-i),this.setRotation(i)}}},{key:"applyTransform",value:function(e){v(t.prototype.__proto__||h()(t.prototype),"applyTransform",this).call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(e){v(t.prototype.__proto__||h()(t.prototype),"applyRotation",this).call(this,e);var i=(e+360)%360,n=this._operation.getInputDimensions();90!==i&&270!==i||(this.setMaxWidth(this.getMaxWidth()/n.x*n.y),this.setFontSize(this.getFontSize()/n.y*n.x))}},{key:"setOption",value:function(e,i){if("rotation"===e)return this._options.rotation=i,this._textRenderer&&(this._textRenderer.rotation=i),this._rotation=i,void this.emit("update");v(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,i)}},{key:"getOption",value:function(e){return"rotation"===e?this._rotation:v(t.prototype.__proto__||h()(t.prototype),"getOption",this).call(this,e)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(e,i){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,i);var n=this._textRenderer.getFinalTexture();n.getBaseTexture().update();var r=e.getRenderer();r.isOfType(p.RendererType.WEBGL)&&r.updateTexture(n.getBaseTexture()),v(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,i),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){v(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textRenderer.dispose()}}]),t}();m.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},fontSize:{type:p.OptionType.NUMBER,default:.1},characterSpacing:{type:p.OptionType.NUMBER,default:0},lineHeight:{type:p.OptionType.NUMBER,default:1.1},fontIdentifier:{type:p.OptionType.STRING},fontFamily:{type:p.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:p.OptionType.ALL,default:"normal"},fontStyle:{type:p.OptionType.STRING,default:"normal"},textMetrics:{type:p.OptionType.OBJECT,default:null},outlineWidth:{type:p.OptionType.NUMBER,default:0},outlineColor:{type:p.OptionType.COLOR,default:p.Color.BLACK},alignment:{type:p.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:p.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:p.OptionType.COLOR,default:new p.Color(1,0,0,1)},backgroundColor:{type:p.OptionType.COLOR,default:p.Color.TRANSPARENT},position:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},anchor:{type:p.OptionType.VECTOR2,default:new g(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new g(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},text:{type:p.OptionType.STRING,required:!0},maxWidth:{type:p.OptionType.NUMBER,default:.5},maxHeight:{type:p.OptionType.NUMBER,default:0},visible:{type:p.OptionType.BOOLEAN,default:!0}},m.type="text",t.a=m},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(4),a=(i.n(o),i(329)),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=o.Math.Vector2,l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._operation=i,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return s(e,[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new a.a(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(e,t){t.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+e.fontSize+'px "'+this._text.getFontFamily()+'"',t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();var i=this._text.getOutlineWidth();i>0&&(t.lineWidth=i)}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(e,t){var i=this._text.getAlignment(),n=new u(0,t);switch(i){case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width}this._context.fillText(e,n.x,n.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,n.x,n.y))}},{key:"update",value:function(e,t){var i=this.calculateFontStyles(e,t);if(i){var n=this._calculateText(e,i,t),r=n.dimensions,o=n.lines;this._renderText(e,r,o,i,t),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var e=this._canvas,t=e.width,i=e.height,n=this.rotation,r=Math.cos(n),o=Math.sin(n),a=new u(Math.abs(t*r)+Math.abs(i*o),Math.abs(t*o)+Math.abs(i*r));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(n),this._finalContext.drawImage(this._canvas,-t/2,-i/2),this._finalContext.restore()}},{key:"_renderText",value:function(e,t,i,n,r){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*r.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(n,this._context);for(var o=0;o<i.length;o++){var a=i[o];this._renderTextLine(a,n.topPadding+n.lineHeight*o)}}},{key:"calculateFontStyles",value:function(e,t){var i=this._text.getFontFamily(),n=this._text.getFontSize()*t.y,r=this._text.getAbsoluteTextHeight(t),o=r*this._text.getLineHeight(),a={fontFamily:i,fontSize:n,lineHeight:o,topPadding:r*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===i&&this._textOptions.fontSize===n&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(e,t,i){var n=this._text.getMaxWidth()*i.x;this._applyTextOptions(t,this._context);var r=new u,o=this._text.getText().split("\n");if(void 0!==n)r.x=n,o=this._buildOutputLines(n);else for(var a=0;a<o.length;a++){var s=o[a];r.x=Math.max(r.x,this._context.measureText(s).width)}var l=t.lineHeight;return r.y=o.length*l,{dimensions:r,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(e,t){var i=this.calculateFontStyles(e,t);return this._calculateText(e,i,t).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null}}]),e}();t.a=l},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._lastFontStyle={}}return o(e,[{key:"getLines",value:function(){for(var e=this,t=[],i=[],n=this._lines.length,r=0;r<n;r++){for(var o=this._lines[r],a=this._buildWords(o),s=a.length,u=0;u<s;u++){var l=a[u],c=i.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){i.length>0&&(t.push(i.join("")),i=[l]);var f=l.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){var h=this._splitWord(l);t=t.concat(h.lines),h.rest&&(i=[h.rest])}}else i.push(l)}t.push(i.join("")),i=[]}return t.map(function(t){return e._trimLine(t,e._context.textAlign)})}},{key:"_trimLine",value:function(e,t){return e}},{key:"_buildWords",value:function(e){for(var t=[],i="",n=e.length,r=0;r<n;r++){var o=e[r];i+=o," "!==o&&"-"!==o&&r!==n-1||(t.push(i),i="")}return t}},{key:"_splitWord",value:function(e){for(var t={lines:[],rest:null},i=e.length,n=[],r=0;r<i;r++){var o=e[r];this._getWidth(n.concat(o).join(""))>this._maxWidth?(n.length>0&&t.lines.push(n.join("")),n=[o]):n.push(o),r===i-1&&n.length>0&&(t.rest=n.join(""))}return t}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(e){return this._context.measureText(e).width}},{key:"setText",value:function(e){this._text=e,this._lines=e.split("\n")}},{key:"setMaxWidth",value:function(e){this._maxWidth=e}}]),e}();t.a=a},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(4),h=i.n(f),p=i(331),_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var d=f.Math.Vector2,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Operation"]),_(t,[{key:"_render",value:function(e){this._sprite.setRotation(0);var t=e.getDimensions(),i=this._options,n=i.start,r=i.end,o=i.rotation,a=i.textureScale,s=n.clone().add(r.clone().subtract(n).divide(2)),u=this.calculateScale()*a,l=this.getNewDimensions(t);return this._sprite.setAnchor(s),this._sprite.setRotation(o),this._sprite.setScale(u,u),this._sprite.setPosition(l.clone().multiply(.5)),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"calculateScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,t=this.getInputDimensions(!1),i=new d(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),n=t.clone().multiply(.5);n.subtract(i.clone().divide(2)),n.abs();return n.y>n.x?2*n.y/t.y+1:2*n.x/t.x+1}},{key:"getNewDimensions",value:function(e){var t=this._options,i=t.start,n=t.end,r=t.textureScale,o=this.calculateScale();return e.clone().multiply(r*o).multiply(n.clone().subtract(i)).round()}},{key:"flip",value:function(e){var t=this._options,i=t.start,n=t.end,r=i.clone();"horizontal"===e?(i.set(1-n.x,i.y),n.set(1-r.x,n.y)):"vertical"===e&&(i.set(i.x,1-n.y),n.set(n.x,1-r.y))}},{key:"rotate",value:function(e){for(var t=this._options,i=t.start,n=t.end,r=(e+360)%360,o=Math.floor(r/90),a=0;a<o;a++){var s=i.clone();i.set(1-n.y,s.x),n.set(1-s.y,n.x)}}}]),t}();y.identifier="transform",y.prototype.availableOptions={start:{type:f.OptionType.VECTOR2,default:new d(0,0)},end:{type:f.OptionType.VECTOR2,default:new d(1,1)},textureScale:{type:f.OptionType.NUMBER,default:1},rotation:{type:f.OptionType.NUMBER,default:0}},y.TransformChange=p.a,h.a.Operations.TransformOperation=y,t.a=y},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(4),a=(i.n(o),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var s=o.Math.Vector2,u=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._operation=t,this._options=i,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=i.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=i.end.clone().subtract(i.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(i.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(i.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return a(e,[{key:"applyToRelativePoint",value:function(e){var t=this._operation.getStart(),i=this._operation.getEnd(),n=t.clone().add(i.clone().subtract(t).divide(2)).multiply(this._inputDimensions),r=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=n.clone().add(r).clone().subtract(this._inputDimensions.clone().divide(2)),a=new s(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),u=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return u.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}},{key:"scaleSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return e/this._sizeFactor[t]}},{key:"applyToRotation",value:function(e){return(e+this._rotationDelta)%(2*Math.PI)}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(4),_=i.n(p),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=p.Math.Vector2,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));return o._watermarkSprite=new p.Engine.Sprite,o._watermarkSprite.setAnchor(.5,.5),o._container.addChild(o._watermarkSprite),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p["Operation"]),d(t,[{key:"_render",value:function(e){this._watermarkTexture||(this._watermarkTexture=p.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var t=e.getDimensions(),i=this._options.image,n=i.width,r=i.height,o=p.Utils.resizeVectorToFit(new y(n,r),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),t}();v.identifier="watermark",v.prototype.availableOptions={image:{type:p.OptionType.OBJECT,required:!0}},_.a.Operations.WatermarkOperation=v,t.a=v},function(e,t,i){"use strict";var n=i(39),r=i.n(n),o=[];void 0!==r.a.Operations.SpriteOperation&&o.push(r.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),t.a={EVENTS:{EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",WINDOW_RESIZE:"window:resize",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:updated",HISTORY_BEFORE_UNDO:"history:before-undo",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_REAPPLY_RATIO:"transform:reapply-ratio"},DEFAULTS:{TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new r.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new r.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new r.a.Math.Vector2(851,315)}]}],FONTS:[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.ttf",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.otf",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.ttf",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.otf",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.otf",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.otf",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.otf",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich Black",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Ostrich Bold",variations:[{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton Black",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}}]},{fontFamily:"Panton Light",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.otf",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.ttf",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}],BRUSHES:o}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(10),h=i(335),p=i(133),_=i(339),d=i(340),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=function(e){function t(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return o._ui=e,o._options=i,o._mediator=n,o._shallow=r,o._initFonts(),r||(o._initSDK(),o.operations=new d.a(o,o._sdk,o._mediator),o._initSerializers()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["d"]),y(t,[{key:"_initFonts",value:function(){var e=f.k.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new p.a(this._ui,e);var t=this._fontManager.getFonts(),i=this._ui.getFontLoader();i.setFonts(t),i.load()}},{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.reset();var t;t=this._sdk.parseExif(e),this._setImage(e,t),this._initWatermark()}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var e=this._options,t=e.logLevel,i=e.displayWelcomeMessage,n=e.debug,r=e.license,o=this._options.editor,a=o.smoothDownscaling,s=o.smoothUpscaling,u=o.preferredRenderer,l={logLevel:t,debug:n,displayWelcomeMessage:i,pixelRatio:o.pixelRatio,smoothDownscaling:a,smoothUpscaling:s,transparent:!0,license:r,renderMode:"export"};this._sdk=new f.j(u,l)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(e)}},{key:"getOutputTextureDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(e)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(e)}},{key:"_setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}},{key:"_ensureImageIsResized",value:function(){var e=this,t=this._sdk.getImage(),i=this._sdk.getRenderer(),n=this.getMaxMegapixels(),r=n?1e6*n:null,o=i.getMaxDimensions(),a=new _.a(t,r,o);return!this._resizedImage&&a.needsResize()?a.resize().then(function(t){var i=t.canvas;t.dimensions,t.reason;return e._resizedImage=i,e._sdk.setImage(i),i}):f.h.resolve(t)}},{key:"export",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(function(t){var i=e._options.editor.export;return new h.a(e._sdk,i,!1).export().then(function(t){return e.emit("export",t),e._mediator.emit(f.c.EVENTS.EXPORT,t,e),e._watermarkOperation&&(e._watermarkOperation.setEnabled(!0),e._sdk.render()),e._sdk.setAllOperationsToDirty(),t})})}},{key:"broadcastTransform",value:function(e,t){var i=this,n=new f.j.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(e){var t=i.operations.get(e);t&&t.transform(n)})}},{key:"broadcastFlip",value:function(e){var t=this;["mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(i){var n=t.operations.get(i);n&&n.flip(e)})}},{key:"broadcastRotate",value:function(e){var t=this;["transform","mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(i){var n=t.operations.get(i);n&&n.rotate(e)})}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":i(341).default,"1.0.1":i(349).default,"2.0.0":i(350).default,"3.0.0":i(354).default}}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.0.0",i=this._serializers[t];return i?new i(this).serialize(e):f.h.reject(new Error("No serializer for version "+t+" found."))}},{key:"deserialize",value:function(e){var t=this._serializers[e.version];return t?new t(this).deserialize(e):f.h.reject(new Error("No serializer for version "+e.version+" found."))}},{key:"reset",value:function(){this._sdk.reset(),this.operations.reset()}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._options.editor.image}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}}]),t}();t.a=v},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=i(336),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sdk=t,this._options=i,this._download=n}return s(e,[{key:"export",value:function(){var e=this,t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then(function(i){return e._download&&e._downloadData(t,i),i})}},{key:"_downloadData",value:function(e,t){switch(e){case o.i.DATAURL:a.a.downloadDataURL(t,this._options.fileBasename);break;case o.i.MSBLOB:a.a.downloadMSBlob(t,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var e=this._options;return e.type===o.i.IMAGE&&this._download?o.m.supportsMSBlob()?o.i.MSBLOB:o.i.DATAURL:e.type}}]),e}();t.a=u},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"downloadDataURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",i=this.createBlobURLFromDataURL(e),n=this.getExtensionFromDataURL(e),r=document.createElement("a");r.download=t+"."+n,r.href=i,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"downloadMSBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(e,t+".png")}},{key:"getExtensionFromDataURL",value:function(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(e){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return e;for(var t=o.a.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0;a<t.length;a++)r[a]=t[a];var s=new window.Blob([n],{type:i});return window.URL.createObjectURL(s)}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),a=i.n(o),s=i(1),u=i.n(s),l=i(39);i.n(l);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l["Configurable"]),t}();t.a=c,c.prototype.availableOptions={fontFamily:{type:l.OptionType.STRING,required:!0},variations:{type:l.OptionType.ARRAY,required:!0}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(1),c=i.n(l),f=i(39),h=(i.n(f),function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}());var p={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f["Configurable"]),h(t,[{key:"getLabel",value:function(){var e=p[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic"}return e}}]),t}();t.a=_,_.prototype.availableOptions={identifier:{type:f.OptionType.STRING,required:!0},fontFamily:{type:f.OptionType.STRING,required:!0},fontWeight:{type:f.OptionType.ALL,default:400},fontStyle:{type:f.OptionType.STRING,default:"normal"},textMetrics:{type:f.OptionType.OBJECT,default:null},provider:{type:f.OptionType.STRING,available:["google","file"]},filePath:{type:f.OptionType.STRING},default:{type:f.OptionType.BOOLEAN,default:!1},font:{type:f.OptionType.OBJECT}}},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=t,this._maxPixels=i,this._maxDimensions=n}return a(e,[{key:"needsResize",value:function(){var e=new o.n(this._image.width,this._image.height),t=e.x*e.y,i=null!==this._maxPixels&&t>this._maxPixels,n=null!==this._maxDimensions&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return i||n}},{key:"resize",value:function(){var e=this,t=null,i=null,n=this._maxDimensions;return new o.h(function(r,a){setTimeout(function(){var a=new o.n(e._image.width,e._image.height).clone();if(null!==e._maxPixels&&a.x*a.y>e._maxPixels&&(a.copy(e._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==n&&(a.x>n||a.y>n)){var s=Math.min(n/a.x,n/a.y);a.multiply(s),t="maxDimensions"}a.floor(),i=e._createResizedImageCanvas(a),r({canvas:i,dimensions:a,reason:t})},1e3)})}},{key:"_createResizedImageCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this._image,n=o.k.createCanvas();n.width=e.x,n.height=e.y;var r=e.clone().subtract(t).divide(2);return n.getContext("2d").drawImage(i,0,0,i.width,i.height,r.x,r.y,t.x,t.y),n}},{key:"_getDimensionsByMaxPixels",value:function(){var e=this._image,t=this._maxPixels,i=e.width/e.height,n=e.height/e.width;return new o.n(Math.sqrt(t*i),Math.sqrt(t*n)).floor()}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(23),r=i.n(n),o=i(24),a=i.n(o),s=i(0),u=i.n(s),l=i(10),c="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),u()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var h=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._sdk=i,this._mediator=n,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return f(e,[{key:"exists",value:function(e){return!!this._map[e]}},{key:"add",value:function(e){var t=this,i=e.constructor.identifier;e.on("update",function(){t._mediator.emit(l.c.EVENTS.OPERATION_UPDATED,e)});var n=this._preferredOrder.indexOf(i);if(-1===n)throw new Error("EditorOperations#add: `"+i+"` does not appear in `operationsOrder`");this._stack.set(n,e),this._map[i]=e,this._mediator.emit(l.c.EVENTS.OPERATION_CREATED,e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="object"===(void 0===e?"undefined":c(e))?e.constructor.identifier:e,n=this._stack.getStack();e=this.get(i),delete this._map[i];var r=n.map(function(e){return e.constructor.identifier}).indexOf(i);if(-1!==r){this._stack.removeAt(r);for(var o=r+1;o<n.length;o++){var a=n[o];a&&a.setDirty(!0)}t&&this._mediator.emit(l.c.EVENTS.OPERATION_REMOVED,e)}}},{key:"get",value:function(e){return this._map[e]}},{key:"getOrCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[e]){var i=this._map[e];return i.set(t,!1),i}var n=new(0,this._available[e])(this._sdk,t);return this.add(n),n}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var e=this,t=this._stack.getStack().slice();this._stack.clear(),t.forEach(function(t){e.add(t)})}}]),e}();t.a=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(134),a=i(135),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.0"},function(e,t,i){e.exports=i(343)},function(e,t,i){var n=function(){return this}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=i(344),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var i,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"==typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",d={},y={};y[a]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(M([])));g&&g!==n&&r.call(g,a)&&(y=g);var m=T.prototype=w.prototype=Object.create(y);x.prototype=m.constructor=T,T.constructor=x,T[u]=x.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(m),e},c.awrap=function(e){return{__await:e}},C(E.prototype),E.prototype[s]=function(){return this},c.AsyncIterator=E,c.async=function(e,t,i,n){var r=new E(b(e,t,i,n));return c.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},C(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},c.values=M,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=i),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),S(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;S(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),d}}}function b(e,t,i,n){var r=t&&t.prototype instanceof w?t:w,o=Object.create(r.prototype),a=new F(n||[]);return o._invoke=function(e,t,i){var n=f;return function(r,o){if(n===p)throw new Error("Generator is already running");if(n===_){if("throw"===r)throw o;return D()}for(i.method=r,i.arg=o;;){var a=i.delegate;if(a){var s=O(a,i);if(s){if(s===d)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var u=k(e,t,i);if("normal"===u.type){if(n=i.done?_:h,u.arg===d)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=_,i.method="throw",i.arg=u.arg)}}}(e,i,a),o}function k(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function w(){}function x(){}function T(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(i,n){function o(){return new Promise(function(t,o){!function t(i,n,o,a){var s=k(e[i],e,n);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},a)}a(s.arg)}(i,n,t,o)})}return t=t?t.then(o,o):o()}}function O(e,t){var n=e.iterator[t.method];if(n===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,O(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=k(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=i,t.done=!0,t};return o.next=o}}return{next:D}}function D(){return{value:i,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(11),a=i.n(o),s=i(10),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._categoriesById={},this._filtersByIdentifier={identity:s.j.Operations.FilterOperation.Filters.IdentityFilter},this._categories=s.l.DEFAULTS.FILTERS.slice(0),this._initCategories()}return u(e,[{key:"instantiateFilterWithIdentifier",value:function(e){var t=this,i=this.getFilterByIdentifier(e);if(!i)return a.a.reject(new Error("Unknown filter with identifier `"+e+"`!"));if(i.prototype instanceof s.j.Operations.FilterOperation.Filter)return a.a.resolve(new i);var n=i.lutImage,r=i.resolution,o=i.horizontalTileCount,u=i.verticalTileCount,l=void 0;this._ui.getPreloader&&(l=this._ui.getPreloader().getAsset(n));return(l?a.a.resolve(l):s.f.load(this._ui.getAssetPath(n))).then(function(e){return s.f.load(t._ui.getAssetPath(n)).then(function(e){return new s.j.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:r,horizontalTileCount:o,verticalTileCount:u})})})}},{key:"_initCategories",value:function(){var e=this;if(this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=s.m.mergeCategories(this._categories,this._options.categories,"filters")),this._options.availableFilters){var t=[];this._categories.forEach(function(i){var n=i.filters.filter(function(t){return-1!==e._options.availableFilters.indexOf(t.identifier)});n.length>0&&t.push({identifier:i.identifier,defaultName:i.defaultName,filters:n})}),this._categories=t}var i={identifier:"all",defaultName:"All",filters:this._categories.length<=0?[]:this._categories.map(function(e){return e.filters}).reduce(function(e,t){return e.concat(t)})};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach(function(t){e._categoriesById[t.identifier]=t}),i.filters.forEach(function(t){e._filtersByIdentifier[t.identifier]=t})}},{key:"getFiltersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown filter category '"+e+"'");return this._categoriesById[e].filters}},{key:"getFilterByIdentifier",value:function(e){return this._filtersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesById[e]}}]),e}();t.a=l},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._brushes=[],this._brushesById={},this._addBrushes(o.c.DEFAULTS.BRUSHES);var n=this._options,r=n.brushes,a=n.replaceBrushes,s=n.availableBrushes;this._options.brushes&&this._addBrushes(r,a),s&&(this._brushes=this._brushes.filter(function(e){return-1!==s.indexOf(e.identifier)}))}return a(e,[{key:"_addBrushes",value:function(e,t){var i=this;t&&(this._brushes=[],this._brushesById={}),e.forEach(function(e){i._brushes.push(e),i._brushesById[e.identifier]=e})}},{key:"getBrushByIdentifier",value:function(e){return this._brushesById[e]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(20),_=(i.n(p),i(348)),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),d(t,[{key:"load",value:function(){var e=this;return this._fonts.forEach(function(t){var i=e._ui.getAssetPath(t.getFilePath(),!1,!0);Object(p.registerFont)(i,{family:t.getFont().getFontFamily(),weight:t.getFontWeight(),style:t.getFontStyle()})}),function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||h()(t.prototype),"load",this).call(this)}}]),t}();t.a=y},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(11),a=i.n(o),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=[]}return s(e,[{key:"add",value:function(e){this._fonts.push(e)}},{key:"load",value:function(){return a.a.resolve()}},{key:"dispose",value:function(){}}]),e}();t.a=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(136),a=i(137),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.1"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(138),a=i(140),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="2.0.0"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(o.l.DEFAULTS.FRAME_CATEGORIES);var n=this._options,r=n.categories,a=n.replaceCategories;this._options.categories?this._addCategories(r,a):this._updateAllCategory()}return a(e,[{key:"_addCategories",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=i?e.slice(0):o.m.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.identifier]=e});var n=this._options.availableFrames;n&&this._categories.forEach(function(e){e.frames=e.frames.filter(function(e){return-1!==n.indexOf(e.identifier)})}),this._categories.forEach(function(e){e.frames.forEach(function(e){t._framesById[e.identifier]=e})}),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(e){return e.frames}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown frame category '"+e+"'");return this._categoriesById[e].frames}},{key:"getFrameByIdentifier",value:function(e){return this._framesById[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(10),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=i,this._overlays=o.l.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={},i.overlays&&(i.replaceOverlays?this._overlays=i.overlays:this._overlays=this._overlays.concat(i.overlays)),i.availableOverlays&&(this._overlays=this._overlays.filter(function(e){return-1!==i.availableOverlays.indexOf(e.identifier)})),this._overlays.forEach(function(e){n._overlaysByIdentifier[e.identifier]=e})}return a(e,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(e){return this._overlaysByIdentifier[e]}}]),e}();t.a=s},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(2),a=i.n(o),s=i(3),u=i.n(s),l=i(11),c=i.n(l),f=i(1),h=i.n(f),p=i(10),_=i(48),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var y=p.j.OptionType,v=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,i));return n._loaded=!1,n._loading=!1,n._ui=e,n._frame=p.j.Utils.deepClone(n._options),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p["j"].Configurable),d(t,[{key:"load",value:function(){var e=this;if(this._loaded)return c.a.resolve();if(this._loading)return c.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var t=this._frame.imageGroups,i=[];return["top","left","right","bottom"].forEach(function(n){if(n in t){var r=t[n];["start","mid","end"].forEach(function(t){t in r&&i.push(e._loadPart(n,t))})}}),c.a.all(i).then(function(){e._loaded=!0,e._loading=!1}).catch(function(t){e._loaded=!1,e._loading=!1})}},{key:"_loadPart",value:function(e,t){var i=this,n=this._frame.imageGroups[e][t],r=n;return"string"!=typeof n&&"image"in n&&(r=n.image),_.a.load(this._ui.getAssetPath(r)).then(function(r){return"string"!=typeof n?i._frame.imageGroups[e][t].image=r:i._frame.imageGroups[e][t]=r,r})}},{key:"getFrame",value:function(){return this._frame}}]),t}();t.a=v,v.prototype.availableOptions={identifier:{type:y.STRING,required:!0},defaultName:{type:y.STRING},thumbnail:{type:y.STRING},tintable:{type:y.BOOLEAN,default:!1},layoutMode:{type:y.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:y.OBJECT,required:!0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(355),a=i(356),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.0.0"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(1),h=i.n(f),p=i(10),_=i(138),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),y=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_["a"]),d(t,[{key:"serialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(t.prototype.__proto__||h()(t.prototype),"serialize",this).call(this,i).then(function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:p.k.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t})}},{key:"_serializeSticker",value:function(e,i){var n=y(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,i);return n.options.alpha=i.getAlpha(),n.options.tintColor&&(n.options.tintColor={rgba:n.options.tintColor}),n}},{key:"_serializeText",value:function(e,i){var n=y(t.prototype.__proto__||h()(t.prototype),"_serializeText",this).call(this,e,i);return n.options.color={rgba:n.options.color},n.options.backgroundColor={rgba:n.options.backgroundColor},n.options.flipHorizontally=!1,n.options.flipVertically=!1,delete n.options.fontWeight,n}},{key:"_serializePath",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializePath",this).call(this,e);delete i.hardness,delete i.size,delete i.color;var n=e.getBrush();i.brush=n.serializeOptions(["identifier","size","color"],!0),void 0===i.brush.identifier&&delete i.brush.identifier,i.brush.color={rgba:i.brush.color};var r=n.getOption("hardness");return"undefined"!==r&&(i.brush.hardness=r),i}},{key:"_serializeFrameOperation",value:function(e,i){y(t.prototype.__proto__||h()(t.prototype),"_serializeFrameOperation",this).call(this,e,i);var n=i.filter(function(e){return"sprite"===e.type});if(n.length){var r=n.pop().options.sprites.filter(function(e){return"frame"===e.type})[0];e.getTintColor().equals(new p.b(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var o=e.serializeOptions(["scale","alpha"],!0);r.options=p.k.extend(r.options,o),r.options.size=r.options.scale,delete r.options.scale}}},{key:"_serializeTransformOperation",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializeTransformOperation",this).call(this,e);return e._ratio&&(i.options.meta={identifier:e._ratio.identifier}),delete i.options.scale,i}},{key:"_serializeAdjustmentsOperation",value:function(e){var i=y(t.prototype.__proto__||h()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),n=e.availableOptions.gamma,r=e.getGamma(),o=n.minValue,a=n.midValue,s=n.maxValue;return i.options.gamma=r<=a?(r-o)/(a-o)-1:(r-a)/(s-a),i}},{key:"_serializeOperation",value:function(e,i){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return y(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,i)}}},{key:"_serializeMirroredFocusOperation",value:function(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){var t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}},{key:"_serializeBlurOperation",value:function(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}]),t}();t.a=v,v.version="3.0.0"},function(e,t,i){"use strict";var n=i(0),r=i.n(n),o=i(7),a=i.n(o),s=i(2),u=i.n(s),l=i(3),c=i.n(l),f=i(11),h=i.n(f),p=i(1),_=i.n(p),d=i(10),y=i(140),v=i(90),g=i(48),m=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r()(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),b=function e(t,i,n){null===t&&(t=Function.prototype);var r=a()(t,i);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0};function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var T=void 0;void 0!==d.j.Operations.SpriteOperation&&(T=d.j.Operations.SpriteOperation.BrushSprite.Brush);var C=function(e){function t(){return k(this,t),w(this,(t.__proto__||_()(t)).apply(this,arguments))}return x(t,y["a"]),m(t,[{key:"_deserializeSticker",value:function(e,t){var i=d.j.Operations.SpriteOperation,n=t.options,r=this._stickerManager.getStickerByIdentifier(n.identifier);if(!r)return d.g.warn("Deserializer","Unknown sticker `"+n.identifier+"`. Skipping sprite."),h.a.resolve();var o=v.a.getURLForSticker(r,"base"),a=this._editor.getUI().getAssetPath(o),s=e.getInputDimensions(!1);return g.a.load(a).then(function(t){var o=i.StickerSprite.prototype.availableOptions.adjustments.structure,a=n.rotation,u=n.flipHorizontally,l=n.flipVertically,c={identifier:n.identifier,image:t,position:d.n.fromObject(n.position),dimensions:d.n.fromObject(n.dimensions).multiply(s.min()),rotation:a||0,flipHorizontally:u,flipVertically:l,adjustments:{}};return void 0!==n.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==n.adjustments[e]&&(c.adjustments[e]=n.adjustments[e]+o[e].default)}),void 0!==n.tintColor&&void 0!==r.tintMode&&(c.tintColor=d.b.fromArray(n.tintColor.rgba),c.tintMode=r.tintMode),void 0!==n.alpha&&(c.alpha=n.alpha),e.createSticker(c)})}},{key:"_deserializeTransformOperation",value:function(e){return b(t.prototype.__proto__||_()(t.prototype),"_deserializeTransformOperation",this).call(this,e).then(function(e){if(e)return e._ratio=null,e})}},{key:"_deserializeInputImage",value:function(){var e=this,t=this._data.image,i=t.data,n=t.type,r=t.uri;return i&&n&&(r="data:"+n+";base64,"+i),r?g.a.load(r).then(function(t){e._editor.setImage(t)}):h.a.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(e){var i=d.j.Operations.AdjustmentsOperation;return b(t.prototype.__proto__||_()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then(function(t){if(!t)return null;var n=e.options;if(void 0!==n.gamma){var r=i.prototype.availableOptions.gamma,o=r.minValue,a=r.midValue,s=r.maxValue;t.setGamma(n.gamma<0?a+(a-o)*n.gamma:a+(s-a)*n.gamma)}return t})}},{key:"_deserializeFocusOperation",value:function(e){var i=e.options.options;switch(e.options.type){case"radial":return b(t.prototype.__proto__||_()(t.prototype),"_deserializeFocusOperation",this).call(this,e);case"linear":var n=i.start,r=i.end,o=i.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:d.n.fromObject(n),controlPoint2:d.n.fromObject(r),blurRadius:o}));case"mirrored":var a=i.start,s=i.end,u=i.size,l=i.gradientSize,c=i.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:d.n.fromObject(a),end:d.n.fromObject(s),size:u,gradientSize:l,blurRadius:c}));case"gaussian":var f=i.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:f}))}}},{key:"_deserializeText",value:function(e,t){var i=t.options,n=i.fontSize,r=i.lineHeight,o=i.fontIdentifier,a=i.alignment,s=i.rotation,u=i.maxWidth,l=i.color,c=i.backgroundColor,f=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),f.load().then(function(){var t=e.getInputDimensions(!1),o=u*t.min()/t.x;return e.createText({fontSize:n,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:s,maxWidth:o,text:i.text,color:d.b.fromArray(l.rgba),backgroundColor:d.b.fromArray(c.rgba),position:d.n.fromObject(i.position)})})}},{key:"_createBrushForPath",value:function(e){var t=e.brush,i=t.identifier,n=t.color,r=t.size,o=t.hardness,a={color:d.b.fromArray(n.rgba),size:r};void 0!==o&&(a.hardness=o);var s=this._brushManager.getBrushByIdentifier(i);if(s||(s=this._brushManager.getFirstBrush()),s.prototype&&s.prototype instanceof T)return new s(a);var u=d.k.extend({},s);delete u.image;var l=function(e){function t(){return k(this,t),w(this,(t.__proto__||_()(t)).apply(this,arguments))}return x(t,T),t}();return l.identifier=s.identifier,new l(d.k.extend({},u,a))}},{key:"_deserializeFrame",value:function(e,i){var n=this;return b(t.prototype.__proto__||_()(t.prototype),"_deserializeFrame",this).call(this,e,i).then(function(){var e=n._editor.operations.get("frame"),t=i.options,r=t.size,o=t.alpha,a=t.tintColor,s={};void 0!==r&&(s.scale=r),void 0!==o&&(s.alpha=o),void 0!==a&&(s.tintColor=d.b.fromArray(a.rgba)),e.set(s)})}}]),t}();t.a=C,C.version="3.0.0"}]).default});